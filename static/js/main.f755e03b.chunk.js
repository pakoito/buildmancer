(this.webpackJsonpbuildmancer=this.webpackJsonpbuildmancer||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(16),i=n.n(c),s=(n(22),n(6)),o=(n(23),n(24),n(10)),l=n(29),u=n(30),d=n(17),f=n(1);function j(e,t){switch(t.type){case"updatePlayerStats":return Object(f.a)(Object(f.a)({},e),{},{player:Object(f.a)(Object(f.a)({},e.player),{},{stats:t.stats})});case"updateEnemyStats":return Object(f.a)(Object(f.a)({},e),{},{enemies:e.enemies.map((function(e){return e.id===t.id?Object(f.a)(Object(f.a)({},e),{},{stats:t.stats}):e}))});case"setSelectedEnemy":return Object(f.a)(Object(f.a)({},e),{},{selectedEnemy:t.id});default:return e}}var p=function(e){var t=r.a.useReducer(j,e),n=Object(s.a)(t,2),a=n[0],c=n[1];return Object(f.a)(Object(f.a)({},a),{},{updatePlayerStats:function(e){c({type:"updatePlayerStats",stats:e})},updateEnemyStats:function(e,t){c({type:"updateEnemyStats",id:e,stats:t})},setSelectedEnemy:function(e){c({type:"setSelectedEnemy",id:e})}})},b=function(e,t){return{player:e,monster:t}},m=function(e,t,n){return Math.min(Math.max(e,t),n)},y=function(e,t,n){return b(t.player,Object(f.a)(Object(f.a)({},t.monster),{},{hp:m(t.monster.hp-n,0,e.monster.hp)}))},h=function(e,t){return b(e.player,Object(f.a)(Object(f.a)({},e.monster),{},{distance:m(e.monster.distance+t,1,5)}))},O=function(e,t,n){return b(Object(f.a)(Object(f.a)({},t.player),{},{stamina:m(t.player.stamina-n,0,e.player.stamina)}),t.monster)},v={class:[{display:"Warrior",effects:[]},{display:"Mage",effects:[]}],skill:[{display:"Warrior",effects:[]}],weapon:[{display:"Warrior",effects:[{display:"Chop",effect:function(e,t){return y(e,t,3)}},{display:"Cut",effect:function(e,t){return y(e,t,3)}}]}],offhand:[{display:"Warrior",effects:[{display:"Bla",effect:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return function(n,a){return e(n,t(n,a))}}))}((function(e,t){return y(e,t,3)}),(function(e,t){return O(e,t,2)}),(function(e,t){return h(t,-1)}))}]}],consumable:[{display:"Warrior",effects:[]}],armor:[{display:"Warrior",effects:[]}],headgear:[{display:"Warrior",effects:[]}],footwear:[{display:"Warrior",effects:[]}],charm:[{display:"Warrior",effects:[]}]},g=n(32),x=n(33),w=n(0),S=function(e){var t=e.enemy,n=e.isSelected,a=e.onSelect;return Object(w.jsx)(g.a,{bg:n?"info":void 0,children:Object(w.jsxs)(g.a.Body,{children:[Object(w.jsx)(g.a.Title,{children:t.lore.name}),Object(w.jsxs)(g.a.Text,{children:[t.lore.name,". Has ",t.stats.hp," HP and is at distance"," ",t.stats.distance]}),Object(w.jsx)(x.a,{disabled:n,onClick:a,children:"Select"})]})})},k=n(34),E=function(e){var t=e.selectedButtons,n=e.player,a=e.onClickEffect;return Object(w.jsxs)(g.a,{children:[Object(w.jsxs)(g.a.Body,{children:[Object(w.jsx)(g.a.Title,{children:n.lore.name}),Object(w.jsx)(g.a.Subtitle,{className:"mb-2 text-muted",children:n.build.class.display}),Object(w.jsxs)(g.a.Text,{children:["Has ",n.stats.hp," HP"]})]}),Object(w.jsx)(g.a.Body,{children:Object(w.jsx)(k.a,{direction:"horizontal",gap:2,children:Object.values(n.build).flatMap((function(e){return e.effects})).map((function(e,n){return Object(w.jsxs)(x.a,{active:t.has(e.display),onClick:function(t){a(e.effect)},children:["[",n+1,"] ",e.display]},e.display)}))})})]})};var W=function(e){var t=p({player:e.player,enemies:e.enemies,selectedEnemy:e.enemies[0].id}),n=t.player,r=t.enemies,c=t.selectedEnemy,i=t.updatePlayerStats,f=t.updateEnemyStats,j=t.setSelectedEnemy,m=function(t){var a=t(b(e.player.stats,e.enemies.filter((function(e){return e.id===c}))[0].stats),b(n.stats,r.filter((function(e){return e.id===c}))[0].stats));i(a.player),f(c,a.monster)},y=Object.values(n.build).flatMap((function(e){return e.effects})),h=function(e){var t=Object(a.useState)(new Set),n=Object(s.a)(t,2),r=n[0],c=n[1],i=function(e){var t=e.key;c((function(e){return new Set([].concat(Object(o.a)(e),[t]))}))},l=Object(a.useCallback)((function(t){var n=t.key;c((function(e){return new Set(Object(o.a)(e).filter((function(e){return e!==n})))})),e(n)}),[e]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",i),window.addEventListener("keyup",l),function(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",l)}}),[l]),r}((function(e){var t=parseInt(e);t>0&&t<=y.length&&m(y[t-1].effect)})),O=new Set(Object(o.a)(h).flatMap((function(e){var t=parseInt(e);return t>0&&t<=y.length?[y[t-1].display]:[]})));return Object(w.jsx)(l.a,{fluid:!0,children:Object(w.jsx)(u.a,{className:"justify-content-center align-items-flex-start",children:Object(w.jsxs)(d.a,{sm:12,md:8,children:[Object(w.jsx)(u.a,{children:Object(w.jsx)(d.a,{children:Object(w.jsx)(E,{player:n,onClickEffect:m,selectedButtons:O})})}),Object(w.jsx)(u.a,{className:"mt-2 g-2",children:r.map((function(e){return Object(w.jsx)(d.a,{xs:6,md:4,children:Object(w.jsx)(S,{enemy:e,isSelected:e.id===c,onSelect:function(){j(e.id)}})},e.id)}))})]})})})},C=n(8),P=n(31),B=Object.entries(v).map((function(e){var t=Object(s.a)(e,2);return{type:t[0],options:t[1].map((function(e,t){return{display:e.display,value:t}}))}})),L=function(e){var t=e.onSave,n=r.a.useState(B.reduce((function(e,t){var n=t.type,a=t.options;return Object(f.a)(Object(f.a)({},e),{},Object(C.a)({},n,a[0].value))}),{})),a=Object(s.a)(n,2),c=a[0],i=a[1];return Object(w.jsx)(l.a,{fluid:!0,children:Object(w.jsx)(u.a,{className:"g-2",children:Object(w.jsx)(d.a,{children:Object(w.jsxs)(P.a,{onSubmit:function(e){e.preventDefault(),t({id:"p-1",lore:{name:"Paco",age:34},stats:{hp:10,stamina:8},build:Object.entries(c).reduce((function(e,t){var n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(f.a)(Object(f.a)({},e),{},Object(C.a)({},a,v[a][r]))}),{})})},children:[B.map((function(e){var t=e.type,n=e.options;return Object(w.jsxs)(P.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(w.jsx)(P.a.Label,{children:t}),n.map((function(e){var n=e.display,a=e.value;return Object(w.jsx)(P.a.Check,{type:"radio",label:n,name:t,id:"".concat(a),checked:c[t]===a,onChange:function(){!function(e,t){i(Object(f.a)(Object(f.a)({},c),{},Object(C.a)({},e,t)))}(t,a)}},a)}))]},t)})),Object(w.jsx)(x.a,{type:"submit",children:"Submit"})]})})})})},N=[{id:"m-1",lore:{name:"Sacapuntas"},stats:{hp:25,rage:0,distance:5}},{id:"m-2",lore:{name:"Sacapuntas"},stats:{hp:25,rage:0,distance:5}},{id:"m-3",lore:{name:"Sacapuntas"},stats:{hp:25,rage:0,distance:5}}];var T=function(){var e=r.a.useState("buildingPlayer"),t=Object(s.a)(e,2),n=t[0],a=t[1],c=r.a.useState(),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(w.jsxs)("div",{className:"App",children:["buildingPlayer"===n?Object(w.jsx)(L,{onSave:function(e){l({player:e,enemies:N}),a("game")}}):null,"game"===n&&o?Object(w.jsx)(W,{player:o.player,enemies:o.enemies}):null]})},M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(T,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/buildmancer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/buildmancer","/service-worker.js");M?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):I(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):I(t,e)}))}}(),A()}},[[28,1,2]]]);
//# sourceMappingURL=main.f755e03b.chunk.js.map