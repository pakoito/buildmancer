(this.webpackJsonpbuildmancer=this.webpackJsonpbuildmancer||[]).push([[0],{103:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return r}));var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(t){if(e&&"serviceWorker"in navigator){if(new URL("/buildmancer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/buildmancer","/service-worker.js");n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):c(e,t)}))}}function c(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}}).call(this,a(53))},111:function(e,t,a){},112:function(e,t,a){},12:function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"g",(function(){return u})),a.d(t,"h",(function(){return b})),a.d(t,"a",(function(){return f})),a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return y})),a.d(t,"c",(function(){return h}));var n=a(10),r=a(0),c=a(51),i=a(6),s=function(e){return e.states[e.states.length-1]},o=function(){return(new c.Chance).pickone(h)},u=function(){return g[Math.floor(Math.random()*g.length)]},l=function(e,t){return Object(r.a)({debug:y.debug[1],basic:e.pickone(y.basic),class:e.pickone(y.class),skill:e.pickone(y.skill),armor:e.pickone(y.armor),weapon:e.pickone(y.weapon),offhand:e.pickone(y.offhand),footwear:e.pickone(y.footwear),headgear:e.pickone(y.headgear),charm:e.pickone(y.charm),consumable:e.pickone(y.consumable)},t)},b=function(e,t){var a=new c.Chance;return[{id:a.string(),lore:{name:u(),age:a.age()},build:l(a,t)},Object(r.a)({hp:p(10),stamina:p(6),staminaPerTurn:p(2),speed:p(0),attack:p(0),defence:p(0),status:m},e)]},d=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(n.a)(new Set(t))},f=d(0,1,2,3,4),j=f,p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return{current:e,max:t}},m={dodge:{active:!1},armor:{amount:0},bleed:{turns:0},stun:{active:!1}},O=[{display:"Sword",tooltip:"All-rounder",effects:[{display:"Slash",tooltip:"Swings at the enemy",effects:[Object(i.b)(["Basic:Attack",{amount:2}])],priority:3,stamina:2,range:d(0,1)},{display:"Pommel Hit",tooltip:"Deals a quick blow",effects:[Object(i.b)(["Basic:Attack",{amount:2}])],priority:2,stamina:2,range:d(0)},{display:"Overhead Slice",tooltip:"Moves into melee and deals a heavy blow",effects:[Object(i.b)(["Basic:Move",{amount:-1}]),Object(i.b)(["Basic:Attack",{amount:4}])],priority:4,stamina:3,range:d(1)}]},{display:"Greatsword",tooltip:"Specialized in big damage",effects:[{display:"Rend",tooltip:"Swings at the enemy",effects:[Object(i.b)(["Basic:Attack",{amount:3}])],priority:4,stamina:4,range:d(0,1)},{display:"Feint",tooltip:"Quick step backwards",effects:[Object(i.b)(["Basic:Move",{amount:1}])],priority:1,stamina:1,range:d(0,1)},{display:"Earth Flattener",tooltip:"Charges a monstruous stunning blow",effects:[Object(i.b)(["Basic:Move",{amount:5}]),Object(i.b)("Effect:Stun")],priority:4,stamina:6,range:d(1)}]},{display:"Twinblades",tooltip:"Specialized in mobility",effects:[{display:"Swoosh",tooltip:"Deals a strike and moves back",effects:[Object(i.b)(["Basic:Attack",{amount:2}]),Object(i.b)(["Basic:Move",{amount:1}])],priority:2,stamina:2,range:d(0,1)},{display:"Fiuuum",tooltip:"Jump attack",effects:[Object(i.b)(["Basic:Move",{amount:-2}]),Object(i.b)(["Basic:Attack",{amount:3}])],priority:4,stamina:3,range:d(2,3)},{display:"SwishSwishSwishSwish",tooltip:"Deals multiple low damage hits",effects:[Object(i.b)(["Basic:Attack",{amount:1}]),Object(i.b)(["Basic:Attack",{amount:1}]),Object(i.b)(["Basic:Attack",{amount:1}]),Object(i.b)(["Basic:Attack",{amount:1}])],priority:3,stamina:4,range:d(0)}]},{display:"Katana",tooltip:"Specialized in bleeding",effects:[{display:"Slice & Dice",tooltip:"Deals two swift strikes",effects:[Object(i.b)(["Basic:Attack",{amount:1}]),Object(i.b)(["Basic:Attack",{amount:1}])],priority:3,stamina:2,range:d(0,1)},{display:"Wakizashi",tooltip:"Short sword with a quick attack causing bleeding",effects:[Object(i.b)(["Basic:Attack",{amount:1}]),Object(i.b)(["Effect:Bleed",{target:"Monster",turns:2}])],priority:2,stamina:4,range:d(0,1)},{display:"Unsheathe",tooltip:"Dodges the next attack and deals damage",effects:[Object(i.b)("Effect:Dodge"),Object(i.b)(["Basic:Attack",{amount:3}])],priority:1,stamina:4,range:d(0)}]},{display:"Axe",tooltip:"Specialized in debuffs",effects:[{display:"Chop",tooltip:"A slow but reliable attack",effects:[Object(i.b)(["Basic:Attack",{amount:2}])],priority:4,stamina:3,range:d(0,1)},{display:"Aim for the head!",tooltip:"Cripples the monster",effects:[Object(i.b)(["Effect:Defence",{target:"Monster",amount:-1}]),Object(i.b)(["Effect:Bleed",{target:"Player",turns:3}])],priority:4,stamina:5,range:d(1)},{display:"Target the limbs!",tooltip:"Weakens the monster",effects:[Object(i.b)(["Effect:Attack",{target:"Monster",amount:-1}]),Object(i.b)(["Effect:Bleed",{target:"Player",turns:3}])],priority:4,stamina:5,range:d(1)}]},{display:"Lance",tooltip:"Specialized in mid-range attacks",effects:[{display:"Pierce",tooltip:"Pokes the enemy",effects:[Object(i.b)(["Basic:Attack",{amount:2}])],priority:3,stamina:2,range:d(0,1,2)},{display:"Charge!!",tooltip:"Runs towards the enemy to deal a massive blow",effects:[Object(i.b)(["Basic:Move",{amount:-5}]),Object(i.b)(["Basic:Attack",{amount:4}])],priority:1,stamina:3,range:d(4)}]},{display:"Hammer",tooltip:"Specialized in stunning",effects:[{display:"Head Banger",tooltip:"Hits the enemy in the head",effects:[Object(i.b)(["Basic:Attack",{amount:2}]),Object(i.b)("Effect:Stun")],priority:4,stamina:4,range:d(0)},{display:"Large swing",tooltip:"Uses the inertia of the hammer to safely advance",effects:[Object(i.b)(["Basic:Move",{amount:-3}]),Object(i.b)("Effect:Stun")],priority:3,stamina:3,range:d(1,2,3)},{display:"Go for the ankles",tooltip:"Slows down the enemy",effects:[Object(i.b)(["Effect:Speed",{target:"Monster",amount:-1}]),Object(i.b)("Effect:Stun")],priority:4,stamina:6,range:d(1)}]},{display:"Finger Claw",tooltip:"Specialized in poison",effects:[{display:"Caress",tooltip:"Applies poison to the monster",effects:[Object(i.b)(["Effect:Poison",{target:"Monster",turns:2}])],priority:3,stamina:2,range:d(0)},{display:"Backflip",tooltip:"Dodges an attack and moves backward",effects:[Object(i.b)("Effect:Dodge"),Object(i.b)(["Basic:Move",{amount:2}])],priority:1,stamina:4,range:d(0,1)}]},{display:"Bow",tooltip:"Specialized in ranged attacks",effects:[{display:"Relaxed Shot",tooltip:"Shoots an arrow",effects:[Object(i.b)(["Basic:Attack",{amount:2}])],priority:3,stamina:2,range:d(3,4)},{display:"Power Draw",tooltip:"Shoots your strongest arrow and makes you weaker",effects:[Object(i.b)(["Basic:Attack",{amount:6}]),Object(i.b)(["Effect:Attack",{target:"Player",amount:-1}])],priority:3,stamina:4,range:d(4)}]},{display:"Magic Staff",tooltip:"Specialized in multiple attacks",effects:[{display:"Bolt",tooltip:"Shoots a low damage bolt",effects:[Object(i.b)(["Basic:Attack",{amount:1}])],priority:3,stamina:3,range:f},{display:"Pew Pew Pew",tooltip:"Shoots a barrage of bolts",effects:[Object(i.b)(["Basic:Attack",{amount:1}]),Object(i.b)(["Basic:Attack",{amount:1}]),Object(i.b)(["Basic:Attack",{amount:1}]),Object(i.b)(["Basic:Attack",{amount:1}])],priority:4,stamina:8,range:d(2,3,4)}]}],y={debug:[{display:"None"},{display:"Debug",effects:[{display:"GGWP",tooltip:"Wins the game",priority:1,stamina:0,range:f,effects:[Object(i.b)("Debug:GGWP")]},{display:"SUDOKU",tooltip:"Loses the game",priority:1,stamina:0,range:f,effects:[Object(i.b)("Debug:Sudoku")]}]}],basic:[{display:"Basic",effects:[{display:"Rest",tooltip:"Skip the turn and restore stamina",priority:4,stamina:0,range:j,effects:[Object(i.b)("Basic:Rest")]},{display:"Advance",tooltip:"Move closer",priority:4,stamina:1,range:j,effects:[Object(i.b)(["Basic:Move",{amount:-1}])]},{display:"Retreat",tooltip:"Move farther",effects:[Object(i.b)(["Basic:Move",{amount:1}])],priority:4,stamina:1,range:j}]}],class:[{display:"Warrior",passives:["+Attack","+Defence","+Stamina"],effects:[{display:"Strategic Kick",tooltip:"Last resource attack",effects:[Object(i.b)(["Basic:Attack",{amount:2}])],priority:2,stamina:1,range:d(0,1)}]},{display:"Rogue",passives:["+Speed","+Speed","-Attack","-Stamina"],effects:[{display:"Strategic retreat",tooltip:"Jump backwards",effects:[Object(i.b)(["Basic:Move",{amount:999}])],priority:2,stamina:1,range:j}]},{display:"Berserk",passives:["+Attack","+Attack","+Attack","-Defence","-Defence","-Health"]},{display:"Mage",passives:["+StaPerTurn","+Stamina","-Health","-Speed"],effects:[{display:"Just having a thought",tooltip:"Restores stamina for the next action",priority:4,stamina:0,range:j,effects:[Object(i.b)(["Basic:Stamina",{amount:999}])]}]},{display:"Cleric",passives:["+Defence","+Stamina"],effects:[{display:"Minor Healing",tooltip:"Restores some HP",effects:[Object(i.b)(["Basic:HP",{amount:2}])],priority:3,stamina:3,range:j}]}],skill:[{display:"Sturdy",effects:[{display:"Endure the pain",tooltip:"Blocks some damage",effects:[Object(i.b)(["Effect:Armor",{amount:2}])],priority:1,stamina:2,range:j}]},{display:"Nimble",effects:[{display:"Dodge",tooltip:"Avoid one enemy attack",effects:[Object(i.b)("Effect:Dodge")],priority:2,stamina:4,range:j}]},{display:"Resourceful",effects:[{display:"Dodge this!",tooltip:"Throws a stone",effects:[Object(i.b)(["Basic:Attack",{amount:2}])],priority:3,stamina:3,range:d(3,4)}]}],weapon:O,offhand:[{display:"Hook",passives:["-Stamina"],effects:[{display:"Get over here!",tooltip:"Moves enemy closer",effects:[Object(i.b)(["Basic:Attack",{amount:3}]),Object(i.b)(["Basic:Move",{amount:-2}])],priority:4,stamina:3,range:d(2,3,4)}]},{display:"Parry Dagger",passives:["-Defence"],effects:[{display:"Get over here!",tooltip:"Avoids a melee attack",effects:[Object(i.b)("Effect:Dodge")],priority:2,stamina:2,range:d(1)}]},{display:"Shield",passives:["+Defence","-Speed"],effects:[{display:"Not today!",tooltip:"Blocks a lot of damage",effects:[Object(i.b)(["Effect:Armor",{amount:5}])],priority:2,stamina:4,range:j}]},{display:"Focus",passives:["+Speed","+StaPerTurn"]},{display:"Wand",passives:["-Defence","-StaPerTurn"],effects:[{display:"Magic Bolt",tooltip:"Shoots mana bolts until the caster faints",effects:[Object(i.b)("Wand:MagicBolt")],priority:3,stamina:1,range:d(3,4)}]}],armor:[{display:"Heavy",passives:["+Defence","+Defence","+Defence","+Defence","-Speed","-Speed","-StaPerTurn"]},{display:"Medium",passives:["+Defence","+Defence","-StaPerTurn"]},{display:"Light",passives:["+Defence"]},{display:"None",passives:["+Speed"]}],headgear:[{display:"Helm",passives:["+Defence","+Defence","-Speed","-StaPerTurn"],tooltip:"Big protection for slow combatants"},{display:"Feather Cap",passives:["+StaPerTurn","+Stamina"],tooltip:"Makes you feel energized, doesn't it?"},{display:"Mage Hat",passives:["-StaPerTurn"],tooltip:"Small tricks for big plays",effects:[{display:"Flash!",tooltip:"Blinks you to a better position",effects:[Object(i.b)(["Basic:Attack",{amount:1}]),Object(i.b)(["Basic:Move",{amount:2}])],priority:3,stamina:4,range:d(1,2)}]}],footwear:[{display:"Slippers of Dooooodge!",tooltip:"Allows you to dodge attacks",passives:["-Stamina"],effects:[{display:"Advanced Dodge",tooltip:"Avoid 1 attack",effects:[Object(i.b)("Effect:Dodge")],priority:1,stamina:3,range:j}]},{display:"Boots of Flight",tooltip:"Avoid your enemies",passives:["-StaPerTurn","-Defence"],eot:[{display:"Flight!",tooltip:"Increases distance every turn",priority:0,range:f,effects:[Object(i.b)("BootsOfFlight:EOT")]}]},{display:"Greaves of Stability",tooltip:"Extra resilient",passives:["+Defence","-Speed"],effects:[{display:"Dig your heels",tooltip:"Resists damage",effects:[Object(i.b)(["Effect:Armor",{amount:3}])],priority:1,stamina:4,range:j}]}],charm:[{display:"of Health",passives:["+Health","-Speed"],tooltip:"Increases your maximum health"},{display:"of Haste",passives:["+StaPerTurn","-Stamina"],tooltip:"Increases your maximum stamina regeneration"},{display:"of Resilience",passives:["+Stamina","-StaPerTurn"],tooltip:"Increases your maximum stamina"},{display:"of Strength",passives:["+Attack","-Health","-StaPerTurn"],tooltip:"Increases your maximum attack"},{display:"of Swiftness",passives:["+Speed","-Attack"],tooltip:"Increases your maximum speed"},{display:"of Defence",passives:["+Defence","-Stamina","-Speed"],tooltip:"Increases your maximum defence"}],consumable:[{display:"Healing Potion",amount:3,effects:[{display:"Healing!",tooltip:"Restores some HP",effects:[Object(i.b)(["Basic:HP",{amount:2}]),Object(i.b)(["Inventory:Consume",{target:"Healing Potion"}])],priority:4,stamina:5,range:j}]},{display:"Pot of Razors",amount:2,effects:[{display:"Throw pot",tooltip:"Causes bleeding",effects:[Object(i.b)(["Effect:Bleed",{target:"Monster",turns:3}]),Object(i.b)(["Inventory:Consume",{target:"Pot of Razors"}])],priority:4,stamina:5,range:j}]},{display:"Life Bubble",amount:1,effects:[{display:"Activate Bubble",tooltip:"Protects against a single source of damage this turn",effects:[Object(i.b)("Effect:Dodge"),Object(i.b)(["Inventory:Consume",{target:"Life Bubble"}])],priority:1,stamina:1,range:j}]},{display:"Pet Rock",amount:3,effects:[{display:"Rock, to me!",tooltip:"Reduces damage",effects:[Object(i.b)(["Effect:Armor",{amount:3}]),Object(i.b)(["Inventory:Consume",{target:"Pet Rock"}])],priority:2,stamina:3,range:j}]}]},h=[[{lore:{name:"Sacapuntas"},rolls:[[0,1,2,1,0],[0,1,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0,0]],effects:[{display:"Swipe",tooltip:"Swipe",priority:3,effects:[Object(i.b)(["Monster:Attack",{amount:3}])],range:d(0,1)},{display:"Roar",tooltip:"Roar",priority:1,effects:[Object(i.b)(["Basic:Stamina",{amount:-5}])],range:f},{display:"Jump",tooltip:"Jump",priority:2,effects:[Object(i.b)(["Monster:Move",{amount:-4}])],range:d(2,3,4)}]},{hp:p(25),distance:4,speed:p(0),attack:p(0),defence:p(0),status:m}],[{lore:{name:"Toro"},effects:[{display:"Swipe",tooltip:"Swipe",priority:3,effects:[Object(i.b)(["Monster:Attack",{amount:3}])],range:f},{display:"Jump",tooltip:"Jump",priority:2,effects:[Object(i.b)(["Monster:Move",{amount:-4}])],range:d(2,3,4)}],rolls:[[0,0,0,0,0],[0,0,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0]]},{hp:p(22),distance:4,speed:p(0),attack:p(0),defence:p(0),status:m}],[{lore:{name:"Summoner"},effects:[{display:"Swipe",tooltip:"Swipe",priority:3,effects:[Object(i.b)(["Monster:Attack",{amount:3}])],range:d(0,1)},{display:"Retreat",tooltip:"Jump",priority:3,effects:[Object(i.b)(["Monster:Move",{amount:5}])],range:f},{display:"Summon Smol",tooltip:"Summon Smol",priority:4,effects:[Object(i.b)(["Monster:Summon",{enemy:4}])],range:d(2,3,4)},{display:"Spit",tooltip:"Summon Smol",priority:4,effects:[Object(i.b)(["Monster:Attack",{amount:2}])],range:d(2,3,4)}],rolls:[[1,1,1,0,0],[1,1,1,0,0],[1,1,3,3,0],[2,3,3,3,0],[2,2,3,3,0]]},{hp:p(30),distance:4,speed:p(0),attack:p(0),defence:p(0),status:m}],[{lore:{name:"Body"},effects:[{display:"Swipe",tooltip:"Swipe",priority:3,effects:[Object(i.b)(["Monster:Attack",{amount:3}])],range:d()}],rolls:[[0],[0],[0],[0],[0]]},{hp:p(300),distance:0,speed:p(0),attack:p(0),defence:p(0),status:m}],[{lore:{name:"Smol"},effects:[{display:"Swipe",tooltip:"Swipe",priority:3,effects:[Object(i.b)(["Monster:Attack",{amount:3}])],range:d()}],rolls:[[0],[0],[0],[0],[0]]},{hp:p(5),distance:0,speed:p(0),attack:p(0),defence:p(0),status:m}]],g=["Lydan","Syrin","Ptorik","Joz","Varog","Gethrod","Hezra","Feron","Ophni","Colborn","Fintis","Gatlin","Jinto","Hagalbar","Krinn","Lenox","Revvyn","Hodus","Dimian","Paskel","Kontas","Weston","Azamarr","Jather","Tekren","Jareth","Adon","Zaden","Eune","Graff","Tez","Jessop","Gunnar","Pike","Domnhar","Baske","Jerrick","Mavrek","Riordan","Wulfe","Straus","Tyvrik","Henndar","Favroe","Whit","Jaris","Renham","Kagran","Lassrin","Vadim","Arlo","Quintis","Vale","Caelan","Yorjan","Khron","Ishmael","Jakrin","Fangar","Roux","Baxar","Hawke","Gatlen","Barak","Nazim","Kadric","Paquin","Kent","Moki","Rankar","Lothe","Ryven","Clawsen","Pakker","Embre","Cassian","Verssek","Dagfinn","Ebraheim","Nesso","Eldermar","Rivik","Rourke","Barton","Hemm","Sarkin","Blaiz","Talon","Agro","Zagaroth","Turrek","Esdel","Lustros","Zenner","Baashar","Dagrod","Gentar","Feston","Syrana","Resha","Varin","Wren","Yuni","Talis","Kessa","Magaltie","Aeris","Desmina","Krynna","Asralyn","Herra","Pret","Kory","Afia","Tessel","Rhiannon","Zara","Jesi","Belen","Rei","Ciscra","Temy","Renalee","Estyn","Maarika","Lynorr","Tiv","Annihya","Semet","Tamrin","Antia","Reslyn","Basak","Vixra","Pekka","Xavia","Beatha","Yarri","Liris","Sonali","Razra","Soko","Maeve","Everen","Yelina","Morwena","Hagar","Palra","Elysa","Sage","Ketra","Lynx","Agama","Thesra","Tezani","Ralia","Esmee","Heron","Naima","Rydna","Sparrow","Baakshi","Ibera","Phlox","Dessa","Braithe","Taewen","Larke","Silene","Phressa","Esther","Anika","Rasy","Harper","Indie","Vita","Drusila","Minha","Surane","Lassona","Merula","Kye","Jonna","Lyla","Zet","Orett","Naphtalia","Turi","Rhays","Shike","Hartie","Beela","Leska","Vemery","Lunex","Fidess","Tisette","Partha"]},148:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(92),i=(a(111),a(10)),s=a(8),o=(a(112),a(113),a(22)),u=a(0),l=a(159),b=a(154),d=a(155),f=a(160),j=a(96),p=a(156);var m=a(6),O=a(12),y=a(24),h=a(26),g=a(1),v=Object(y.b)(["debug","basic"]),x=function(e){var t=e.isSelected,a=e.section,r=e.options,c=e.setField,i=function(e){var t=Object(n.useRef)(null);return[function(){return t.current.scrollIntoView(e)},t]}({behavior:"smooth",block:"start"}),o=Object(s.a)(i,2),u=o[0],b=o[1];return Object(g.jsxs)(d.a,{children:[Object(g.jsx)(l.a.Label,{children:a}),Object(g.jsx)("br",{}),Object(g.jsx)(p.a,{size:"lg",className:"mb-2",children:r.map((function(e){return Object(g.jsx)(j.a,{name:a,id:"".concat(e.display),variant:t(e)?"primary":"secondary",onClick:function(){c(e),u()},children:e.display},e.display)}))}),Object(g.jsx)("div",{id:"".concat(a,"-scroll"),ref:b})]})},k=function(e){var t=e.onSave,a=Object(O.h)(),n=Object(s.a)(a,2),c=n[0],i=n[1],p=r.a.useState(c.build),y=Object(s.a)(p,2),k=y[0],S=y[1],w=r.a.useState(c.lore),A=Object(s.a)(w,2),M=A[0],E=A[1],P=function(e){return Object(g.jsx)("b",{children:k[e].display})},B=Object(h.a)(Object(u.a)(Object(u.a)({},c),{},{build:k}),i,[Object(O.f)()[1]])[0];return Object(g.jsx)(l.a,{onSubmit:function(e){e.preventDefault(),t({id:"p-1",lore:M,build:k},i)},children:Object(g.jsxs)(b.a,{fluid:!0,style:{marginBottom:"105px"},children:[Object(g.jsx)(d.a,{className:"g-2",children:Object(m.c)(O.b).filter((function(e){var t=Object(s.a)(e,2),a=t[0];t[1];return!v.has(a)})).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(g.jsx)(x,{setField:function(e){return function(e,t){S(Object(u.a)(Object(u.a)({},k),{},Object(o.a)({},e,t)))}(a,e)},section:a,options:n,isSelected:function(e){return k[a].display===e.display}},a)}))}),Object(g.jsx)(f.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(g.jsxs)(b.a,{children:[Object(g.jsxs)(f.a.Text,{children:["You are ",Object(g.jsx)("i",{onClick:function(){return E((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:Object(O.g)()})}))},children:M.name}),", the ",P("skill")," ",P("class")," ",P("charm"),Object(g.jsx)("br",{}),"who wields a ",P("weapon")," and a ",P("offhand"),Object(g.jsx)("br",{}),"and wears ",P("armor")," with ",P("headgear")," and ",P("footwear")]}),Object(g.jsxs)(f.a.Text,{children:[B.hp.current,"/",B.hp.max," \u2764",Object(g.jsx)("br",{}),B.stamina.current,"/",B.stamina.max," \ud83d\udcaa (",B.staminaPerTurn.current>=0&&"+",B.staminaPerTurn.current,")",Object(g.jsx)("br",{}),"Attack ",B.attack.current," | Defence ",B.defence.current," | Speed ",B.speed.current]}),Object(g.jsx)(j.a,{type:"submit",children:"This is me!"})]})})]})})},S=function(e){var t=e.player,a=e.onSave,n=r.a.useState([]),c=Object(s.a)(n,2),o=c[0],u=c[1],d=function(e){return Object(g.jsx)("b",{children:t.build[e].display})};return Object(g.jsxs)(l.a,{onSubmit:function(e){e.preventDefault();var t=o.map((function(e){return e[0]})),n=o.map((function(e){return e[1]}));a(t,n)},children:[Object(g.jsx)(b.a,{fluid:!0,style:{marginBottom:o.length>0?"205px":"105px"},children:Object(g.jsx)(p.a,{size:"lg",className:"mb-2",children:O.c.map((function(e){return Object(g.jsx)(j.a,{disabled:o.length>4,onClick:function(){return u((function(t){return[].concat(Object(i.a)(t),[e])}))},children:e[0].lore.name},e[0].lore.name)}))})}),o.length>0&&Object(g.jsx)(f.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{marginBottom:"100px"},children:Object(g.jsx)(b.a,{fluid:!0,children:Object(g.jsx)(p.a,{size:"sm",className:"mb-2",children:o.map((function(e,t){return Object(g.jsx)(j.a,{onClick:function(){return u((function(t){var a=!1;return t.filter((function(t){return a||t[0].lore.name!==e[0].lore.name||!(a=!0)}))}))},children:e[0].lore.name},"".concat(e[0].lore.name,"-").concat(t))}))})})}),Object(g.jsx)(f.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(g.jsxs)(b.a,{children:[Object(g.jsxs)(f.a.Text,{children:["You are ",Object(g.jsx)("i",{children:t.lore.name}),", the ",d("skill")," ",d("class")," ",d("charm"),Object(g.jsx)("br",{}),"who wields a ",d("weapon")," and a ",d("offhand"),Object(g.jsx)("br",{}),"and wears ",d("armor")," with ",d("headgear")," and ",d("footwear")]}),Object(g.jsxs)(p.a,{children:[Object(g.jsx)(j.a,{disabled:o.length<0||o.length>4,onClick:function(e){return u((function(e){return[].concat(Object(i.a)(e),[Object(O.f)()])}))},children:"Add Random"}),Object(g.jsx)(j.a,{type:"submit",disabled:o.length<1||o.length>5,children:"To Battle!"})]})]})})]})},w=a(163),A=a(89),M=a(164),E=function(e){var t=e.title,a=e.states,n=e.onClick;return Object(g.jsxs)(b.a,{fluid:!0,style:{marginBottom:"105px"},children:[Object(g.jsx)(d.a,{className:"g-2",children:Object(g.jsx)(M.a.Title,{children:t})}),a.map((function(e){return Object(g.jsx)(d.a,{className:"g-2",children:Object(g.jsx)(j.a,{size:"lg",className:"mb-2",variant:"primary",onClick:function(){n(e)},children:e},e)},e)}))]})};function P(e){function t(e,t){if((e=e||{}).mutationFunction=e.mutationFunction||t.mutationFunction,e.crossoverFunction=e.crossoverFunction||t.crossoverFunction,e.fitnessFunction=e.fitnessFunction||t.fitnessFunction,e.doesABeatBFunction=e.doesABeatBFunction||t.doesABeatBFunction,e.population=e.population||t.population,e.population.length<=0)throw Error("population must be an array and contain at least 1 phenotypes");if(e.populationSize=e.populationSize||t.populationSize,e.populationSize<=0)throw Error("populationSize must be greater than 0");return e}var a=t(e,{mutationFunction:function(e){return e},crossoverFunction:function(e,t){return[e,t]},fitnessFunction:function(e){return 0},doesABeatBFunction:void 0,population:[],populationSize:100});function n(e){return JSON.parse(JSON.stringify(e))}function r(e){return a.mutationFunction(n(e))}function c(e){e=n(e);var t=a.population[Math.floor(Math.random()*a.population.length)];return t=n(t),a.crossoverFunction(e,t)[0]}return{evolve:function(e){return e&&(a=t(e,a)),function(){for(var e=a.population.length;a.population.length<a.populationSize;){var t=Math.floor(Math.random()*e);a.population.push(r(n(a.population[Math.floor(t)])))}}(),function(){for(var e=0;e<a.population.length;e++){var t=Math.floor(Math.random()*a.population.length),n=a.population[t];a.population[t]=a.population[e],a.population[e]=n}}(),function(){for(var e,t,n=[],i=0;i<a.population.length-1;i+=2){var s=a.population[i],o=a.population[i+1];n.push(s),e=s,t=o,(a.doesABeatBFunction?a.doesABeatBFunction(e,t):a.fitnessFunction(e)>=a.fitnessFunction(t))?Math.random()<.5?n.push(r(s)):n.push(c(s)):n.push(o)}a.population=n}(),this},best:function(){var e=this.scoredPopulation();return n(e.reduce((function(e,t){return e.score>=t.score?e:t}),e[0]).phenotype)},bestScore:function(){return a.fitnessFunction(this.best())},population:function(){return n(this.config().population)},scoredPopulation:function(){return this.population().map((function(e){return{phenotype:n(e),score:a.fitnessFunction(e)}}))},config:function(){return n(a)},clone:function(e){return P(t(e,t(this.config(),a)))}}}var B=a(51),T=a.n(B),D=(a(99),a(28)),C={playerSeed:"Miau",weights:{monster:.7,player:.125,turn:.1,stamina:.075},debug:!1};function F(e,t,a){for(var n=Object(u.a)(Object(u.a)({},C),a),r=Object(D.c)(t),c=new T.a(n.playerSeed),i={mutationFunction:function(t){var a=Object(O.e)(t),n=a.enemies.reduce((function(e,t){return e+t.hp.current}),0);if(0===a.player.hp.current||0===n)return t;for(var r=t;6===c.d6()||(null!==(i=null===(o=Object(O.e)(r).enemies[Object(O.e)(r).target])||void 0===o?void 0:o.hp)&&void 0!==i?i:0)<=0;){var i,o;r=Object(h.i)(r,c.natural({min:0,max:Object(O.e)(r).enemies.length-1}))}var u=Object(O.e)(r),l=Object(h.f)(e.player,u.inventory),b=l.map((function(e,t){return[e,t]})).filter((function(e){var t=Object(s.a)(e,2),a=t[0];t[1];return a.stamina>u.player.stamina.current})).map((function(e){var t=Object(s.a)(e,2);t[0];return t[1]}));return r=Object(h.b)(r,c.natural({min:0,max:l.length-1,exclude:b}))},fitnessFunction:function(e){var t=Object(O.e)(e),a=t.enemies.reduce((function(e,t){return e+t.hp.current}),0),r=t.player.hp.current,c=t.player.stamina.current,i=e.states[0].player.hp.max,s=e.states[0].player.stamina.max,o=e.states[0].enemies.reduce((function(e,t){return e+t.hp.current}),0),u=(o-a)/o,l=r/i,b=(e.turns-e.states.length)/e.turns,d=c/s,f=u*n.weights.monster+l*n.weights.player+b*n.weights.turn+d*n.weights.stamina;return n.debug&&console.log("MH: ".concat(a," | PH: ").concat(r," | TR: ").concat(e.states.length,"\nFitness: ").concat(f," | MF: ").concat(u," | PF: ").concat(l," | SF: ").concat(d," | TF: ").concat(b,"\nWeights: ").concat(JSON.stringify(n.weights))),f},population:r.map((function(t){return e})),populationSize:t},o=null!==a&&void 0!==a&&a.turns?null===a||void 0===a?void 0:a.turns:e.turns,l=new P(i),b=0;b<o;b++)l=l.evolve();return l.scoredPopulation()}var L=a(94),N=a(162),R=a(158),H=a(104),I=function(e){var t,a=e.enemy,n=e.enemyStats,r=e.isSelected,c=e.onSelect,i=e.latestAttack,o=e.canAct,u=e.hotkey;return Object(g.jsx)(M.a,{bg:r?"info":void 0,children:Object(g.jsxs)(M.a.Body,{children:[Object(g.jsxs)(M.a.Title,{children:[a.lore.name," ",n.hp.current>0?"":Object(g.jsx)("b",{children:"\ud83d\udc80DEAD\ud83d\udc80"})]}),Object(g.jsxs)(M.a.Text,{children:["\u2764:",n.hp.current," \ud83c\udff9:",n.distance+1]}),Object(g.jsxs)(M.a.Text,{children:["Attack ",n.attack.current,Object(g.jsx)("br",{}),"Defence ",n.defence.current,Object(g.jsx)("br",{}),"Speed ",n.speed.current]}),n.status.bleed.turns>0&&" ".concat(n.status.bleed.turns," \ud83e\ude78"),i&&Object(g.jsxs)(M.a.Text,{children:["Latest attack: ",i]}),Object(g.jsxs)(M.a.Text,{children:["Next attack prediction:",Object(g.jsx)("br",{}),(t=a.rolls[n.distance].map((function(e){return a.effects[e]})),Object(y.a)(t).countBy((function(e){return e.display})).toArray().map((function(e,a){var n=Object(s.a)(e,2),r=n[0],c=n[1],i=t.find((function(e){return e.display===r})),o=i.range,u=i.priority,l=i.tooltip;return Object(g.jsx)(R.a,{placement:"right",delay:{show:100,hide:250},overlay:Object(g.jsxs)(H.a,{children:[Object(g.jsx)(H.a.Header,{as:"h3",children:r}),Object(g.jsxs)(H.a.Body,{children:[l,Object(g.jsx)("br",{}),"\u23f1:",u,Object(g.jsx)("br",{}),"\ud83c\udff9:",5===o.length?"Any":0===o.length?"None":o.map((function(e){return e+1})).join(", ")]})]}),children:Object(g.jsxs)(g.Fragment,{children:["[",(c/t.length*100).toFixed(2),"%] ",r,Object(g.jsx)("br",{},a)]})},a)}))),Object(g.jsx)("br",{})]}),o&&Object(g.jsxs)(j.a,{disabled:r,onClick:c,children:["[",Object(g.jsx)("i",{children:u.toUpperCase()}),"] Select"]})]})})},z=a(157),W=a(165),G=function(e){var t=e.selectedButtons,a=e.player,n=e.playerStats,r=e.inventoryStats,c=e.onClickEffect,o=e.canAct,u=e.lastAction,l=e.disabledSkills,b=e.setDisabledSkills,d=Object(m.c)(a.build).map((function(e){var t,a,n=Object(s.a)(e,2),r=n[0],c=n[1];return[r,c,[].concat(Object(i.a)(null!==(t=c.bot)&&void 0!==t?t:[]),Object(i.a)(null!==(a=c.eot)&&void 0!==a?a:[]))]})),f=d.reduce((function(e,t){var a=Object(s.a)(t,3);a[0],a[1];return a[2].length>0}),!1);return Object(g.jsxs)(M.a,{children:[Object(g.jsxs)(M.a.Body,{children:[Object(g.jsxs)(M.a.Title,{children:[a.lore.name,n.hp.current>0?"":Object(g.jsx)("b",{children:" \ud83d\udc80DEAD\ud83d\udc80 "})]}),Object(g.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:a.build.class.display}),Object(g.jsxs)(M.a.Text,{children:["Attack ",n.attack.current," | Defence ",n.defence.current," | Speed ",n.speed.current]}),Object(g.jsxs)(M.a.Text,{children:[n.hp.current,"/",n.hp.max," \u2764"]}),Object(g.jsxs)(M.a.Text,{children:[n.stamina.current,"/",n.stamina.max," \ud83d\udcaa (",n.staminaPerTurn.current>=0&&"+",n.staminaPerTurn.current,")"]}),n.status.bleed.turns>0&&Object(g.jsxs)(M.a.Text,{children:["` $",n.status.bleed.turns," \ud83e\ude78`"]}),u&&Object(g.jsxs)(M.a.Text,{children:["Last action: ",u]})]}),o&&f&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("b",{children:"Passives"}),Object(g.jsx)(p.a,{children:d.map((function(e,t){var a=Object(s.a)(e,3),n=a[0],r=a[1];return a[2].length>0&&Object(g.jsx)(R.a,{placement:"right",delay:{show:100,hide:250},overlay:Object(g.jsxs)(H.a,{children:[Object(g.jsx)(H.a.Header,{as:"h3",children:r.display}),Object(g.jsx)(H.a.Body,{children:r.tooltip})]}),children:Object(g.jsx)(z.a,{checked:!Object(y.b)(l).has(n),value:n,id:"passive-skill-".concat(n),type:"checkbox",variant:"outline-primary",onChange:function(e){return b(e.currentTarget.checked?Object(y.b)(l).delete(n).toArray():Object(y.b)(l).add(n).toArray())},children:r.display})},t)}))})]}),o&&Object(g.jsx)(M.a.Body,{children:Object(g.jsx)(W.a,{direction:"horizontal",gap:2,children:Object(h.f)(a,r).map((function(e,a){return Object(g.jsx)(R.a,{placement:"top",delay:{show:100,hide:250},overlay:Object(g.jsxs)(H.a,{children:[Object(g.jsx)(H.a.Header,{as:"h3",children:e.display}),Object(g.jsx)(H.a.Body,{children:e.tooltip})]}),children:Object(g.jsxs)("div",{children:[Object(g.jsxs)(j.a,{active:t.has(e.display),disabled:n.stamina.current<e.stamina,onClick:function(e){return c(a)},children:["[",Object(g.jsx)("i",{children:a+1}),"] ",Object(g.jsx)("b",{children:e.display})]}),Object(g.jsx)("br",{}),Object(g.jsxs)(M.a.Text,{children:["\ud83d\udcaa:",e.stamina," \u23f1:",Object(D.a)(e.priority-n.speed.current,0,4),Object(g.jsx)("br",{}),"\ud83c\udff9:",5===e.range.length?"Any":e.range.map((function(e){return e+1})).join(", ")]})]})},e.display)}))})})]})};var J=a(100),U=a.n(J),K=["q","w","e","r","t","y"],V=function(e){var t,a=e.handlePlayerEffect,r=e.setSelected,c=e.setDisabledSkills,o=e.game,u=e.solveGame,l=e.timeTravel,f=e.hint,m=e.onMenu,v=o.player,x=o.enemies,k=Object(O.e)(o),S=k.player,w=k.enemies,A=k.target,E=k.lastAttacks,P=k.disabledSkills,B=k.inventory,T=Object(n.useState)(!1),D=Object(s.a)(T,2),C=D[0],F=D[1],R=function(){return F(!1)},H=Object(h.f)(v,B),z=w.reduce((function(e,t){return t.hp.current+e}),0),W=S.hp.current>0,J=z>0,V=o.states.length<o.turns,Y=W&&J&&V,q=function(e){var t=Object(n.useState)(new Set),a=Object(s.a)(t,2),r=a[0],c=a[1],o=function(e){var t=e.key;c((function(e){return new Set([].concat(Object(i.a)(e),[t]))}))},u=Object(n.useCallback)((function(t){var a=t.key;c((function(e){return new Set(Object(i.a)(e).filter((function(e){return e!==a})))})),e(a)}),[e]);return Object(n.useEffect)((function(){return window.addEventListener("keydown",o),window.addEventListener("keyup",u),function(){window.removeEventListener("keydown",o),window.removeEventListener("keyup",u)}}),[u]),r}((function(e){if(Y){var t=parseInt(e);if(t>0&&t<=H.length){if(!(H[t-1].stamina<=S.stamina.current))return;a(t-1)}"Escape"===e&&m(),"h"===e&&f(100),"l"===e&&F(!C),"s"===e&&Z(),"a"===e&&o.states.length>1&&l&&l.undo(),"d"===e&&l&&null!=l.redo&&l.redo(),e===K[0]&&x.length>0&&r(0),e===K[1]&&x.length>1&&r(1),e===K[2]&&x.length>2&&r(2),e===K[3]&&x.length>3&&r(3),e===K[4]&&x.length>4&&r(4)}})),_=Object(y.b)(Object(i.a)(q).flatMap((function(e){var t=parseInt(e);return t>0&&t<=H.length?[H[t-1].display]:[]}))),Z=Object(n.useCallback)((function(){var e=new Blob([JSON.stringify(o)],{type:"application/json;charset=utf-8"});U()(e,"buildmancer-".concat(Date.now(),".json"))}),[o]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(b.a,{fluid:!0,children:Object(g.jsx)(d.a,{className:"justify-content-center align-items-flex-start",children:Object(g.jsxs)(L.a,{sm:12,md:8,children:[Object(g.jsxs)(j.a,{onClick:m,children:["[",Object(g.jsx)("i",{children:"Esc"}),"] MAIN MENU"]}),Object(g.jsxs)(M.a.Title,{children:[W?J?"":Object(g.jsx)("b",{children:"\ud83c\udf89\ud83c\udf89VICTORY\ud83c\udf89\ud83c\udf89"}):Object(g.jsx)("b",{children:"\u274c\u274cDEFEAT\u274c\u274c"})," Turn ",o.states.length," out of ",o.turns]}),Object(g.jsx)(G,{player:v,playerStats:S,inventoryStats:B,disabledSkills:P,setDisabledSkills:c,onClickEffect:function(e){return a(e)},selectedButtons:_,lastAction:null!==(t=E.filter((function(e){return"Player"===e.origin&&"MAIN"===e.phase})).map((function(e){return"".concat(e.display)})).join(" -> "))&&void 0!==t?t:void 0,canAct:Y}),null!=l&&Object(g.jsx)(d.a,{children:Object(g.jsxs)(p.a,{children:[o.states.length>1&&Object(g.jsxs)(j.a,{onClick:function(e){return l.undo()},children:["[",Object(g.jsx)("i",{children:"A"}),"] Undo \u21a9"]}),l.redo&&Object(g.jsxs)(j.a,{onClick:function(e){return l.redo()},children:["[",Object(g.jsx)("i",{children:"D"}),"] Redo \u21aa"]})]})}),Object(g.jsx)(d.a,{children:Object(g.jsx)(p.a,{children:Object(g.jsxs)(j.a,{onClick:function(e){return f(100)},children:[Object(g.jsx)("i",{children:"[H]"})," Hint"]})})}),Object(g.jsx)(d.a,{children:Object(y.a)(x).zip(Object(y.a)(w)).map((function(e,t){var a,n=Object(s.a)(e,2),c=n[0],i=n[1];return Object(g.jsx)(L.a,{xs:6,md:4,children:Object(g.jsx)(I,{enemyStats:i,enemy:c,canAct:Y,latestAttack:null!==(a=Object(y.a)(E).filter((function(e){var a=e.origin,n=e.phase;return a===t&&"MAIN"===n})).map((function(e){return"".concat(e.display)})).join(" -> "))&&void 0!==a?a:void 0,isSelected:t===A,onSelect:function(){return r(t)},hotkey:K[t]},t)},t)}))}),Object(g.jsx)(M.a.Title,{children:"Debug"}),Object(g.jsx)(d.a,{children:Object(g.jsxs)(p.a,{children:[Object(g.jsxs)(j.a,{onClick:function(){return F(!0)},children:["[",Object(g.jsx)("i",{children:"L"}),"] Log \ud83d\uddd2"]}),Object(g.jsxs)(j.a,{onClick:Z,children:["[",Object(g.jsx)("i",{children:"S"}),"] Dump to file \ud83d\udcc2"]})]})}),Object(g.jsx)(M.a.Title,{children:"Cheats"}),Object(g.jsx)(d.a,{children:Object(g.jsxs)(p.a,{children:[Object(g.jsx)(j.a,{onClick:function(e){return u(100)},children:"Solve \u231b"}),Object(g.jsx)(j.a,{onClick:function(e){return u(1e3)},children:"Solve thoroughly \u231b\u231b\u231b"})]})})]})})}),Object(g.jsxs)(N.a,{show:C,onHide:R,scrollable:!0,centered:!0,children:[Object(g.jsx)(N.a.Header,{closeButton:!0,children:Object(g.jsx)(N.a.Title,{children:"Game Log"})}),Object(g.jsx)(N.a.Body,{children:o.states.map((function(e,t){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("b",{children:["Turn ",t]}),Object(g.jsx)("br",{}),"Player: ",JSON.stringify(e.player,null,2),Object(g.jsx)("br",{}),"Enemies: ",JSON.stringify(e.enemies,null,2),Object(g.jsx)("br",{}),"Target [",e.target,"]",Object(g.jsx)("br",{}),"Bot?: ",JSON.stringify(e.bot,null,2),Object(g.jsx)("br",{}),"Eot?: ",JSON.stringify(e.eot,null,2),Object(g.jsx)("br",{}),"Actions:",Object(g.jsx)("br",{}),e.lastAttacks.map((function(e,t){return Object(g.jsxs)("div",{children:["--\x3e"," ",JSON.stringify(e,null,2),Object(g.jsx)("br",{})]},t)}))]},t)}))}),Object(g.jsx)(N.a.Footer,{children:Object(g.jsx)(j.a,{variant:"primary",onClick:R,children:"Close"})})]})]})},Y=function(e){var t=e.play,a=e.timeTravel,n=e.onGameEnd,c=e.onMenu,o=r.a.useState(t),l=Object(s.a)(o,2),b=l[0],d=l[1],f=r.a.useState([]),j=Object(s.a)(f,2),p=j[0],m=j[1];r.a.useEffect((function(){d(t)}),[t]),r.a.useEffect((function(){var e=Object(h.e)(b);"playing"!==e&&n(e,b)}),[b]);var v=a?{redo:p.length>0?function(){var e=Object(i.a)(p),t=e.pop();m(e),d(Object(u.a)(Object(u.a)({},b),{},{states:[].concat(Object(i.a)(b.states),[t])}))}:void 0,undo:function(){m([].concat(Object(i.a)(p),[Object(O.e)(b)])),d(Object(u.a)(Object(u.a)({},b),{},{states:[b.states[0]].concat(Object(i.a)(b.states.slice(1,-1)))}))}}:void 0;return Object(g.jsx)(V,{game:b,timeTravel:v,onMenu:c,setSelected:function(e){m([]),d(Object(h.i)(b,e))},setDisabledSkills:function(e){m([]),d(Object(h.h)(b,e))},handlePlayerEffect:function(e){m([]),d(Object(h.b)(b,e))},solveGame:function(e){return d(Object(y.a)(F(b,e,{turns:b.turns-b.states.length})).maxBy((function(e){return e.score})).phenotype)},hint:function(e){return d(Object(u.a)(Object(u.a)({},b),{},{states:[].concat(Object(i.a)(b.states),[Object(y.a)(F(b,e,{turns:b.turns-b.states.length})).maxBy((function(e){return e.score})).phenotype.states[b.states.length]])}))}})},q=a(161),_=a(5),Z=_.a.object({player:_.a.object({id:_.a.string(),lore:_.a.object({name:_.a.string(),age:_.a.number()}),build:_.a.object({debug:_.a.object({display:_.a.string(),effects:_.a.array(_.a.any())}),basic:_.a.object({display:_.a.string(),effects:_.a.array(_.a.any())}),class:_.a.object({display:_.a.string(),passives:_.a.array(_.a.string()),effects:_.a.array(_.a.any())}),skill:_.a.object({display:_.a.string(),effects:_.a.array(_.a.any())}),armor:_.a.object({display:_.a.string(),passives:_.a.array(_.a.string())}),weapon:_.a.object({display:_.a.string(),effects:_.a.array(_.a.any())}),offhand:_.a.object({display:_.a.string(),passives:_.a.array(_.a.string()),effects:_.a.array(_.a.any())}),footwear:_.a.object({display:_.a.string(),tooltip:_.a.string(),passives:_.a.array(_.a.string()),eot:_.a.array(_.a.any())}),headgear:_.a.object({display:_.a.string(),passives:_.a.array(_.a.string()),tooltip:_.a.string(),effects:_.a.array(_.a.any())}),charm:_.a.object({display:_.a.string(),passives:_.a.array(_.a.string()),tooltip:_.a.string()}),consumable:_.a.object({display:_.a.string()})})}),enemies:_.a.array(_.a.object({lore:_.a.object({name:_.a.string()}),effects:_.a.array(_.a.any()),rolls:_.a.array(_.a.array(_.a.number()))})),states:_.a.array(_.a.object({player:_.a.object({hp:_.a.object({current:_.a.number(),max:_.a.number()}),stamina:_.a.object({current:_.a.number(),max:_.a.number()}),staminaPerTurn:_.a.object({current:_.a.number(),max:_.a.number()}),speed:_.a.object({current:_.a.number(),max:_.a.number()}),attack:_.a.object({current:_.a.number(),max:_.a.number()}),defence:_.a.object({current:_.a.number(),max:_.a.number()}),status:_.a.object({dodge:_.a.object({active:_.a.boolean()}),armor:_.a.object({amount:_.a.number()}),bleed:_.a.object({turns:_.a.number()}),stun:_.a.object({active:_.a.boolean()})})}),enemies:_.a.array(_.a.object({hp:_.a.object({current:_.a.number(),max:_.a.number()}),distance:_.a.number(),speed:_.a.object({current:_.a.number(),max:_.a.number()}),attack:_.a.object({current:_.a.number(),max:_.a.number()}),defence:_.a.object({current:_.a.number(),max:_.a.number()}),status:_.a.object({dodge:_.a.object({active:_.a.boolean()}),armor:_.a.object({amount:_.a.number()}),bleed:_.a.object({turns:_.a.number()}),stun:_.a.object({active:_.a.boolean()})})})),target:_.a.number(),lastAttacks:_.a.array(_.a.unknown()),disabledSkills:_.a.array(_.a.unknown())})),rng:_.a.array(_.a.array(_.a.number())),turns:_.a.number(),id:_.a.string(),seed:_.a.number()}),Q=function(e){var t=e.onLoad,a=e.onMenu,n=r.a.useState(),c=Object(s.a)(n,2),i=c[0],o=c[1],u=function(e){try{var a=JSON.parse(e);try{Z.parse(a),t(a)}catch(n){o("Failed to Load - Invalid Data")}}catch(n){o("Failed to Load - Bad Data")}};return Object(g.jsx)(l.a,{onSubmit:function(e){var t,a,n,r,c,i;if(e.preventDefault(),null!=(null===(t=e.target)||void 0===t||null===(a=t.fileData)||void 0===a?void 0:a.files[0])){var s=new FileReader;s.onloadend=function(e){var t,a=null===(t=e.target)||void 0===t?void 0:t.result;null!=a?u(a):o("Failed to read file")},s.readAsText(e.target.fileData.files[0])}else null!=(null===(n=e.target)||void 0===n||null===(r=n.rawData)||void 0===r?void 0:r.value)&&""!=(null===(c=e.target)||void 0===c||null===(i=c.rawData)||void 0===i?void 0:i.value)&&u(e.target.rawData.value)},children:Object(g.jsxs)(b.a,{fluid:!0,children:[Object(g.jsxs)(L.a,{children:[Object(g.jsx)(d.a,{children:i&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(q.a,{variant:"danger",children:i}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{})]})}),Object(g.jsx)(d.a,{children:Object(g.jsxs)(l.a.Group,{children:[Object(g.jsx)(l.a.Label,{children:"Load File"}),Object(g.jsx)(l.a.Control,{type:"file",name:"fileData",accept:".json"}),Object(g.jsx)(l.a.Text,{muted:!0,children:"Select the file to load"})]})}),Object(g.jsx)("br",{}),Object(g.jsx)(d.a,{children:Object(g.jsxs)(l.a.Group,{children:[Object(g.jsx)(l.a.Label,{children:"Load"}),Object(g.jsx)(l.a.Control,{name:"rawData",as:"textarea",rows:3,placeholder:"Save Data"}),Object(g.jsx)(l.a.Text,{muted:!0,children:"Paste the text of your savegame here"})]})}),Object(g.jsx)("br",{}),Object(g.jsx)(j.a,{variant:"primary",type:"submit",children:"Load"})]}),Object(g.jsx)("br",{}),Object(g.jsx)(j.a,{onClick:a,children:"MAIN MENU"})]})})};var X=function(){var e=Object(w.a)(A.a,{devTools:!0}),t=Object(s.a)(e,2),a=t[0],n=t[1],r=a.event,c=function(){n("MENU")};switch(!0){case a.matches("main"):return Object(g.jsx)(E,{title:"Main Menu",states:Object.keys(A.a.states.main.on),onClick:n});case a.matches({quick:"play"}):var o=Object(O.h)(),u=Object(O.f)();return Object(g.jsx)(Y,{play:Object(h.c)(o[0],o[1],[u[0]],[u[1]],50,a.context.singleContext.seed),onMenu:c,timeTravel:!0,onGameEnd:function(e,t){n("win"===e?"WIN":"LOSE",{result:e,game:t})}});case a.matches({quick:"win"}):case a.matches({quick:"lose"}):return Object(g.jsx)(E,{title:"".concat(r.result," in ").concat(r.game.states.length-1," turns"),states:["MENU"],onClick:n});case a.matches({single:"player"}):return Object(g.jsx)(k,{onSave:function(e,t){n("PLAYER",{player:[e,t]})}});case a.matches({single:"encounter"}):return Object(g.jsx)(S,{player:r.player[0],onSave:function(e,t){n("ENCOUNTER",{encounter:[e,t],player:r.player})}});case a.matches({single:"play"}):return Object(g.jsx)(Y,{play:Object(h.c)(r.player[0],r.player[1],r.encounter[0],r.encounter[1],50,a.context.singleContext.seed),onMenu:c,timeTravel:!0,onGameEnd:function(e,t){n("win"===e?"WIN":"LOSE",{result:e,game:t})}});case a.matches({single:"win"}):case a.matches({single:"lose"}):return Object(g.jsx)(E,{title:"".concat(r.result," in ").concat(r.game.states.length-1," turns"),states:["MENU"],onClick:n});case a.matches({arcade:"player"}):var l=Object(O.f)();return Object(g.jsx)(k,{onSave:function(e,t){n("PLAYER",{game:Object(h.c)(e,t,[l[0]],[l[1]],50,a.context.survivalContext.seed)})}});case a.matches({arcade:"play"}):return Object(g.jsx)(Y,{play:r.game,timeTravel:!1,onMenu:c,onGameEnd:function(e,t){var r=[[],[]];if(a.context.arcadeContext.victories>=0){var c=Object(O.f)();r=[[].concat(Object(i.a)(r[0]),[c[0]]),[].concat(Object(i.a)(r[1]),[c[1]])]}if(a.context.arcadeContext.victories>=2){var s=Object(O.f)();r=[[].concat(Object(i.a)(r[0]),[s[0]]),[].concat(Object(i.a)(r[1]),[s[1]])]}if(a.context.arcadeContext.victories>=5){var o=Object(O.f)();r=[[].concat(Object(i.a)(r[0]),[o[0]]),[].concat(Object(i.a)(r[1]),[o[1]])]}var u=t.states[0];n("win"===e?"WIN":"LOSE",{result:e,game:Object(h.d)(t.player,u.player,r[0],r[1],{},50,a.context.survivalContext.seed)})}});case a.matches({arcade:"victory"}):return Object(g.jsx)(E,{title:"\ud83c\udf89\ud83c\udf89VICTORY!\ud83c\udf89\ud83c\udf89 Final score: ".concat(a.context.arcadeContext.score),states:["MENU"],onClick:n});case a.matches({arcade:"defeat"}):return Object(g.jsx)(E,{title:"Failed after ".concat(a.context.arcadeContext.victories," victories"),states:["MENU"],onClick:n});case a.matches({survival:"player"}):var b=Object(O.f)();return Object(g.jsx)(k,{onSave:function(e,t){n("PLAYER",{game:Object(h.c)(e,t,[b[0]],[b[1]],50,a.context.survivalContext.seed)})}});case a.matches({survival:"play"}):return Object(g.jsx)(Y,{play:r.game,onMenu:c,timeTravel:!1,onGameEnd:function(e,t){var c=Object(O.f)(),i=t.states[r.game.states.length-1];n("win"===e?"WIN":"LOSE",{result:e,game:Object(h.d)(t.player,i.player,[c[0]],[c[1]],i.inventory,50,a.context.survivalContext.seed)})}});case a.matches({survival:"defeat"}):return Object(g.jsx)(E,{title:"Completed after ".concat(a.context.survivalContext.victories," victories"),states:["MENU"],onClick:n});case a.matches({load:"load"}):return Object(g.jsx)(Q,{onLoad:function(e){return n("LOAD",{game:e})},onMenu:c});case a.matches({load:"play"}):return Object(g.jsx)(Y,{play:r.game,onMenu:c,timeTravel:!0,onGameEnd:function(e,t){n("win"===e?"WIN":"LOSE",{result:e,game:t})}});case a.matches({load:"win"}):case a.matches({load:"lose"}):return Object(g.jsx)(E,{title:"".concat(r.result," in ").concat(r.game.states.length-1," turns"),states:["MENU"],onClick:n});default:return Object(g.jsx)(g.Fragment,{children:JSON.stringify(a.value)})}},$=a(103),ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,166)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))},te=document.getElementById("root");Object(c.createRoot)(te).render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(X,{})})),$.a(),ee()},26:function(e,t,a){"use strict";a.d(t,"f",(function(){return x})),a.d(t,"a",(function(){return k})),a.d(t,"c",(function(){return S})),a.d(t,"d",(function(){return w})),a.d(t,"b",(function(){return P})),a.d(t,"i",(function(){return B})),a.d(t,"h",(function(){return T})),a.d(t,"e",(function(){return D})),a.d(t,"g",(function(){return C}));var n=a(0),r=a(8),c=a(10),i=a(6),s=a(24),o=a(12),u=a(51),l=a(93),b=a(22),d=a(28);var f=function(e){return function(t){return function(a,n,r){return e(t)(a,n,r)}}},j=function(e,t,a){var r=a.target,c=a.turns;return Object(d.b)("Player"===r?h.changeStatPlayer(t,(function(e){var t=e.hp;return{hp:Object(n.a)(Object(n.a)({},t),{},{current:Math.max(0,t.current-1)})}})):h.changeStatMonster(t,t.target,(function(e){var t=e.hp;return{hp:Object(n.a)(Object(n.a)({},t),{},{current:Math.max(0,t.current-1)})}})),(function(t){return c>0?h.addBotEffect(t,"Player",{display:"Poison ".concat("Player"===r?"Player":e.enemies[r].lore.name+"["+(r+1),' + "]"'),tooltip:"",range:o.a,priority:4,effects:[Object(i.b)(["Reduce:PoisonBOT",{target:r,turns:c-1}])]}):t}))},p={"Debug:GGWP":f((function(){return function(e,t,a){return[t,Object(n.a)(Object(n.a)({},a),{},{enemies:a.enemies.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{hp:Object(n.a)(Object(n.a)({},e.hp),{},{current:0})})}))})]}})),"Debug:Sudoku":f((function(){return function(e,t,a){return[t,Object(n.a)(Object(n.a)({},a),{},{player:Object(n.a)(Object(n.a)({},a.player),{},{hp:Object(n.a)(Object(n.a)({},a.player.hp),{},{current:0})})})]}})),"Utility:Cleanup":f((function(){return function(e,t,a){return[t,Object(d.b)(h.changeStatusPlayer(a,(function(e){return Object(n.a)(Object(n.a)({},e),{},{armor:{amount:0},bleed:{turns:Math.max(e.bleed.turns-1,0)},dodge:{active:!1},stun:{active:!1}})})),(function(e){return e.enemies.reduce((function(e,t,a){return h.changeStatusMonster(e,a,(function(e){return Object(n.a)(Object(n.a)({},e),{},{armor:{amount:0},bleed:{turns:Math.max(e.bleed.turns-1,0)},dodge:{active:!1},stun:{active:!1}})}))}),a)}))]}}))},m=Object(n.a)(Object(n.a)({},p),{},{"Basic:Rest":f((function(){return function(e,t,a){return[t,a]}})),"Basic:Move":f((function(e){var t=e.amount;return function(e,a,n){return[a,h.changeDistance(n,n.target,t)]}})),"Basic:Attack":f((function(e){var t=e.amount;return function(e,a,n){return[a,h.attackMonster(n,n.target,t)]}})),"Basic:Stamina":f((function(e){var t=e.amount;return function(e,a,n){return[a,h.modifyPlayerStamina(n,t)]}})),"Basic:HP":f((function(e){var t=e.amount;return function(e,a,r){return[a,h.changeStatPlayer(r,(function(e){var a=e.hp;return{hp:Object(n.a)(Object(n.a)({},a),{},{current:Object(d.a)(a.current+t,0,a.max)})}}))]}})),"Effect:Dodge":f((function(){return function(e,t,a){return[t,"Player"===e?h.changeStatusPlayer(a,(function(e){return Object(n.a)(Object(n.a)({},e),{},{dodge:{active:!0}})})):h.changeStatusMonster(a,a.target,(function(e){return Object(n.a)(Object(n.a)({},e),{},{dodge:{active:!0}})}))]}})),"Effect:Armor":f((function(e){var t=e.amount;return function(e,a,r){return[a,"Player"===e?h.changeStatusPlayer(r,(function(e){return Object(n.a)(Object(n.a)({},e),{},{armor:{amount:t}})})):h.changeStatusMonster(r,r.target,(function(e){return Object(n.a)(Object(n.a)({},e),{},{armor:{amount:t}})}))]}})),"Effect:Stun":f((function(){return function(e,t,a){return[t,"Player"===e?h.changeStatusMonster(a,a.target,(function(e){return Object(n.a)(Object(n.a)({},e),{},{stun:{active:!0}})})):h.changeStatusPlayer(a,(function(e){return Object(n.a)(Object(n.a)({},e),{},{stun:{active:!0}})}))]}})),"Effect:Bleed":f((function(e){var t=e.target,a=e.turns;return function(e,r,c){return[r,"Player"!==t?h.changeStatusPlayer(c,(function(e){return Object(n.a)(Object(n.a)({},e),{},{bleed:{turns:a}})})):h.changeStatusMonster(c,c.target,(function(e){return Object(n.a)(Object(n.a)({},e),{},{bleed:{turns:a}})}))]}})),"Effect:Poison":f((function(e){var t=e.target,a=e.turns;return function(e,n,r){return[n,Object(d.b)("Player"===t?"Player":r.target,(function(e){return j(n,r,{target:e,turns:a})}))]}})),"Reduce:PoisonBOT":f((function(e){return function(t,a,n){return[a,j(a,n,e)]}})),"Effect:Attack":f((function(e){var t=e.target,a=e.amount;return function(e,r,c){return[r,"Player"===t?h.changeStatPlayer(c,(function(e){var t=e.attack;return{attack:Object(n.a)(Object(n.a)({},t),{},{current:Math.min(t.current+a,t.max)})}})):h.changeStatMonster(c,c.target,(function(e){var t=e.attack;return{attack:Object(n.a)(Object(n.a)({},t),{},{current:Math.min(t.current+a,t.max)})}}))]}})),"Effect:Speed":f((function(e){var t=e.target,a=e.amount;return function(e,r,c){return[r,"Player"===t?h.changeStatPlayer(c,(function(e){var t=e.speed;return{speed:Object(n.a)(Object(n.a)({},t),{},{current:Math.min(t.current+a,t.max)})}})):h.changeStatMonster(c,c.target,(function(e){var t=e.speed;return{speed:Object(n.a)(Object(n.a)({},t),{},{current:Math.min(t.current+a,t.max)})}}))]}})),"Effect:Defence":f((function(e){var t=e.target,a=e.amount;return function(e,r,c){return[r,"Player"===t?h.changeStatPlayer(c,(function(e){var t=e.defence;return{defence:Object(n.a)(Object(n.a)({},t),{},{current:Math.min(t.current+a,t.max)})}})):h.changeStatMonster(c,c.target,(function(e){var t=e.defence;return{defence:Object(n.a)(Object(n.a)({},t),{},{current:Math.min(t.current+a,t.max)})}}))]}})),"Monster:Attack":f((function(e){var t=e.amount;return function(e,a,n){return[a,h.attackPlayer(n,t)]}})),"Monster:Summon":f((function(e){var t=e.enemy;return function(e,a,n){return h.addEnemy(a,n,o.c[t][0],o.c[t][1])}})),"Monster:Dead":f((function(){return function(e,t,a){return[t,a]}})),"Monster:Move":f((function(){return function(e,t,a){return[t,h.changeDistance(a,e,-2)]}})),"Inventory:Consume":f((function(e){var t=e.target;return function(e,a,r){var c,i;return[a,Object(n.a)(Object(n.a)({},r),{},{inventory:Object(n.a)(Object(n.a)({},r.inventory),{},Object(b.a)({},t,{used:(null!==(c=null===(i=r.inventory[t])||void 0===i?void 0:i.used)&&void 0!==c?c:0)+1}))})]}})),"BootsOfFlight:EOT":f((function(){return function(e,t,a){return[t,a.enemies.reduce((function(e,t,a){return h.changeDistance(e,a,2)}),a)]}})),"Wand:MagicBolt":f((function(){return function(e,t,a){for(var n=a;n.player.stamina.current;)n=h.modifyPlayerStamina(n,-2),n=h.attackMonster(n,a.target,1);return[t,n]}}))}),O=function(e,t,a){return e.map((function(e,r){return r===t?Object(n.a)(Object(n.a)({},e),a(e)):e}))},y=function(e,t){return Object(n.a)(Object(n.a)({},e),{},{player:Object(n.a)(Object(n.a)({},e.player),t(e.player))})},h={attackPlayer:function(e,t){var a=e.player.status.armor.amount,r=t+e.player.attack.current,c=Math.max(r-e.player.defence.current,0),i=Math.max(c-a,0),s=a-(c-i),o=i+(e.player.status.bleed.turns>0?1:0);return y(e,(function(e){var t=e.hp,a=e.status;return{hp:{max:t.max,current:Object(d.a)(t.current-o,0,t.max)},status:Object(n.a)(Object(n.a)({},a),{},{armor:{amount:a.armor.amount-s}})}}))},attackMonster:function(e,t,a){var r=e.enemies[t],c=r.status.armor.amount,i=a+e.player.attack.current,s=Math.max(i-r.defence.current,0),o=Math.max(s-c,0),u=c-(s-o),l=o+(r.status.bleed.turns>0?1:0);return Object(n.a)(Object(n.a)({},e),{},{enemies:O(e.enemies,t,(function(e){var t=e.status,a=e.hp;return{hp:{max:a.max,current:Object(d.a)(a.current-l,0,a.max)},status:Object(n.a)(Object(n.a)({},t),{},{armor:{amount:u}})}}))})},changeStatPlayer:y,changeStatMonster:function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},{enemies:O(e.enemies,t,a)})},changeStatusPlayer:function(e,t){return Object(n.a)(Object(n.a)({},e),{},{player:Object(n.a)(Object(n.a)({},e.player),{},{status:t(e.player.status)})})},changeStatusMonster:function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},{enemies:O(e.enemies,t,(function(e){var t=e.status;return{status:a(t)}}))})},changeDistance:function(e,t,a){return Object(n.a)(Object(n.a)({},e),{},{enemies:O(e.enemies,t,(function(e){var t=e.distance;return{distance:Object(d.a)(t+a,0,4)}}))})},removeMonster:function(e,t,a){return[Object(n.a)(Object(n.a)({},e),{},{enemies:e.enemies.filter((function(e,t){return t===a}))}),Object(n.a)(Object(n.a)({},t),{},{target:0,enemies:t.enemies.filter((function(e,t){return t===a}))})]},modifyPlayerStamina:function(e,t){return function(e,t,a){var r=e.player;return r[t]=Object(n.a)(Object(n.a)({},r[t]),a(r[t])),Object(n.a)(Object(n.a)({},e),{},{player:r})}(e,"stamina",(function(e){return{current:Object(d.a)(e.current+t,0,e.max)}}))},addEotEffect:function(e,t,a){var r;return Object(n.a)(Object(n.a)({},e),{},{eot:[].concat(Object(c.a)(null!==(r=e.eot)&&void 0!==r?r:[]),[[t,a]])})},addBotEffect:function(e,t,a){var r;return Object(n.a)(Object(n.a)({},e),{},{bot:[].concat(Object(c.a)(null!==(r=e.eot)&&void 0!==r?r:[]),[[t,a]])})},addEnemy:function(e,t,a,r){return e.enemies.length<5?[Object(n.a)(Object(n.a)({},e),{},{enemies:[].concat(Object(c.a)(e.enemies),[a])}),Object(n.a)(Object(n.a)({},t),{},{enemies:[].concat(Object(c.a)(t.enemies),[r])})]:[e,t]}};var g={"+Health":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{hp:Object(o.d)(e.hp.current+3)}),t]},"+StaPerTurn":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{staminaPerTurn:Object(o.d)(e.staminaPerTurn.current+1)}),t]},"+Stamina":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{stamina:Object(o.d)(e.stamina.current+2)}),t]},"+Attack":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{attack:Object(o.d)(e.attack.current+1)}),t]},"+Speed":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{speed:Object(o.d)(e.speed.current+1)}),t]},"+Defence":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{defence:Object(o.d)(e.defence.current+1)}),t]},"-Health":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{hp:Object(o.d)(e.hp.current-3)}),t]},"-StaPerTurn":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{staminaPerTurn:Object(o.d)(e.staminaPerTurn.current-1)}),t]},"-Stamina":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{stamina:Object(o.d)(e.stamina.current-2)}),t]},"-Attack":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{attack:Object(o.d)(e.attack.current-1)}),t]},"-Speed":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{speed:Object(o.d)(e.speed.current-1)}),t]},"-Defence":function(e,t){return[Object(n.a)(Object(n.a)({},e),{},{defence:Object(o.d)(e.defence.current-1)}),t]}};function v(e,t,a){var n=new u.Chance(a);return Object(d.c)(e).map((function(e){return Object(d.c)(t).map((function(e){return n.floating({min:0,max:1,fixed:2})}))}))}var x=function(e,t){return Object.values(e.build).flatMap((function(e){var a,n,r;return(null!==(a=t[e.display])&&void 0!==a?a:{used:0}).used<(null!==(n=e.amount)&&void 0!==n?n:999)&&null!==(r=e.effects)&&void 0!==r?r:[]}))},k=function(e,t,a){return function(e){return Object.values(e.build).flatMap((function(e){var t;return null!==(t=e.passives)&&void 0!==t?t:[]})).map((function(e){return g[e]}))}(e).reduce((function(e,t){var a=Object(r.a)(e,2);return t(a[0],a[1])}),[t,a])};function S(e,t,a,n,c,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:20,o=k(e,t,n),u=Object(r.a)(o,2),l=u[0],b=u[1];return w(e,l,a,b,{},c,i,s)}function w(e,t,a,n,r,c,i){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:20;return{player:e,enemies:a,states:[{player:t,enemies:n,inventory:r,target:0,lastAttacks:[],disabledSkills:[]}],rng:v(c,s,i),turns:c,id:Object(l.a)([e,a,c,i]),seed:i}}var A=function(e,t,a,o,u){return Object(s.a)(e).sortBy((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1],i="Player"===n?a.player.speed.current:a.enemies[n].speed.current;return Object(d.a)(c.priority-i,0,4)})).reduce((function(e,t){var a=Object(r.a)(t,2),l=a[0],b=a[1],d=Object(r.a)(e,2),f=d[0],j=d[1],p="Player"===l?j.target:l,O=j.enemies[p];if("Player"!==l&&O.hp.current<=0)return[f,Object(n.a)(Object(n.a)({},j),{},{lastAttacks:[].concat(Object(c.a)(j.lastAttacks),[{origin:l,display:"\ud83d\udc80\ud83d\udc80DEAD\ud83d\udc80\ud83d\udc80 ".concat(b.display),phase:u}])})];var y="Player"===l&&j.player.status.stun.active,h="Player"!==l&&O.status.stun.active;if(y||h)return[f,Object(n.a)(Object(n.a)({},j),{},{lastAttacks:[].concat(Object(c.a)(j.lastAttacks),[{origin:l,display:"\ud83d\udcab\ud83d\udcabSTUNNED\ud83d\udcab\ud83d\udcab ".concat(b.display),phase:u}])})];if(!Object(s.b)(Object(c.a)(b.range)).has(O.distance))return[f,Object(n.a)(Object(n.a)({},j),{},{lastAttacks:[].concat(Object(c.a)(j.lastAttacks),[{origin:l,display:"\u274c\u274cWHIFFED\u274c\u274c ".concat(b.display),phase:u}])})];if(o&&"Player"===l&&O.status.dodge.active)return[f,Object(n.a)(Object(n.a)({},j),{},{enemies:j.enemies.map((function(e,t){return t===p?Object(n.a)(Object(n.a)({},e),{},{status:Object(n.a)(Object(n.a)({},e.status),{},{dodge:{active:!1}})}):e})),lastAttacks:[].concat(Object(c.a)(j.lastAttacks),[{origin:l,display:"\ud83d\udca8\ud83d\udca8DODGED\ud83d\udca8\ud83d\udca8 ".concat(b.display),phase:u}])})];if(o&&"Player"!==l&&j.player.status.dodge.active)return[f,Object(n.a)(Object(n.a)({},j),{},{player:Object(n.a)(Object(n.a)({},j.player),{},{status:Object(n.a)(Object(n.a)({},j.player.status),{},{dodge:{active:!1}})}),lastAttacks:[].concat(Object(c.a)(j.lastAttacks),[{origin:l,display:"\ud83d\udca8\ud83d\udca8DODGED\ud83d\udca8\ud83d\udca8 ".concat(b.display),phase:u}])})];var g=function(e){var t=e.effects;return function(e,a,n){return t.reduce((function(t,a){var n=a.index,r=a.parameters;return Object(i.a)(m,n,r).apply(void 0,[e].concat(Object(c.a)(t)))}),[a,n])}}(b)(l,f,j),v=Object(r.a)(g,2),x=v[0],k=v[1];return[x,Object(n.a)(Object(n.a)({},k),{},{lastAttacks:[].concat(Object(c.a)(k.lastAttacks),[{origin:l,display:b.display,phase:u}])})]}),[t,a])},M={display:"Cleanup",tooltip:"Cleanup",effects:[Object(i.b)("Utility:Cleanup")],range:o.a,priority:0},E={display:"\u26b0",tooltip:"\u26b0",priority:4,effects:[Object(i.b)("Monster:Dead")],range:o.a},P=function(e,t){var a,u,l,b,d,f=Object(o.e)(e),j=x(e.player,f.inventory)[t],p=null!==(a=f.bot)&&void 0!==a?a:[],m=null!==(u=f.eot)&&void 0!==u?u:[],O=Object(n.a)(Object(n.a)({},f),{},{lastAttacks:[],bot:void 0,eot:void 0}),y=A([["Player",(l=f.player.staminaPerTurn.current-j.stamina,{display:"".concat(l>=0?"+":"").concat(l," \ud83d\udcaa"),tooltip:"Use ".concat(l," stamina"),effects:[Object(i.b)(["Basic:Stamina",{amount:l}])],range:o.a,priority:0})]],e,O,!1,"MAIN"),h=Object(r.a)(y,2),g=h[0],v=h[1],k=A(p,g,v,!1,"BOT"),S=Object(r.a)(k,2),w=S[0],P=S[1],B=[].concat(Object(c.a)((b=w.player,d=P.disabledSkills,Object(i.c)(b.build).flatMap((function(e){var t,a=Object(r.a)(e,2),n=a[0],c=a[1];return Object(s.b)(d).has(n)?[]:null!==(t=c.bot)&&void 0!==t?t:[]})).map((function(e){return["Player",e]})))),Object(c.a)(w.enemies.flatMap((function(e,t){var a;return(null!==(a=e.bot)&&void 0!==a?a:[]).map((function(e){return[t,e]}))})).map((function(e){return Object(c.a)(e)})))),T=A(B,w,P,!1,"BOT"),D=Object(r.a)(T,2),C=D[0],F=D[1],L=function(e,t){var a=Object(c.a)(e.rng[t]);return function(e,t){return Math.floor((t-e)*a.pop()+e)}}(C,C.states.length),N=Object(s.a)(C.enemies).zip(Object(s.a)(F.enemies)).map((function(e,t){var a=Object(r.a)(e,2),n=a[0],c=a[1];return[t,c.hp.current>0?n.effects[n.rolls[c.distance][L(0,n.rolls[c.distance].length)]]:E]})).concat([["Player",j]]).toArray().map((function(e){return Object(c.a)(e)})),R=A(N,C,F,!0,"MAIN"),H=Object(r.a)(R,2),I=H[0],z=H[1],W=[].concat(Object(c.a)(function(e,t){return Object(i.c)(e.build).flatMap((function(e){var a,n=Object(r.a)(e,2),c=n[0],i=n[1];return Object(s.b)(t).has(c)?[]:null!==(a=i.eot)&&void 0!==a?a:[]})).map((function(e){return["Player",e]}))}(I.player,z.disabledSkills)),Object(c.a)(function(e){return e.flatMap((function(e,t){var a;return(null!==(a=e.eot)&&void 0!==a?a:[]).map((function(e){return[t,e]}))})).map((function(e){return Object(c.a)(e)}))}(I.enemies))),G=A(W,I,z,!1,"EOT"),J=Object(r.a)(G,2),U=J[0],K=J[1],V=A(m,U,K,!1,"EOT"),Y=Object(r.a)(V,2),q=Y[0],_=Y[1],Z=A([["Player",M]],q,_,!1,"EOT"),Q=Object(r.a)(Z,2),X=Q[0],$=Q[1];return Object(n.a)(Object(n.a)({},X),{},{states:[].concat(Object(c.a)(X.states),[$])})},B=function(e,t){return e.states[e.states.length-1].target=t,Object(n.a)(Object(n.a)({},e),{},{states:Object(c.a)(e.states)})},T=function(e,t){return e.states[e.states.length-1].disabledSkills=t,Object(n.a)(Object(n.a)({},e),{},{states:Object(c.a)(e.states)})},D=function(e){var t=e.states[e.states.length-1];return t.player.hp.current<=0?"loss":t.enemies.reduce((function(e,t){return e+t.hp.current}),0)<=0?"win":"playing"},C=function(e){var t=e.states[0],a=e.states[e.states.length-1],n=e.states.length,r=Math.max(0,t.player.hp.max-a.player.hp.current)/t.player.hp.max,c=Math.max(0,t.player.stamina.max-a.player.stamina.current)/t.player.hp.max,i=a.enemies.length;return Math.floor(i*(500*r+150*c+(500-10*n)))}},28:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return i}));var n=a(10),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=Object(n.a)(Array(e).keys());return t>=0&&a.filter((function(e){return e<t})),a},c=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.min(Math.max(e,t),a)},i=function(e,t){return t(e)}},6:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return i}));var n=a(8),r=function(e){return Array.isArray(e)?{index:e[0],parameters:e[1]}:{index:e,parameters:void 0}},c=function(e,t,a){return(0,e[t])(a)};function i(e){return Object.entries(e).map((function(e){var t=Object(n.a)(e,2);return[t[0],t[1]]}))}},89:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return v}));var n=a(0),r=a(97),c=a.n(r),i=a(73),s=a(43),o=a(54),u=a(98),l=a(26),b=e&&"1"===Object({NODE_ENV:"production",PUBLIC_URL:"/buildmancer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SMD;b&&Object(u.inspect)({server:new c.a.Server({port:8888})});var d={on:{MENU:{target:"main"}}},f=Object(n.a)({initial:"play",states:{play:{entry:["reset"],on:{WIN:{target:"win"},LOSE:{target:"lose"}}},win:{type:"final"},lose:{type:"final"}}},d),j=Object(n.a)({initial:"player",states:{player:{entry:["reset"],on:{PLAYER:{target:"encounter"}}},encounter:{on:{ENCOUNTER:{target:"play"}}},play:{on:{WIN:{target:"win"},LOSE:{target:"lose"}}},win:{type:"final"},lose:{type:"final"}}},d),p=Object(n.a)({initial:"player",states:{player:{entry:["reset"],on:{PLAYER:{target:"play"}}},play:{on:{WIN:[{target:"victory",cond:"isFinal"},{target:"play",actions:["bumpVictories","bumpScore"],internal:!0}],LOSE:{target:"defeat"}}},victory:{type:"final"},defeat:{type:"final"}}},d),m=Object(n.a)({initial:"player",states:{player:{entry:["reset"],on:{PLAYER:{target:"play"}}},play:{on:{WIN:{target:"play",actions:["bumpVictories"]},LOSE:{target:"defeat"}}},defeat:{type:"final",on:{}}}},d),O=(Object(n.a)({initial:"puzzle",states:{puzzle:{on:{PLAYER:{target:"player"}}},player:{on:{SELECTED:{target:"play"}}},play:{on:{COMPLETE:{target:"complete"}}},complete:{on:{NEXT:{target:"player"},SELECT:{target:"puzzle"}}}}},d),Object(n.a)({initial:"load",states:{load:{on:{LOAD:{target:"play"}}},play:{on:{WIN:{target:"win"},LOSE:{target:"lose"}}},win:{type:"final"},lose:{type:"final"}}},d)),y=function(){return{victories:0,score:0,seed:Math.random()}},h=function(){return{victories:0,seed:Math.random()}},g=function(){return{seed:Math.random()}},v=Object(i.b)({tsTypes:{},id:"menus",initial:"main",context:{arcadeContext:y(),survivalContext:h(),singleContext:g()},states:{main:{on:{QUICK:{target:"quick"},SINGLE:{target:"single"},ARCADE:{target:"arcade"},SURVIVAL:{target:"survival"},LOAD:{target:"load"}}},quick:Object(n.a)({},f),single:Object(n.a)({},j),arcade:Object(n.a)({},p),survival:Object(n.a)({},m),load:Object(n.a)({},O)}},{guards:{isFinal:function(e){return e.arcadeContext.victories+1>=7}},actions:{bumpVictories:Object(s.assign)({arcadeContext:function(e,t){var a=e.arcadeContext;return Object(n.a)(Object(n.a)({},a),{},{victories:a.victories+1,seed:Math.random()})},survivalContext:function(e,t){var a=e.survivalContext;return Object(n.a)(Object(n.a)({},a),{},{victories:a.victories+1,seed:Math.random()})}}),bumpScore:Object(s.assign)({arcadeContext:function(e,t){var a=e.arcadeContext,r=t.game;return Object(n.a)(Object(n.a)({},a),{},{score:a.score+Object(l.g)(r),seed:Math.random()})}}),reset:Object(s.assign)({survivalContext:function(e,t){return h()},arcadeContext:function(e,t){return y()},singleContext:function(e,t){return g()}})}});b&&Object(o.c)(v,{devTools:!0}).onTransition((function(e){return console.log(e)})).start()}).call(this,a(53))}},[[148,1,2]]]);
//# sourceMappingURL=main.3c9af690.chunk.js.map