(this.webpackJsonpbuildmancer=this.webpackJsonpbuildmancer||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(17),c=n.n(i),o=(n(69),n(2)),s=n(7),u=n(5),l=(n(70),n(71),n(109)),f=n(110),j=n(59),d=n(115),b=n(111),p=n(114),O=n(116),h=n(13),m=n(0),y=function(e){var t,n=e.enemy,a=e.enemyStats,r=e.isSelected,i=e.onSelect,c=e.latestAttack,o=e.canAct;return Object(m.jsx)(d.a,{bg:r?"info":void 0,children:Object(m.jsxs)(d.a.Body,{children:[Object(m.jsxs)(d.a.Title,{children:[n.lore.name," ",a.hp>0?"":Object(m.jsx)("b",{children:"\ud83d\udc80DEAD\ud83d\udc80"})]}),Object(m.jsxs)(d.a.Text,{children:["\u2764:",a.hp," \ud83c\udff9:",a.distance+1]}),c&&Object(m.jsxs)(d.a.Text,{children:["Latest attack: ",c]}),Object(m.jsxs)(d.a.Text,{children:["Next attack prediction:",Object(m.jsx)("br",{}),(t=n.rolls[a.distance].map((function(e){return n.effects[e]})),Object(h.a)(t).countBy((function(e){return e.display})).toArray().map((function(e,n){var a=Object(u.a)(e,2),r=a[0],i=a[1],c=t.find((function(e){return e.display===r})),o=c.range,s=c.priority;return Object(m.jsxs)("div",{children:["[",(i/t.length*100).toFixed(2),"%] ",r," \u23f1:",s," \ud83c\udff9:",5===o.length?"Any":o.map((function(e){return e+1})).join(", "),Object(m.jsx)("br",{},n)]},n)}))),Object(m.jsx)("br",{})]}),o&&Object(m.jsx)(O.a,{disabled:r,onClick:i,children:"Select"})]})})},v=n(117),g=function(e){var t=e.selectedButtons,n=e.player,a=e.playerStats,r=e.onClickEffect,i=e.canAct,c=e.lastAction;return Object(m.jsxs)(d.a,{children:[Object(m.jsxs)(d.a.Body,{children:[Object(m.jsxs)(d.a.Title,{children:[n.lore.name,a.hp>0?"":Object(m.jsx)("b",{children:" \ud83d\udc80DEAD\ud83d\udc80 "})]}),Object(m.jsx)(d.a.Subtitle,{className:"mb-2 text-muted",children:n.build.class.display}),Object(m.jsxs)(d.a.Text,{children:[a.hp," \u2764 ",a.stamina," \ud83d\udcaa"]}),c&&Object(m.jsxs)(d.a.Text,{children:["Last action: ",c]})]}),i&&Object(m.jsx)(d.a.Body,{children:Object(m.jsx)(v.a,{direction:"horizontal",gap:2,children:Object.values(n.build).flatMap((function(e){var t;return null!==(t=e.effects)&&void 0!==t?t:[]})).map((function(e,n){return Object(m.jsxs)("div",{children:[Object(m.jsxs)(O.a,{active:t.has(e.display),disabled:a.stamina<e.stamina,onClick:function(e){return r(n)},children:["[",Object(m.jsx)("i",{children:n+1}),"] ",Object(m.jsx)("b",{children:e.display})]},e.display),Object(m.jsxs)(d.a.Text,{children:["\ud83d\udcaa:",e.stamina," \u23f1:",e.priority,Object(m.jsx)("br",{}),"\ud83c\udff9:",5===e.range.length?"Any":e.range.map((function(e){return e+1})).join(", ")]})]})}))})})]})};var x=n(11),k=n(8),S=n(18),w=n.n(S),B=n(56),M=n(57);function A(e,t,n){var a=new S.Chance(n);return Object(s.a)(Array(e).keys()).map((function(e){return Object(s.a)(Array(t).keys()).map((function(e){return a.floating({min:0,max:1,fixed:2})}))}))}var F=function(e){return Object.values(e.build).flatMap((function(e){var t;return null!==(t=e.passive)&&void 0!==t?t:[]})).map((function(e){return k.i[e]}))},T=function(e){return Object.values(e.build).flatMap((function(e){var t;return null!==(t=e.effects)&&void 0!==t?t:[]}))};var C=function(e,t,n){return Object(h.a)(e).sortBy((function(e){var t=Object(u.a)(e,2);t[0];return t[1].priority})).reduce((function(e,t){var n,a=Object(u.a)(t,2),r=a[0],i=a[1],c=Object(u.a)(e,2),l=c[0],f=c[1],j="Player"===r?f.target:r;if(new Set(Object(s.a)(i.range)).has(null===(n=f.enemies[j])||void 0===n?void 0:n.distance)){var d=Object(M.a)(i)(r,l,f),b=Object(u.a)(d,2),p=b[0],O=b[1];return[p,Object(o.a)(Object(o.a)({},O),{},{lastAttacks:[].concat(Object(s.a)(O.lastAttacks),[[r,i.display]])})]}return[l,Object(o.a)(Object(o.a)({},f),{},{lastAttacks:[].concat(Object(s.a)(f.lastAttacks),[[r,"".concat(i.display," \u274c\u274cWHIFF\u274c\u274c")]])})]}),[t,n])},P=function(e,t){var n,a,r,i,c=T(e.player)[t],l=C([["Player",(r=Object(k.e)(e).player.staminaPerTurn-c.stamina,Object(x.a)({display:"Stamina use",effect:"Player:SapStamina",parameters:{amount:r},range:k.a,priority:0}))]],e,Object(o.a)(Object(o.a)({},Object(k.e)(e)),{},{lastAttacks:[]})),f=Object(u.a)(l,2),j=f[0],d=f[1],b=C(null!==(n=d.bot)&&void 0!==n?n:[],j,d),p=Object(u.a)(b,2),O=p[0],m=p[1],y=[].concat(Object(s.a)((i=O.player,Object.values(i.build).flatMap((function(e){var t;return null!==(t=e.bot)&&void 0!==t?t:[]})).map((function(e){return["Player",e]})))),Object(s.a)(O.enemies.flatMap((function(e,t){var n;return(null!==(n=e.bot)&&void 0!==n?n:[]).map((function(e){return[t,e]}))})).map((function(e){return Object(s.a)(e)})))),v=C(y,O,m),g=Object(u.a)(v,2),S=g[0],w=g[1],B=function(e,t){return function(n,a){var r=Object(s.a)(e.rng[t]);return Math.floor((a-n)*r.pop()+n)}}(S,S.states.length-1),M=Object(h.a)(S.enemies).zip(Object(h.a)(w.enemies)).map((function(e,t){var n=Object(u.a)(e,2),a=n[0],r=n[1];return[t,r.hp>0?a.effects[a.rolls[r.distance][B(0,a.rolls[r.distance].length)]]:k.c]})).concat([["Player",c]]).toArray().map((function(e){return Object(s.a)(e)})),A=C(M,S,w),F=Object(u.a)(A,2),P=F[0],E=F[1],R=[].concat(Object(s.a)(function(e){return Object.values(e.build).flatMap((function(e){var t;return null!==(t=e.eot)&&void 0!==t?t:[]})).map((function(e){return["Player",e]}))}(P.player)),Object(s.a)(function(e){return e.flatMap((function(e,t){var n;return(null!==(n=e.eot)&&void 0!==n?n:[]).map((function(e){return[t,e]}))})).map((function(e){return Object(s.a)(e)}))}(P.enemies))),H=C(R,P,E),D=Object(u.a)(H,2),J=D[0],L=D[1],N=C(null!==(a=L.eot)&&void 0!==a?a:[],J,L),z=Object(u.a)(N,2),W=z[0],G=z[1];return Object(o.a)(Object(o.a)({},W),{},{states:[].concat(Object(s.a)(W.states),[G])})},E=function(e,t){return e.states[e.states.length-1].target=t,Object(o.a)(Object(o.a)({},e),{},{states:Object(s.a)(e.states)})},R=n(58),H=n.n(R),D=function(e){var t,n=e.handlePlayerEffect,r=e.setSelected,i=e.game,c=e.solveGame,o=e.undo,v=e.redo,x=e.hint,S=i.player,w=i.enemies,B=Object(k.e)(i),M=B.player,A=B.enemies,F=B.target,C=B.lastAttacks,P=Object(a.useState)(!1),E=Object(u.a)(P,2),R=E[0],D=E[1],J=function(){return D(!1)},L=T(S),N=A.reduce((function(e,t){return t.hp+e}),0),z=M.hp>0,W=N>0,G=i.states.length<=i.turns,I=z&&W&&G,K=function(e){var t=Object(a.useState)(new Set),n=Object(u.a)(t,2),r=n[0],i=n[1],c=function(e){var t=e.key;i((function(e){return new Set([].concat(Object(s.a)(e),[t]))}))},o=Object(a.useCallback)((function(t){var n=t.key;i((function(e){return new Set(Object(s.a)(e).filter((function(e){return e!==n})))})),e(n)}),[e]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",c),window.addEventListener("keyup",o),function(){window.removeEventListener("keydown",c),window.removeEventListener("keyup",o)}}),[o]),r}((function(e){if(I){var t=parseInt(e);if(t>0&&t<=L.length){if(!(L[t-1].stamina<=M.stamina))return;n(t-1)}}})),V=new Set(Object(s.a)(K).flatMap((function(e){var t=parseInt(e);return t>0&&t<=L.length?[L[t-1].display]:[]}))),Y=Object(a.useCallback)((function(){var e=new Blob([JSON.stringify(i)],{type:"application/json;charset=utf-8"});H()(e,"buildmancer-".concat(Date.now(),".json"))}),[i]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{fluid:!0,children:Object(m.jsx)(f.a,{className:"justify-content-center align-items-flex-start",children:Object(m.jsxs)(j.a,{sm:12,md:8,children:[Object(m.jsxs)(d.a.Title,{children:["Turn ",i.states.length," out of ",i.turns," ",z?W?"":Object(m.jsx)("b",{children:"\ud83c\udf89\ud83c\udf89VICTORY\ud83c\udf89\ud83c\udf89"}):Object(m.jsx)("b",{children:"\u274c\u274cDEFEAT\u274c\u274c"})]}),Object(m.jsx)(g,{player:S,playerStats:M,onClickEffect:n,selectedButtons:V,lastAction:null!==(t=C.filter((function(e){return"Player"===e[0]})).map((function(e){return e[1]})).join(" -> "))&&void 0!==t?t:void 0,canAct:I}),Object(m.jsx)(f.a,{children:Object(m.jsxs)(b.a,{children:[i.states.length>1&&Object(m.jsx)(O.a,{onClick:function(e){return o()},children:"Undo \u21a9"}),v&&Object(m.jsx)(O.a,{onClick:function(e){return v()},children:"Redo \u21aa"})]})}),Object(m.jsx)(f.a,{children:Object(m.jsx)(b.a,{children:Object(m.jsx)(O.a,{onClick:function(e){return x(100)},children:"Hint"})})}),Object(m.jsx)(f.a,{children:Object(h.a)(w).zip(Object(h.a)(A)).map((function(e,t){var n,a=Object(u.a)(e,2),i=a[0],c=a[1];return Object(m.jsx)(j.a,{xs:6,md:4,children:Object(m.jsx)(y,{enemyStats:c,enemy:i,canAct:I,latestAttack:null!==(n=Object(h.a)(C).filter((function(e){var n=Object(u.a)(e,2),a=n[0];n[1];return a===t})).map((function(e){return e[1]})).join(" -> "))&&void 0!==n?n:void 0,isSelected:t===F,onSelect:function(){return r(t)}},t)},t)}))}),Object(m.jsx)(d.a.Title,{children:"Debug"}),Object(m.jsx)(f.a,{children:Object(m.jsxs)(b.a,{children:[Object(m.jsx)(O.a,{onClick:function(){return D(!0)},children:"Log"}),Object(m.jsx)(O.a,{onClick:Y,children:"Dump to file \ud83d\udcc2"})]})}),Object(m.jsx)(d.a.Title,{children:"Cheats"}),Object(m.jsx)(f.a,{children:Object(m.jsxs)(b.a,{children:[Object(m.jsx)(O.a,{onClick:function(e){return c(100)},children:"Solve \u231b"}),Object(m.jsx)(O.a,{onClick:function(e){return c(1e3)},children:"Solve thoroughly \u231b\u231b\u231b"})]})})]})})}),Object(m.jsxs)(p.a,{show:R,onHide:J,scrollable:!0,centered:!0,children:[Object(m.jsx)(p.a.Header,{closeButton:!0,children:Object(m.jsx)(p.a.Title,{children:"Game Log"})}),Object(m.jsx)(p.a.Body,{children:i.states.map((function(e,t){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("b",{children:["Turn ",t+1]}),Object(m.jsx)("br",{}),"Player: ",JSON.stringify(e.player,null,2),Object(m.jsx)("br",{}),"Enemies: ",JSON.stringify(e.enemies,null,2),Object(m.jsx)("br",{}),"Target [",e.target,"] Previous: ",JSON.stringify(e.lastAttacks),Object(m.jsx)("br",{}),"Eot? Bot?: ",JSON.stringify({bot:e.bot,eot:e.eot}),Object(m.jsx)("br",{})]})}))}),Object(m.jsx)(p.a.Footer,{children:Object(m.jsx)(O.a,{variant:"primary",onClick:J,children:"Close"})})]})]})},J=n(10),L=n(113),N=n(112);var z=Object.entries(k.b).map((function(e){var t=Object(u.a)(e,2);return{type:t[0],options:t[1].map((function(e,t){return{display:e.display,value:t}}))}})),W=function(e){var t=e.isSelected,n=e.section,r=e.options,i=e.setField,c=function(e){var t=Object(a.useRef)(null);return[function(){return t.current.scrollIntoView(e)},t]}({behavior:"smooth",block:"start"}),o=Object(u.a)(c,2),s=o[0],l=o[1];return Object(m.jsxs)(f.a,{children:[Object(m.jsx)(L.a.Label,{children:n}),Object(m.jsx)("br",{}),Object(m.jsx)(b.a,{size:"lg",className:"mb-2",children:r.map((function(e){var a=e.display,r=e.value;return Object(m.jsx)(O.a,{name:n,id:"".concat(r),variant:t(r)?"primary":"secondary",onClick:function(){i(r),s()},children:a},r)}))}),Object(m.jsx)("div",{id:"".concat(n,"-scroll"),ref:l})]})},G=function(e){var t=e.onSave,n=r.a.useState(z.reduce((function(e,t){var n=t.type,a=t.options;return Object(o.a)(Object(o.a)({},e),{},Object(J.a)({},n,a[0].value))}),{})),a=Object(u.a)(n,2),i=a[0],c=a[1],s=r.a.useState({name:Object(k.g)(),age:(new w.a).age()}),j=Object(u.a)(s,2),d=j[0],b=j[1],p=function(e){return Object(m.jsx)("b",{children:k.b[e][i[e]].display})};return Object(m.jsx)(L.a,{onSubmit:function(e){e.preventDefault(),t({id:"p-1",lore:d,build:Object.entries(i).reduce((function(e,t){var n=Object(u.a)(t,2),a=n[0],r=n[1];return Object(o.a)(Object(o.a)({},e),{},Object(J.a)({},a,k.b[a][r]))}),{basic:k.b.basic[0]})},{hp:25,stamina:8,staminaPerTurn:2})},children:Object(m.jsxs)(l.a,{fluid:!0,style:{marginBottom:"105px"},children:[Object(m.jsx)(f.a,{className:"g-2",children:z.map((function(e){var t=e.type,n=e.options;return Object(m.jsx)(W,{setField:function(e){return function(e,t){c(Object(o.a)(Object(o.a)({},i),{},Object(J.a)({},e,t)))}(t,e)},section:t,options:n,isSelected:function(e){return i[t]===e}},t)}))}),Object(m.jsx)(N.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(N.a.Text,{children:["You are ",Object(m.jsx)("i",{onClick:function(){return b((function(e){return Object(o.a)(Object(o.a)({},e),{},{name:Object(k.g)()})}))},children:d.name}),", the ",p("skill")," ",p("class")," ",p("charm"),Object(m.jsx)("br",{}),"who wields a ",p("weapon")," and a ",p("offhand"),Object(m.jsx)("br",{}),"and wears ",p("armor")," with ",p("headgear")," and ",p("footwear")]}),Object(m.jsx)(O.a,{type:"submit",children:"Pick your foe!"})]})})]})})},I=function(e){var t=e.player,n=e.onSave,a=r.a.useState([]),i=Object(u.a)(a,2),c=i[0],o=i[1],f=function(e){return Object(m.jsx)("b",{children:t.build[e].display})};return Object(m.jsxs)(L.a,{onSubmit:function(e){e.preventDefault();var t=c.map((function(e){return e[0]})),a=c.map((function(e){return e[1]}));n(t,a)},children:[Object(m.jsx)(l.a,{fluid:!0,style:{marginBottom:c.length>0?"205px":"105px"},children:Object(m.jsx)(b.a,{size:"lg",className:"mb-2",children:k.d.map((function(e){return Object(m.jsx)(O.a,{disabled:c.length>4,onClick:function(){return o((function(t){return[].concat(Object(s.a)(t),[e])}))},children:e[0].lore.name},e[0].lore.name)}))})}),c.length>0&&Object(m.jsx)(N.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{marginBottom:"100px"},children:Object(m.jsx)(l.a,{fluid:!0,children:Object(m.jsx)(b.a,{size:"sm",className:"mb-2",children:c.map((function(e,t){return Object(m.jsx)(O.a,{onClick:function(){return o((function(t){var n=!1;return t.filter((function(t){return n||t[0].lore.name!==e[0].lore.name||!(n=!0)}))}))},children:e[0].lore.name},"".concat(e[0].lore.name,"-").concat(t))}))})})}),Object(m.jsx)(N.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(m.jsxs)(l.a,{children:[Object(m.jsxs)(N.a.Text,{children:["You are ",Object(m.jsx)("i",{children:t.lore.name}),", the ",f("skill")," ",f("class")," ",f("charm"),Object(m.jsx)("br",{}),"who wields a ",f("weapon")," and a ",f("offhand"),Object(m.jsx)("br",{}),"and wears ",f("armor")," with ",f("headgear")," and ",f("footwear")]}),Object(m.jsxs)(b.a,{children:[Object(m.jsx)(O.a,{disabled:c.length<0||c.length>5,onClick:function(e){return o((function(e){return[].concat(Object(s.a)(e),[Object(k.f)()])}))},children:"Add Random"}),Object(m.jsx)(O.a,{type:"submit",disabled:c.length<1||c.length>5,children:"To Battle!"})]})]})})]})};function K(e){function t(e,t){if((e=e||{}).mutationFunction=e.mutationFunction||t.mutationFunction,e.crossoverFunction=e.crossoverFunction||t.crossoverFunction,e.fitnessFunction=e.fitnessFunction||t.fitnessFunction,e.doesABeatBFunction=e.doesABeatBFunction||t.doesABeatBFunction,e.population=e.population||t.population,e.population.length<=0)throw Error("population must be an array and contain at least 1 phenotypes");if(e.populationSize=e.populationSize||t.populationSize,e.populationSize<=0)throw Error("populationSize must be greater than 0");return e}var n=t(e,{mutationFunction:function(e){return e},crossoverFunction:function(e,t){return[e,t]},fitnessFunction:function(e){return 0},doesABeatBFunction:void 0,population:[],populationSize:100});function a(e){return JSON.parse(JSON.stringify(e))}function r(e){return n.mutationFunction(a(e))}function i(e){e=a(e);var t=n.population[Math.floor(Math.random()*n.population.length)];return t=a(t),n.crossoverFunction(e,t)[0]}return{evolve:function(e){return e&&(n=t(e,n)),function(){for(var e=n.population.length;n.population.length<n.populationSize;){var t=Math.floor(Math.random()*e);n.population.push(r(a(n.population[Math.floor(t)])))}}(),function(){for(var e=0;e<n.population.length;e++){var t=Math.floor(Math.random()*n.population.length),a=n.population[t];n.population[t]=n.population[e],n.population[e]=a}}(),function(){for(var e,t,a=[],c=0;c<n.population.length-1;c+=2){var o=n.population[c],s=n.population[c+1];a.push(o),e=o,t=s,(n.doesABeatBFunction?n.doesABeatBFunction(e,t):n.fitnessFunction(e)>=n.fitnessFunction(t))?Math.random()<.5?a.push(r(o)):a.push(i(o)):a.push(s)}n.population=a}(),this},best:function(){var e=this.scoredPopulation();return a(e.reduce((function(e,t){return e.score>=t.score?e:t}),e[0]).phenotype)},bestScore:function(){return n.fitnessFunction(this.best())},population:function(){return a(this.config().population)},scoredPopulation:function(){return this.population().map((function(e){return{phenotype:a(e),score:n.fitnessFunction(e)}}))},config:function(){return a(n)},clone:function(e){return K(t(e,t(this.config(),n)))}}}n(63);var V={playerSeed:"Miau",weights:{monster:.7,player:.125,turn:.05,stamina:.075},debug:!1};function Y(e,t,n){for(var a=Object(o.a)(Object(o.a)({},V),n),r=Object(s.a)(Array(t).keys()),i=new w.a(a.playerSeed),c=T(e.player),l={mutationFunction:function(e){var t=Object(k.e)(e),n=t.enemies.reduce((function(e,t){return e+t.hp}),0);if(0===t.player.hp||0===n)return e;for(var a=e;6===i.d6()||(null!==(r=null===(o=Object(k.e)(a).enemies[Object(k.e)(a).target])||void 0===o?void 0:o.hp)&&void 0!==r?r:0)<=0;){var r,o;a=E(a,i.natural({min:0,max:Object(k.e)(a).enemies.length-1}))}var s=Object(k.e)(a),l=c.map((function(e,t){return[e,t]})).filter((function(e){var t=Object(u.a)(e,2),n=t[0];t[1];return n.stamina>s.player.stamina})).map((function(e){var t=Object(u.a)(e,2);t[0];return t[1]}));return a=P(a,i.natural({min:0,max:c.length-1,exclude:l}))},fitnessFunction:function(e){var t=Object(k.e)(e),n=t.enemies.reduce((function(e,t){return e+t.hp}),0),r=t.player.hp,i=t.player.stamina,c=e.states[0].player.hp,o=e.states[0].player.hp,s=e.states[0].enemies.reduce((function(e,t){return e+t.hp}),0),u=(s-n)/s,l=r/c,f=(e.turns-e.states.length)/e.turns,j=i/o,d=u*a.weights.monster+l*a.weights.player+f*a.weights.turn+j*a.weights.stamina;return a.debug&&console.log("MH: ".concat(n," | PH: ").concat(r," | TR: ").concat(e.states.length,"\nFitness: ").concat(d," | MF: ").concat(u," | PF: ").concat(l," | SF: ").concat(j," | TF: ").concat(f,"\nWeights: ").concat(JSON.stringify(a.weights))),d},population:r.map((function(t){return e})),populationSize:t},f=(null===n||void 0===n?void 0:n.turns)?null===n||void 0===n?void 0:n.turns:e.turns,j=new K(l),d=0;d<f;d++)j=j.evolve();return j.scoredPopulation()}var Z=function(){var e=r.a.useState("buildPlayer"),t=Object(u.a)(e,2),n=t[0],a=t[1],i=r.a.useState(),c=Object(u.a)(i,2),l=c[0],f=c[1],j=r.a.useState(),d=Object(u.a)(j,2),b=d[0],p=d[1],O=r.a.useState(),y=Object(u.a)(O,2),v=y[0],g=y[1],x=r.a.useState([]),S=Object(u.a)(x,2),w=S[0],M=S[1];if(!v&&l&&b){var T=Object(u.a)(l,2),C=T[0],R=T[1],H=Object(u.a)(b,2),J=function(e,t,n,a,r,i){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:20,o=F(e).reduce((function(e,t){var n=Object(u.a)(e,2);return t(n[0],n[1])}),[t,a]),s=Object(u.a)(o,2),l=s[0],f=s[1];return{player:e,enemies:n,states:[{player:l,enemies:f,target:0,lastAttacks:[]}],rng:A(r,c,i),turns:r,id:Object(B.a)([e,n,r,i]),seed:i}}(C,R,H[0],H[1],50,"PACC");g(J)}return Object(m.jsxs)("div",{className:"App",children:["buildPlayer"===n?Object(m.jsx)(G,{onSave:function(e,t){f([e,t]),a("buildEncounter")}}):null,"buildEncounter"===n&&l?Object(m.jsx)(I,{player:l[0],onSave:function(e,t){p([e,t]),a("game")}}):null,"game"===n&&v?Object(m.jsx)(D,{game:v,redo:w.length>0?function(){var e=Object(s.a)(w),t=e.pop();M(e),g(Object(o.a)(Object(o.a)({},v),{},{states:[].concat(Object(s.a)(v.states),[t])}))}:void 0,undo:function(){M([].concat(Object(s.a)(w),[Object(k.e)(v)])),g(Object(o.a)(Object(o.a)({},v),{},{states:[v.states[0]].concat(Object(s.a)(v.states.slice(1,-1)))}))},setSelected:function(e){M([]),g(E(v,e))},handlePlayerEffect:function(e){M([]),g(P(v,e))},solveGame:function(e){return g(Object(h.a)(Y(v,e,{turns:v.turns-v.states.length})).maxBy((function(e){return e.score})).phenotype)},hint:function(e){return g(Object(o.a)(Object(o.a)({},v),{},{states:[].concat(Object(s.a)(v.states),[Object(h.a)(Y(v,e,{turns:v.turns-v.states.length})).maxBy((function(e){return e.score})).phenotype.states[v.states.length]])}))}}):null]})},U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function q(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,118)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(Z,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/buildmancer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/buildmancer","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):q(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):q(t,e)}))}}(),Q()},11:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a=function(e){return{display:e.display,effect:e.effect,parameters:e.parameters,priority:e.priority,range:e.range}},r=function(e){return{display:e.display,effect:e.effect,parameters:e.parameters,priority:e.priority,range:e.range,stamina:e.stamina}}},50:function(e,t,n){"use strict";var a=n(7),r=n(2),i=n(5),c=n(8),o=n(11),s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length>1?t.reduce((function(e,t){return function(n){return function(a,r,c){var o=e(n)(a,r,c),s=Object(i.a)(o,2),u=s[0],l=s[1];return t(n)(a,u,l)}}})):t[0]},u={"Player:SapStamina":s((function(e){var t=e.amount;return function(e,n,a){return[n,j.modifyPlayerStamina(n.states[0],a,t)]}})),"Target:Bleed":s((function(e){var t=e.target;return function(e,n,a){return[n,"Player"===t?j.attackPlayer(Object(c.h)(n),a,1):j.attackMonster(Object(c.h)(n),a,t,1)]}}),(function(e){return function(t,n,a){return[n,e.lifespan>0?j.addEotEffect(a,t,Object(o.a)({display:"Bleed",range:c.a,priority:4,effect:"Target:Bleed",parameters:Object(r.a)(Object(r.a)({},e),{},{lifespan:e.lifespan-1})})):a]}})),"Monster:Summon":s((function(e){var t=e.enemy;return function(e,n,a){return j.addEnemy(n,a,c.d[t][0],c.d[t][1])}})),"Monster:Dead":s((function(){return function(e,t,n){return[t,"Player"!==e?j.addBotEffect(n,e,Object(o.a)({display:"Monster Cleanup",range:c.a,priority:0,effect:"Monster:Remove",parameters:{target:e}})):n]}})),"Monster:Remove":s((function(e){var t=e.target;return function(e,n,a){return j.removeMonster(n,a,t)}})),"Basic:Rest":s((function(){return function(e,t,n){return[t,n]}})),"Basic:Advance":s((function(){return function(e,t,n){return[t,j.changeDistance(n,n.target,-2)]}})),"Basic:Retreat":s((function(){return function(e,t,n){return[t,j.changeDistance(n,n.target,2)]}})),"Axe:Chop":s((function(){return function(e,t,n){return[t,j.attackMonster(Object(c.h)(t),n,n.target,3)]}})),"Axe:Cut":s((function(){return function(e,t,n){return[t,j.attackMonster(Object(c.h)(t),n,n.target,3)]}}),(function(){return function(e,t,n){return[t,j.addEotEffect(n,e,Object(o.a)({display:"Bleed",range:c.a,priority:4,effect:"Target:Bleed",parameters:{target:n.target,lifespan:2}}))]}})),"Hook:GetHere":s((function(){return function(e,t,n){return[t,j.attackMonster(Object(c.h)(t),n,n.target,3)]}}),(function(){return function(e,t,n){return[t,j.changeDistance(n,n.target,-1)]}})),"Monster:Swipe":s((function(){return function(e,t,n){return[t,j.attackPlayer(Object(c.h)(t),n,2)]}})),"Monster:Roar":s((function(){return function(e,t,n){return[t,j.modifyPlayerStamina(Object(c.h)(t),n,-5)]}})),"Monster:Jump":s((function(){return function(e,t,n){return[t,j.changeDistance(n,e,-2)]}})),"BootsOfFlight:EOT":s((function(){return function(e,t,n){return[t,n.enemies.reduce((function(e,t,n){return j.changeDistance(e,n,-2)}),n)]}}))},l=function(e,t,n){return Math.min(Math.max(e,t),n)},f=function(e,t,n){return e.map((function(e,a){return a===t?Object(r.a)(Object(r.a)({},e),n(e)):e}))},j={attackMonster:function(e,t,n,a){return Object(r.a)(Object(r.a)({},t),{},{enemies:f(t.enemies,n,(function(t){var r=t.hp;return{hp:l(r-a,0,e.enemies[n].hp)}}))})},changeDistance:function(e,t,n){return Object(r.a)(Object(r.a)({},e),{},{enemies:f(e.enemies,t,(function(e){var t=e.distance;return{distance:l(t+n,0,4)}}))})},removeMonster:function(e,t,n){return[Object(r.a)(Object(r.a)({},e),{},{enemies:e.enemies.filter((function(e,t){return t===n}))}),Object(r.a)(Object(r.a)({},t),{},{target:0,enemies:t.enemies.filter((function(e,t){return t===n}))})]},attackPlayer:function(e,t,n){return Object(r.a)(Object(r.a)({},t),{},{player:Object(r.a)(Object(r.a)({},t.player),{},{hp:l(t.player.hp-n,0,e.player.hp)})})},modifyPlayerStamina:function(e,t,n){return Object(r.a)(Object(r.a)({},t),{},{player:Object(r.a)(Object(r.a)({},t.player),{},{stamina:l(t.player.stamina+n,0,e.player.stamina)})})},addEotEffect:function(e,t,n){var i;return Object(r.a)(Object(r.a)({},e),{},{eot:[].concat(Object(a.a)(null!==(i=e.eot)&&void 0!==i?i:[]),[[t,n]])})},addBotEffect:function(e,t,n){var i;return Object(r.a)(Object(r.a)({},e),{},{bot:[].concat(Object(a.a)(null!==(i=e.eot)&&void 0!==i?i:[]),[[t,n]])})},addEnemy:function(e,t,n,i){return e.enemies.length<5?[Object(r.a)(Object(r.a)({},e),{},{enemies:[].concat(Object(a.a)(e.enemies),[n])}),Object(r.a)(Object(r.a)({},t),{},{enemies:[].concat(Object(a.a)(t.enemies),[i])})]:[e,t]}};t.a=u},57:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n(5);var a=n(2),r=n(9),i=n(50),c="undefined"===typeof e;function o(e){var t=e.effect,n=e.parameters;if(!c||l(t,n))return i.a[t](n);throw new Error("ValidationException: ".concat(t," with ").concat(JSON.stringify(n)))}var s=function(e,t,n){return t[e]=n,Object(a.a)({},t)},u=c?Object.keys(i.a).reduce((function(e,t){if(!Object(r.is)(t))return e;switch(t){case"Player:SapStamina":case"Target:Bleed":case"Monster:Summon":case"Monster:Dead":case"Basic:Rest":case"Basic:Advance":case"Basic:Retreat":case"Axe:Chop":case"Axe:Cut":case"Hook:GetHere":case"Monster:Swipe":case"Monster:Roar":case"Monster:Jump":case"BootsOfFlight:EOT":return s(t,e,[Object(r.createIs)(),Object(r.createIs)()])}throw new Error("Missing runtime validation for ".concat(t))}),{}):{};function l(e,t){if(Object(r.is)(e)){var n=u[e];if(null!=n)return n[0](e)&&n[1](t)}return!1}}).call(this,n(30))},69:function(e,t,n){},70:function(e,t,n){},8:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"i",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"g",(function(){return O})),n.d(t,"d",(function(){return h}));var a=n(7),r=n(2),i=n(18),c=n(11),o=function(e){return e.states[0]},s=function(e){return e.states[e.states.length-1]},u=function(){return(new i.Chance).pickone(h)},l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.a)(new Set(t))},f=l(0,1,2,3,4),j=f,d=Object(c.a)({display:"DEAD",priority:4,effect:"Monster:Dead",range:l()}),b={"Charm:ofHealth":function(e,t){return[Object(r.a)(Object(r.a)({},e),{},{hp:e.hp+10}),t]},"Charm:ofHaste":function(e,t){return[Object(r.a)(Object(r.a)({},e),{},{staminaPerTurn:e.staminaPerTurn+1}),t]},"Charm:ofResilience":function(e,t){return[Object(r.a)(Object(r.a)({},e),{},{stamina:e.stamina+10}),t]}},p={basic:[{display:"Basic",effects:[Object(c.b)({display:"Rest",effect:"Basic:Rest",priority:4,stamina:0,range:j}),Object(c.b)({display:"Advance",effect:"Basic:Advance",priority:4,stamina:1,range:j}),Object(c.b)({display:"Retreat",effect:"Basic:Retreat",priority:4,stamina:1,range:j})]}],class:[{display:"Warrior"},{display:"Mage"},{display:"Rogue"}],skill:[{display:"Sturdy"},{display:"Nimble"}],weapon:[{display:"Axe",effects:[Object(c.b)({display:"Chop",effect:"Axe:Chop",priority:2,stamina:2,range:l(0,1)}),Object(c.b)({display:"Cut",effect:"Axe:Cut",priority:3,stamina:2,range:l(0)})]}],offhand:[{display:"Hook",effects:[Object(c.b)({display:"Get over here!",effect:"Hook:GetHere",priority:4,stamina:3,range:l(2,3,4)})]}],consumable:[{display:"Potion"}],armor:[{display:"Heavy"}],headgear:[{display:"Helm"}],footwear:[{display:"Boots of Dooooodge!"},{display:"Boots of Flight",eot:[Object(c.a)({display:"Flight!",priority:0,range:f,effect:"BootsOfFlight:EOT"})]}],charm:[{display:"of Health",passive:"Charm:ofHealth"},{display:"of Haste",passive:"Charm:ofHaste"},{display:"of Resilience",passive:"Charm:ofResilience"}]},O=function(){return m[Math.floor(Math.random()*m.length)]},h=[[{lore:{name:"Sacapuntas"},rolls:[[0,1,2,1,0],[0,1,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0,0]],effects:[Object(c.a)({display:"Swipe",priority:3,effect:"Monster:Swipe",range:l(0,1)}),Object(c.a)({display:"Roar",priority:1,effect:"Monster:Roar",range:f}),Object(c.a)({display:"Jump",priority:2,effect:"Monster:Jump",range:l(2,3,4)})]},{hp:25,rage:0,distance:4}],[{lore:{name:"Toro"},effects:[Object(c.a)({display:"Swipe",priority:3,effect:"Monster:Swipe",range:f}),Object(c.a)({display:"Jump",priority:2,effect:"Monster:Jump",range:l(2,3,4)})],rolls:[[0,0,0,0,0],[0,0,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0]]},{hp:22,rage:0,distance:4}],[{lore:{name:"Summoner"},effects:[Object(c.a)({display:"Swipe",priority:3,effect:"Monster:Swipe",range:l(0,1)}),Object(c.a)({display:"Jump",priority:3,effect:"Monster:Jump",range:f}),Object(c.a)({display:"Summon Toro",priority:4,effect:"Monster:Summon",parameters:{enemy:1},range:l(2,3,4)})],rolls:[[0,0,0,0,0],[1,0,0,0,0],[1,1,2,0,0],[1,1,2,0,0],[1,2,2,0,0]]},{hp:30,rage:0,distance:4}]],m=["Lydan","Syrin","Ptorik","Joz","Varog","Gethrod","Hezra","Feron","Ophni","Colborn","Fintis","Gatlin","Jinto","Hagalbar","Krinn","Lenox","Revvyn","Hodus","Dimian","Paskel","Kontas","Weston","Azamarr ","Jather ","Tekren ","Jareth","Adon","Zaden","Eune ","Graff","Tez","Jessop","Gunnar","Pike","Domnhar","Baske","Jerrick","Mavrek","Riordan","Wulfe","Straus","Tyvrik ","Henndar","Favroe","Whit","Jaris","Renham","Kagran","Lassrin ","Vadim","Arlo","Quintis","Vale","Caelan","Yorjan","Khron","Ishmael","Jakrin","Fangar","Roux","Baxar","Hawke","Gatlen","Barak","Nazim","Kadric","Paquin","Kent","Moki","Rankar","Lothe","Ryven","Clawsen","Pakker","Embre","Cassian","Verssek","Dagfinn","Ebraheim","Nesso","Eldermar","Rivik","Rourke","Barton","Hemm","Sarkin","Blaiz ","Talon","Agro","Zagaroth","Turrek","Esdel","Lustros","Zenner","Baashar ","Dagrod ","Gentar","Feston","Syrana","Resha","Varin","Wren","Yuni","Talis","Kessa","Magaltie","Aeris","Desmina","Krynna","Asralyn ","Herra","Pret","Kory","Afia","Tessel","Rhiannon","Zara","Jesi","Belen","Rei","Ciscra","Temy","Renalee ","Estyn","Maarika","Lynorr","Tiv","Annihya","Semet","Tamrin","Antia","Reslyn","Basak","Vixra","Pekka ","Xavia","Beatha ","Yarri","Liris","Sonali","Razra ","Soko","Maeve","Everen","Yelina","Morwena","Hagar","Palra","Elysa","Sage","Ketra","Lynx","Agama","Thesra ","Tezani","Ralia","Esmee","Heron","Naima","Rydna ","Sparrow","Baakshi ","Ibera","Phlox","Dessa","Braithe","Taewen","Larke","Silene","Phressa","Esther","Anika","Rasy ","Harper","Indie","Vita","Drusila","Minha","Surane","Lassona","Merula","Kye","Jonna","Lyla","Zet","Orett","Naphtalia","Turi","Rhays","Shike","Hartie","Beela","Leska","Vemery ","Lunex","Fidess","Tisette","Partha"]}},[[107,1,2]]]);
//# sourceMappingURL=main.534dfca9.chunk.js.map