(this.webpackJsonpbuildmancer=this.webpackJsonpbuildmancer||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),c=n.n(i),s=(n(30),n(6)),o=(n(31),n(32),n(10)),l=n(38),u=n(39),d=n(22),f=n(2);function j(e,t){switch(t.type){case"updatePlayerStats":return Object(f.a)(Object(f.a)({},e),{},{player:Object(f.a)(Object(f.a)({},e.player),{},{stats:t.stats})});case"updateEnemyStats":return Object(f.a)(Object(f.a)({},e),{},{enemies:e.enemies.map((function(e){return e.id===t.id?Object(f.a)(Object(f.a)({},e),{},{stats:t.stats}):e}))});case"setSelectedEnemy":return Object(f.a)(Object(f.a)({},e),{},{selectedEnemy:t.id});default:return e}}var b=function(e){var t=r.a.useReducer(j,e),n=Object(s.a)(t,2),a=n[0],i=n[1];return Object(f.a)(Object(f.a)({},a),{},{updatePlayerStats:function(e){i({type:"updatePlayerStats",stats:e})},updateEnemyStats:function(e,t){i({type:"updateEnemyStats",id:e,stats:t})},setSelectedEnemy:function(e){i({type:"setSelectedEnemy",id:e})}})},p=function(e,t){return{player:e,monster:t}},h=function(e,t,n){return Math.min(Math.max(e,t),n)},m=function(e,t,n){return p(t.player,Object(f.a)(Object(f.a)({},t.monster),{},{hp:h(t.monster.hp-n,0,e.monster.hp)}))},y=function(e,t){return p(e.player,Object(f.a)(Object(f.a)({},e.monster),{},{distance:h(e.monster.distance+t,1,5)}))},O=function(e,t,n){return p(Object(f.a)(Object(f.a)({},t.player),{},{hp:h(t.player.hp-n,0,e.player.hp)}),t.monster)},x=function(e,t,n){return p(Object(f.a)(Object(f.a)({},t.player),{},{stamina:h(t.player.stamina-n,0,e.player.stamina)}),t.monster)},v={class:[{display:"Warrior",effects:[]},{display:"Mage",effects:[]},{display:"Rogue",effects:[]}],skill:[{display:"Sturdy",effects:[]},{display:"Nimble",effects:[]}],weapon:[{display:"Axe",effects:[{display:"Chop",effect:function(e,t){return m(e,t,3)},priority:2},{display:"Cut",effect:function(e,t){return m(e,t,3)},priority:3}]}],offhand:[{display:"Hook",effects:[{display:"Get over here!",effect:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return function(n,a){return e(n,t(n,a))}}))}((function(e,t){return m(e,t,3)}),(function(e,t){return x(e,t,2)}),(function(e,t){return y(t,-1)})),priority:4}]}],consumable:[{display:"Potion",effects:[]}],armor:[{display:"Heavy",effects:[]}],headgear:[{display:"Helm",effects:[]}],footwear:[{display:"Boots",effects:[]}],charm:[{display:"of Health",effects:[]}]},g=function(){return w[Math.floor(Math.random()*w.length)]},k=[{id:"m-1",lore:{name:"Sacapuntas"},stats:{hp:25,rage:0,distance:5},rolls:[[0,1,2,1,0],[0,1,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0,0]],effects:[{display:"Swipe",priority:3,effect:function(e,t){return O(e,t,2)}},{display:"Roar",priority:1,effect:function(e,t){return x(e,t,5)}},{display:"Jump",priority:2,effect:function(e,t){return y(e,-2)}}]},{id:"m-2",lore:{name:"Cacahue"},stats:{hp:30,rage:0,distance:5},effects:[{display:"Swipe",priority:3,effect:function(e,t){return O(e,t,2)}},{display:"Roar",priority:1,effect:function(e,t){return x(e,t,5)}},{display:"Jump",priority:2,effect:function(e,t){return y(e,-2)}}],rolls:[[0,0,0,1,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,2,0,0]]},{id:"m-3",lore:{name:"Toro"},stats:{hp:22,rage:0,distance:5},effects:[{display:"Swipe",priority:3,effect:function(e,t){return O(e,t,2)}},{display:"Roar",priority:1,effect:function(e,t){return x(e,t,5)}},{display:"Jump",priority:2,effect:function(e,t){return y(e,-2)}}],rolls:[[0,0,0,1,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,2,0,0]]}],w=["Lydan","Syrin","Ptorik","Joz","Varog","Gethrod","Hezra","Feron","Ophni","Colborn","Fintis","Gatlin","Jinto","Hagalbar","Krinn","Lenox","Revvyn","Hodus","Dimian","Paskel","Kontas","Weston","Azamarr ","Jather ","Tekren ","Jareth","Adon","Zaden","Eune ","Graff","Tez","Jessop","Gunnar","Pike","Domnhar","Baske","Jerrick","Mavrek","Riordan","Wulfe","Straus","Tyvrik ","Henndar","Favroe","Whit","Jaris","Renham","Kagran","Lassrin ","Vadim","Arlo","Quintis","Vale","Caelan","Yorjan","Khron","Ishmael","Jakrin","Fangar","Roux","Baxar","Hawke","Gatlen","Barak","Nazim","Kadric","Paquin","Kent","Moki","Rankar","Lothe","Ryven","Clawsen","Pakker","Embre","Cassian","Verssek","Dagfinn","Ebraheim","Nesso","Eldermar","Rivik","Rourke","Barton","Hemm","Sarkin","Blaiz ","Talon","Agro","Zagaroth","Turrek","Esdel","Lustros","Zenner","Baashar ","Dagrod ","Gentar","Feston","Syrana","Resha","Varin","Wren","Yuni","Talis","Kessa","Magaltie","Aeris","Desmina","Krynna","Asralyn ","Herra","Pret","Kory","Afia","Tessel","Rhiannon","Zara","Jesi","Belen","Rei","Ciscra","Temy","Renalee ","Estyn","Maarika","Lynorr","Tiv","Annihya","Semet","Tamrin","Antia","Reslyn","Basak","Vixra","Pekka ","Xavia","Beatha ","Yarri","Liris","Sonali","Razra ","Soko","Maeve","Everen","Yelina","Morwena","Hagar","Palra","Elysa","Sage","Ketra","Lynx","Agama","Thesra ","Tezani","Ralia","Esmee","Heron","Naima","Rydna ","Sparrow","Baakshi ","Ibera","Phlox","Dessa","Braithe","Taewen","Larke","Silene","Phressa","Esther","Anika","Rasy ","Harper","Indie","Vita","Drusila","Minha","Surane","Lassona","Merula","Kye","Jonna","Lyla","Zet","Orett","Naphtalia","Turi","Rhays","Shike","Hartie","Beela","Leska","Vemery ","Lunex","Fidess","Tisette","Partha"],S=n(43),E=n(44),T=n(21),B=n(1),P=function(e){var t,n=e.enemy,a=e.isSelected,r=e.onSelect;return Object(B.jsx)(S.a,{bg:a?"info":void 0,children:Object(B.jsxs)(S.a.Body,{children:[Object(B.jsx)(S.a.Title,{children:n.lore.name}),Object(B.jsxs)(S.a.Text,{children:[n.lore.name,". Has ",n.stats.hp," HP and is at distance"," ",n.stats.distance]}),Object(B.jsx)(S.a.Text,{children:"Next attack prediction:"}),(t=n.rolls[n.stats.distance-1].map((function(e){return n.effects[e]})),Object(T.a)(t).countBy((function(e){return e.display})).toArray().map((function(e){var n=Object(s.a)(e,2),a=n[0],r=n[1];return Object(B.jsxs)(S.a.Text,{children:["[",(r/t.length*100).toFixed(2),"%] ",a]})}))),Object(B.jsx)(E.a,{disabled:a,onClick:r,children:"Select"})]})})},R=n(45),L=function(e){var t=e.selectedButtons,n=e.player,a=e.onClickEffect;return Object(B.jsxs)(S.a,{children:[Object(B.jsxs)(S.a.Body,{children:[Object(B.jsx)(S.a.Title,{children:n.lore.name}),Object(B.jsx)(S.a.Subtitle,{className:"mb-2 text-muted",children:n.build.class.display}),Object(B.jsxs)(S.a.Text,{children:["Has ",n.stats.hp," HP"]})]}),Object(B.jsx)(S.a.Body,{children:Object(B.jsx)(R.a,{direction:"horizontal",gap:2,children:Object.values(n.build).flatMap((function(e){return e.effects})).map((function(e,n){return Object(B.jsxs)(E.a,{active:t.has(e.display),onClick:function(t){a(e.effect)},children:["[",n+1,"] ",e.display]},e.display)}))})})]})};var C=function(e){var t=b({player:e.player,enemies:e.enemies,selectedEnemy:e.enemies[0].id}),n=t.player,r=t.enemies,i=t.selectedEnemy,c=t.updatePlayerStats,f=t.updateEnemyStats,j=t.setSelectedEnemy,h=function(t){var a=t(p(e.player.stats,e.enemies.filter((function(e){return e.id===i}))[0].stats),p(n.stats,r.filter((function(e){return e.id===i}))[0].stats));c(a.player),f(i,a.monster)},m=Object.values(n.build).flatMap((function(e){return e.effects})),y=function(e){var t=Object(a.useState)(new Set),n=Object(s.a)(t,2),r=n[0],i=n[1],c=function(e){var t=e.key;i((function(e){return new Set([].concat(Object(o.a)(e),[t]))}))},l=Object(a.useCallback)((function(t){var n=t.key;i((function(e){return new Set(Object(o.a)(e).filter((function(e){return e!==n})))})),e(n)}),[e]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",c),window.addEventListener("keyup",l),function(){window.removeEventListener("keydown",c),window.removeEventListener("keyup",l)}}),[l]),r}((function(e){var t=parseInt(e);t>0&&t<=m.length&&h(m[t-1].effect)})),O=new Set(Object(o.a)(y).flatMap((function(e){var t=parseInt(e);return t>0&&t<=m.length?[m[t-1].display]:[]})));return Object(B.jsx)(l.a,{fluid:!0,children:Object(B.jsx)(u.a,{className:"justify-content-center align-items-flex-start",children:Object(B.jsxs)(d.a,{sm:12,md:8,children:[Object(B.jsx)(u.a,{children:Object(B.jsx)(d.a,{children:Object(B.jsx)(L,{player:n,onClickEffect:h,selectedButtons:O})})}),Object(B.jsx)(u.a,{className:"mt-2 g-2",children:r.map((function(e){return Object(B.jsx)(d.a,{xs:6,md:4,children:Object(B.jsx)(P,{enemy:e,isSelected:e.id===i,onSelect:function(){j(e.id)}})},e.id)}))})]})})})},H=n(7),M=n(42),A=n(41),N=n(40);var J=Object.entries(v).map((function(e){var t=Object(s.a)(e,2);return{type:t[0],options:t[1].map((function(e,t){return{display:e.display,value:t}}))}})),F=function(e){var t=e.isSelected,n=e.section,r=e.options,i=e.setField,c=function(e){var t=Object(a.useRef)(null);return[function(){return t.current.scrollIntoView(e)},t]}({behavior:"smooth",block:"start"}),o=Object(s.a)(c,2),l=o[0],d=o[1];return Object(B.jsxs)(u.a,{children:[Object(B.jsx)(M.a.Label,{children:n}),Object(B.jsx)("br",{}),Object(B.jsx)(N.a,{size:"lg",className:"mb-2",children:r.map((function(e){var a=e.display,r=e.value;return Object(B.jsx)(E.a,{name:n,id:"".concat(r),variant:t(r)?"primary":"secondary",onClick:function(){i(r),l()},children:a},r)}))}),Object(B.jsx)("div",{id:"".concat(n,"-scroll"),ref:d})]})},W=function(e){var t=e.onSave,n=r.a.useState(J.reduce((function(e,t){var n=t.type,a=t.options;return Object(f.a)(Object(f.a)({},e),{},Object(H.a)({},n,a[0].value))}),{})),a=Object(s.a)(n,2),i=a[0],c=a[1],o=r.a.useState({name:g(),age:Math.floor(50*Math.random()+16)}),d=Object(s.a)(o,2),j=d[0],b=d[1],p=function(e){return Object(B.jsx)("b",{children:v[e][i[e]].display})};return Object(B.jsx)(M.a,{onSubmit:function(e){e.preventDefault(),t({id:"p-1",lore:j,stats:{hp:10,stamina:8},build:Object.entries(i).reduce((function(e,t){var n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(f.a)(Object(f.a)({},e),{},Object(H.a)({},a,v[a][r]))}),{})})},children:Object(B.jsxs)(l.a,{fluid:!0,style:{marginBottom:"105px"},children:[Object(B.jsx)(u.a,{className:"g-2",children:J.map((function(e){var t=e.type,n=e.options;return Object(B.jsx)(F,{setField:function(e){return function(e,t){c(Object(f.a)(Object(f.a)({},i),{},Object(H.a)({},e,t)))}(t,e)},section:t,options:n,isSelected:function(e){return i[t]===e}})}))}),Object(B.jsx)(A.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(B.jsxs)(l.a,{children:[Object(B.jsxs)(A.a.Text,{children:["You are ",Object(B.jsx)("i",{onClick:function(){return b((function(e){return Object(f.a)(Object(f.a)({},e),{},{name:g()})}))},children:j.name}),", the ",p("skill")," ",p("class")," ",p("charm"),Object(B.jsx)("br",{}),"who wields a ",p("weapon")," and a ",p("offhand"),Object(B.jsx)("br",{}),"and wears ",p("armor")," with ",p("headgear")," and ",p("footwear")]}),Object(B.jsx)(E.a,{type:"submit",children:"Pick your foe!"})]})})]})})},z=function(e){var t=e.player,n=e.onSave,a=r.a.useState([]),i=Object(s.a)(a,2),c=i[0],u=i[1],d=function(e){return Object(B.jsx)("b",{children:t.build[e].display})};return Object(B.jsxs)(M.a,{onSubmit:function(e){e.preventDefault(),n(Object(o.a)(c))},children:[Object(B.jsx)(l.a,{fluid:!0,style:{marginBottom:c.length>0?"205px":"105px"},children:Object(B.jsx)(N.a,{size:"lg",className:"mb-2",children:k.map((function(e){return Object(B.jsx)(E.a,{onClick:function(){return c.length<5?u((function(t){return[].concat(Object(o.a)(t),[e])})):void 0},children:e.lore.name},e.lore.name)}))})}),c.length>0&&Object(B.jsx)(A.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{marginBottom:"100px"},children:Object(B.jsx)(l.a,{fluid:!0,children:Object(B.jsx)(N.a,{size:"sm",className:"mb-2",children:c.map((function(e,t){return Object(B.jsx)(E.a,{onClick:function(){return u((function(t){var n=!1;return t.filter((function(t){return n||t.lore.name!==e.lore.name||!(n=!0)}))}))},children:e.lore.name},"".concat(e.lore.name,"-").concat(t))}))})})}),Object(B.jsx)(A.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(B.jsxs)(l.a,{children:[Object(B.jsxs)(A.a.Text,{children:["You are ",Object(B.jsx)("i",{children:t.lore.name}),", the ",d("skill")," ",d("class")," ",d("charm"),Object(B.jsx)("br",{}),"who wields a ",d("weapon")," and a ",d("offhand"),Object(B.jsx)("br",{}),"and wears ",d("armor")," with ",d("headgear")," and ",d("footwear")]}),Object(B.jsx)(E.a,{type:"submit",disabled:c.length<1,children:"To Battle!"})]})})]})};var K=function(){var e=r.a.useState("buildPlayer"),t=Object(s.a)(e,2),n=t[0],a=t[1],i=r.a.useState(),c=Object(s.a)(i,2),o=c[0],l=c[1],u=r.a.useState(),d=Object(s.a)(u,2),f=d[0],j=d[1];return Object(B.jsxs)("div",{className:"App",children:["buildPlayer"===n?Object(B.jsx)(W,{onSave:function(e){l(e),a("buildEncounter")}}):null,"buildEncounter"===n&&o?Object(B.jsx)(z,{player:o,onSave:function(e){j(e),a("game")}}):null,"game"===n&&o&&f?Object(B.jsx)(C,{player:o,enemies:f}):null]})},D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function V(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(B.jsx)(r.a.StrictMode,{children:Object(B.jsx)(K,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/buildmancer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/buildmancer","/service-worker.js");D?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):V(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):V(t,e)}))}}(),I()}},[[36,1,2]]]);
//# sourceMappingURL=main.422cc548.chunk.js.map