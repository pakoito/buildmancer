(this.webpackJsonpbuildmancer=this.webpackJsonpbuildmancer||[]).push([[0],{31:function(e,t,a){},32:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),s=a.n(i),c=(a(31),a(6)),o=(a(32),a(33),a(10)),l=a(44),u=a(45),d=a(22),f=a(49),j=a(50),b=a(12),h=a(1),p=function(e){var t,a=e.enemy,n=e.isSelected,r=e.onSelect,i=e.latestAttack;return Object(h.jsx)(f.a,{bg:n?"info":void 0,children:Object(h.jsxs)(f.a.Body,{children:[Object(h.jsx)(f.a.Title,{children:a.lore.name}),Object(h.jsxs)(f.a.Text,{children:[a.lore.name,". Has ",a.stats.hp," HP and is at distance"," ",a.stats.distance]}),i&&Object(h.jsxs)(f.a.Text,{children:["Latest attack: ",i]}),Object(h.jsx)(f.a.Text,{children:"Next attack prediction:"}),(t=a.rolls[a.stats.distance-1].map((function(e){return a.effects[e]})),Object(b.a)(t).countBy((function(e){return e.display})).toArray().map((function(e,a){var n=Object(c.a)(e,2),r=n[0],i=n[1];return Object(h.jsxs)(f.a.Text,{children:["[",(i/t.length*100).toFixed(2),"%] ",r]},a)}))),Object(h.jsx)(j.a,{disabled:n,onClick:r,children:"Select"})]})})},m=a(51),y=function(e){var t=e.selectedButtons,a=e.player,n=e.onClickEffect;return Object(h.jsxs)(f.a,{children:[Object(h.jsxs)(f.a.Body,{children:[Object(h.jsx)(f.a.Title,{children:a.lore.name}),Object(h.jsx)(f.a.Subtitle,{className:"mb-2 text-muted",children:a.build.class.display}),Object(h.jsxs)(f.a.Text,{children:["Has ",a.stats.hp," HP and ",a.stats.stamina," stamina"]})]}),Object(h.jsx)(f.a.Body,{children:Object(h.jsx)(m.a,{direction:"horizontal",gap:2,children:Object.values(a.build).flatMap((function(e){return e.effects})).map((function(e,r){return Object(h.jsxs)(j.a,{active:t.has(e.display),disabled:a.stats.stamina<e.stamina,onClick:function(e){return n(r)},children:["[",Object(h.jsx)("b",{children:e.display})," ",Object(h.jsx)("i",{children:r+1}),"]",Object(h.jsx)("br",{}),"Sta: ",e.stamina," | Prio: ",e.priority]},e.display)}))})})]})};var O=a(2),x=function(e){return e.states[0]},v=function(e){return e.states[e.states.length-1]},g={"Basic:Rest":function(e,t,a){return a},"Basic:Advance":function(e,t,a){return A.changeDistance(a,a.target,-2)},"Basic:Retreat":function(e,t,a){return A.changeDistance(a,a.target,2)},"Axe:Chop":function(e,t,a){return A.attackMonster(x(t),a,3)},"Axe:Cut":function(e,t,a){return A.attackMonster(x(t),a,3)},"Hook:GetHere":B((function(e,t,a){return A.attackMonster(x(t),a,3)}),(function(e,t,a){return A.changeDistance(a,a.target,-1)})),"Monster:Swipe":function(e,t,a){return A.attackPlayer(x(t),a,2)},"Monster:Roar":function(e,t,a){return A.modifyPlayerStamina(x(t),a,-5)},"Monster:Jump":function(e,t,a){return A.changeDistance(a,e,-2)}},k={basic:[{display:"Basic",effects:[{display:"Rest",effect:"Basic:Rest",priority:4,stamina:0},{display:"Advance",effect:"Basic:Advance",priority:4,stamina:1},{display:"Retreat",effect:"Basic:Retreat",priority:4,stamina:1}]}],class:[{display:"Warrior",effects:[]},{display:"Mage",effects:[]},{display:"Rogue",effects:[]}],skill:[{display:"Sturdy",effects:[]},{display:"Nimble",effects:[]}],weapon:[{display:"Axe",effects:[{display:"Chop",effect:"Axe:Chop",priority:2,stamina:2},{display:"Cut",effect:"Axe:Cut",priority:3,stamina:2}]}],offhand:[{display:"Hook",effects:[{display:"Get over here!",effect:"Hook:GetHere",priority:4,stamina:3}]}],consumable:[{display:"Potion",effects:[]}],armor:[{display:"Heavy",effects:[]}],headgear:[{display:"Helm",effects:[]}],footwear:[{display:"Boots",effects:[]}],charm:[{display:"of Health",effects:[]}]},w=function(){return M[Math.floor(Math.random()*M.length)]},S=[{lore:{name:"Sacapuntas"},stats:{hp:25,rage:0,distance:5},rolls:[[0,1,2,1,0],[0,1,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0,0]],effects:[{display:"Swipe",priority:3,effect:"Monster:Swipe"},{display:"Roar",priority:1,effect:"Monster:Roar"},{display:"Jump",priority:2,effect:"Monster:Jump"}]},{lore:{name:"Cacahue"},stats:{hp:30,rage:0,distance:5},effects:[{display:"Swipe",priority:3,effect:"Monster:Swipe"},{display:"Roar",priority:1,effect:"Monster:Roar"},{display:"Jump",priority:2,effect:"Monster:Jump"}],rolls:[[0,0,0,1,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,2,0,0]]},{lore:{name:"Toro"},stats:{hp:22,rage:0,distance:5},effects:[{display:"Swipe",priority:3,effect:"Monster:Swipe"},{display:"Roar",priority:1,effect:"Monster:Roar"},{display:"Jump",priority:2,effect:"Monster:Jump"}],rolls:[[0,0,0,1,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,2,0,0]]}],M=["Lydan","Syrin","Ptorik","Joz","Varog","Gethrod","Hezra","Feron","Ophni","Colborn","Fintis","Gatlin","Jinto","Hagalbar","Krinn","Lenox","Revvyn","Hodus","Dimian","Paskel","Kontas","Weston","Azamarr ","Jather ","Tekren ","Jareth","Adon","Zaden","Eune ","Graff","Tez","Jessop","Gunnar","Pike","Domnhar","Baske","Jerrick","Mavrek","Riordan","Wulfe","Straus","Tyvrik ","Henndar","Favroe","Whit","Jaris","Renham","Kagran","Lassrin ","Vadim","Arlo","Quintis","Vale","Caelan","Yorjan","Khron","Ishmael","Jakrin","Fangar","Roux","Baxar","Hawke","Gatlen","Barak","Nazim","Kadric","Paquin","Kent","Moki","Rankar","Lothe","Ryven","Clawsen","Pakker","Embre","Cassian","Verssek","Dagfinn","Ebraheim","Nesso","Eldermar","Rivik","Rourke","Barton","Hemm","Sarkin","Blaiz ","Talon","Agro","Zagaroth","Turrek","Esdel","Lustros","Zenner","Baashar ","Dagrod ","Gentar","Feston","Syrana","Resha","Varin","Wren","Yuni","Talis","Kessa","Magaltie","Aeris","Desmina","Krynna","Asralyn ","Herra","Pret","Kory","Afia","Tessel","Rhiannon","Zara","Jesi","Belen","Rei","Ciscra","Temy","Renalee ","Estyn","Maarika","Lynorr","Tiv","Annihya","Semet","Tamrin","Antia","Reslyn","Basak","Vixra","Pekka ","Xavia","Beatha ","Yarri","Liris","Sonali","Razra ","Soko","Maeve","Everen","Yelina","Morwena","Hagar","Palra","Elysa","Sage","Ketra","Lynx","Agama","Thesra ","Tezani","Ralia","Esmee","Heron","Naima","Rydna ","Sparrow","Baakshi ","Ibera","Phlox","Dessa","Braithe","Taewen","Larke","Silene","Phressa","Esther","Anika","Rasy ","Harper","Indie","Vita","Drusila","Minha","Surane","Lassona","Merula","Kye","Jonna","Lyla","Zet","Orett","Naphtalia","Turi","Rhays","Shike","Hartie","Beela","Leska","Vemery ","Lunex","Fidess","Tisette","Partha"],B=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce((function(e,t){return function(a,n,r){return t(a,n,e(a,n,r))}}))},R=function(e,t,a){return Math.min(Math.max(e,t),a)},P=function(e,t,a){return e.map((function(e,n){return n===t?Object(O.a)(Object(O.a)({},e),{},{stats:Object(O.a)(Object(O.a)({},e.stats),a(e.stats))}):e}))},T=function(e){return Object.values(e.build).flatMap((function(e){return e.effects}))},A={attackMonster:function(e,t,a){return Object(O.a)(Object(O.a)({},t),{},{enemies:P(t.enemies,t.target,(function(n){var r=n.hp;return{hp:R(r-a,0,e.enemies[t.target].stats.hp)}}))})},changeDistance:function(e,t,a){return Object(O.a)(Object(O.a)({},e),{},{enemies:P(e.enemies,t,(function(e){var t=e.distance;return{distance:R(t+a,1,5)}}))})},attackPlayer:function(e,t,a){return Object(O.a)(Object(O.a)({},t),{},{player:Object(O.a)(Object(O.a)({},t.player),{},{stats:Object(O.a)(Object(O.a)({},t.player.stats),{},{hp:R(t.player.stats.hp-a,0,e.player.stats.hp)})})})},modifyPlayerStamina:function(e,t,a){return Object(O.a)(Object(O.a)({},t),{},{player:Object(O.a)(Object(O.a)({},t.player),{},{stats:Object(O.a)(Object(O.a)({},t.player.stats),{},{stamina:R(t.player.stats.stamina+a,0,e.player.stats.stamina)})})})}};var C=function(e){var t=e.handlePlayerEffect,a=e.setSelected,r=e.game,i=v(r),s=i.player,f=i.enemies,j=i.target,m=i.lastAttacks,O=T(s),x=function(e){var t=Object(n.useState)(new Set),a=Object(c.a)(t,2),r=a[0],i=a[1],s=function(e){var t=e.key;i((function(e){return new Set([].concat(Object(o.a)(e),[t]))}))},l=Object(n.useCallback)((function(t){var a=t.key;i((function(e){return new Set(Object(o.a)(e).filter((function(e){return e!==a})))})),e(a)}),[e]);return Object(n.useEffect)((function(){return window.addEventListener("keydown",s),window.addEventListener("keyup",l),function(){window.removeEventListener("keydown",s),window.removeEventListener("keyup",l)}}),[l]),r}((function(e){var a=parseInt(e);a>0&&a<=O.length&&t(a-1)})),g=new Set(Object(o.a)(x).flatMap((function(e){var t=parseInt(e);return t>0&&t<=O.length?[O[t-1].display]:[]})));return Object(h.jsx)(l.a,{fluid:!0,children:Object(h.jsx)(u.a,{className:"justify-content-center align-items-flex-start",children:Object(h.jsxs)(d.a,{sm:12,md:8,children:[Object(h.jsx)(u.a,{children:Object(h.jsx)(d.a,{children:Object(h.jsx)(y,{player:s,onClickEffect:t,selectedButtons:g})})}),Object(h.jsx)(u.a,{className:"mt-2 g-2",children:f.map((function(e,t){return Object(h.jsx)(d.a,{xs:6,md:4,children:Object(h.jsx)(p,{enemy:e,latestAttack:Object(b.a)(m).filter((function(e){var a=Object(c.a)(e,2),n=a[0];a[1];return n===t})).map((function(e){return e[1]})).first(),isSelected:t===j,onSelect:function(){return a(t)}},t)},t)}))})]})})})},H=a(7),E=a(48),L=a(47),J=a(46);var N=Object.entries(k).map((function(e){var t=Object(c.a)(e,2);return{type:t[0],options:t[1].map((function(e,t){return{display:e.display,value:t}}))}})),D=function(e){var t=e.isSelected,a=e.section,r=e.options,i=e.setField,s=function(e){var t=Object(n.useRef)(null);return[function(){return t.current.scrollIntoView(e)},t]}({behavior:"smooth",block:"start"}),o=Object(c.a)(s,2),l=o[0],d=o[1];return Object(h.jsxs)(u.a,{children:[Object(h.jsx)(E.a.Label,{children:a}),Object(h.jsx)("br",{}),Object(h.jsx)(J.a,{size:"lg",className:"mb-2",children:r.map((function(e){var n=e.display,r=e.value;return Object(h.jsx)(j.a,{name:a,id:"".concat(r),variant:t(r)?"primary":"secondary",onClick:function(){i(r),l()},children:n},r)}))}),Object(h.jsx)("div",{id:"".concat(a,"-scroll"),ref:d})]})},F=function(e){var t=e.onSave,a=r.a.useState(N.reduce((function(e,t){var a=t.type,n=t.options;return Object(O.a)(Object(O.a)({},e),{},Object(H.a)({},a,n[0].value))}),{})),n=Object(c.a)(a,2),i=n[0],s=n[1],o=r.a.useState({name:w(),age:Math.floor(50*Math.random()+16)}),d=Object(c.a)(o,2),f=d[0],b=d[1],p=function(e){return Object(h.jsx)("b",{children:k[e][i[e]].display})};return Object(h.jsx)(E.a,{onSubmit:function(e){e.preventDefault(),t({id:"p-1",lore:f,stats:{hp:10,stamina:8,staminaPerTurn:2},build:Object.entries(i).reduce((function(e,t){var a=Object(c.a)(t,2),n=a[0],r=a[1];return Object(O.a)(Object(O.a)({},e),{},Object(H.a)({},n,k[n][r]))}),{basic:k.basic[0]})})},children:Object(h.jsxs)(l.a,{fluid:!0,style:{marginBottom:"105px"},children:[Object(h.jsx)(u.a,{className:"g-2",children:N.map((function(e){var t=e.type,a=e.options;return Object(h.jsx)(D,{setField:function(e){return function(e,t){s(Object(O.a)(Object(O.a)({},i),{},Object(H.a)({},e,t)))}(t,e)},section:t,options:a,isSelected:function(e){return i[t]===e}},t)}))}),Object(h.jsx)(L.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(h.jsxs)(l.a,{children:[Object(h.jsxs)(L.a.Text,{children:["You are ",Object(h.jsx)("i",{onClick:function(){return b((function(e){return Object(O.a)(Object(O.a)({},e),{},{name:w()})}))},children:f.name}),", the ",p("skill")," ",p("class")," ",p("charm"),Object(h.jsx)("br",{}),"who wields a ",p("weapon")," and a ",p("offhand"),Object(h.jsx)("br",{}),"and wears ",p("armor")," with ",p("headgear")," and ",p("footwear")]}),Object(h.jsx)(j.a,{type:"submit",children:"Pick your foe!"})]})})]})})},W=function(e){var t=e.player,a=e.onSave,n=r.a.useState([]),i=Object(c.a)(n,2),s=i[0],u=i[1],d=function(e){return Object(h.jsx)("b",{children:t.build[e].display})};return Object(h.jsxs)(E.a,{onSubmit:function(e){e.preventDefault(),a(Object(o.a)(s))},children:[Object(h.jsx)(l.a,{fluid:!0,style:{marginBottom:s.length>0?"205px":"105px"},children:Object(h.jsx)(J.a,{size:"lg",className:"mb-2",children:S.map((function(e){return Object(h.jsx)(j.a,{onClick:function(){return s.length<5?u((function(t){return[].concat(Object(o.a)(t),[e])})):void 0},children:e.lore.name},e.lore.name)}))})}),s.length>0&&Object(h.jsx)(L.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{marginBottom:"100px"},children:Object(h.jsx)(l.a,{fluid:!0,children:Object(h.jsx)(J.a,{size:"sm",className:"mb-2",children:s.map((function(e,t){return Object(h.jsx)(j.a,{onClick:function(){return u((function(t){var a=!1;return t.filter((function(t){return a||t.lore.name!==e.lore.name||!(a=!0)}))}))},children:e.lore.name},"".concat(e.lore.name,"-").concat(t))}))})})}),Object(h.jsx)(L.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(h.jsxs)(l.a,{children:[Object(h.jsxs)(L.a.Text,{children:["You are ",Object(h.jsx)("i",{children:t.lore.name}),", the ",d("skill")," ",d("class")," ",d("charm"),Object(h.jsx)("br",{}),"who wields a ",d("weapon")," and a ",d("offhand"),Object(h.jsx)("br",{}),"and wears ",d("armor")," with ",d("headgear")," and ",d("footwear")]}),Object(h.jsx)(j.a,{type:"submit",disabled:s.length<1,children:"To Battle!"})]})})]})},z=new(a(26).Chance);var K=function(){var e=r.a.useState("buildPlayer"),t=Object(c.a)(e,2),a=t[0],n=t[1],i=r.a.useState(),s=Object(c.a)(i,2),l=s[0],u=s[1],d=r.a.useState(),f=Object(c.a)(d,2),j=f[0],p=f[1],m=r.a.useState(),y=Object(c.a)(m,2),x=y[0],k=y[1];if(!x&&l&&j){var w=function(e,t){return{states:[{player:e,enemies:t,target:0,lastAttacks:[]}]}}(l,j);k(w)}return Object(h.jsxs)("div",{className:"App",children:["buildPlayer"===a?Object(h.jsx)(F,{onSave:function(e){u(e),n("buildEncounter")}}):null,"buildEncounter"===a&&l?Object(h.jsx)(W,{player:l,onSave:function(e){p(e),n("game")}}):null,"game"===a&&x?Object(h.jsx)(C,{game:x,setSelected:function(e){return k((a=e,(t=x).states[t.states.length-1].target=a,{states:Object(o.a)(t.states)}));var t,a},handlePlayerEffect:function(e){return k(function(e,t,a){var n=v(e),r=n.enemies,i=n.player,s=T(i)[t],l=Object(b.a)(r).map((function(e,t){return[t,e.effects[e.rolls[e.stats.distance-1][a.natural({min:0,max:e.rolls[e.stats.distance-1].length-1})]]]})).concat([["Player",s]]).sortBy((function(e){var t=Object(c.a)(e,2);return t[0],t[1].priority})),u=A.modifyPlayerStamina(e.states[0],v(e),i.stats.staminaPerTurn-s.stamina);u.lastAttacks=l.map((function(e){var t=Object(c.a)(e,2);return[t[0],t[1].effect]})).toArray();var d=l.reduce((function(t,a){var n=Object(c.a)(a,2),r=n[0],i=n[1];return g[i.effect](r,e,t)}),u);return Object(O.a)(Object(O.a)({},e),{},{states:[].concat(Object(o.a)(e.states),[d])})}(x,e,z))}}):null]})},G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function V(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,52)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),i(e),s(e)}))};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(K,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/buildmancer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/buildmancer","/service-worker.js");G?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):V(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):V(t,e)}))}}(),I()}},[[42,1,2]]]);
//# sourceMappingURL=main.240fc934.chunk.js.map