(this.webpackJsonpbuildmancer=this.webpackJsonpbuildmancer||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return v}));var a=n(7),r=n(2),c=n(8),i=n(14),o=n(5),s=n(20),u=n(9),l=function(e,t,n){return Math.min(Math.max(e,t),n)};function f(e,t,n){var a=new s.Chance(n);return Object(c.a)(Array(e).keys()).map((function(e){return Object(c.a)(Array(t).keys()).map((function(e){return a.floating({min:0,max:1,fixed:2})}))}))}var d=function(e,t,n){return e.map((function(e,a){return a===t?Object(r.a)(Object(r.a)({},e),n(e)):e}))},p=function(e){return Object.values(e.build).flatMap((function(e){var t;return null!==(t=e.passive)&&void 0!==t?t:[]})).map((function(e){return o.i[e]}))},b=function(e){return Object.values(e.build).flatMap((function(e){var t;return null!==(t=e.effects)&&void 0!==t?t:[]}))},j={attackMonster:function(e,t,n,a){return Object(r.a)(Object(r.a)({},t),{},{enemies:d(t.enemies,n,(function(t){var r=t.hp;return{hp:l(r-a,0,e.enemies[n].hp)}}))})},changeDistance:function(e,t,n){return Object(r.a)(Object(r.a)({},e),{},{enemies:d(e.enemies,t,(function(e){var t=e.distance;return{distance:l(t+n,1,5)}}))})},attackPlayer:function(e,t,n){return Object(r.a)(Object(r.a)({},t),{},{player:Object(r.a)(Object(r.a)({},t.player),{},{hp:l(t.player.hp-n,0,e.player.hp)})})},modifyPlayerStamina:function(e,t,n){return Object(r.a)(Object(r.a)({},t),{},{player:Object(r.a)(Object(r.a)({},t.player),{},{stamina:l(t.player.stamina+n,0,e.player.stamina)})})},addEotEffect:function(e,t){var n;return Object(r.a)(Object(r.a)({},e),{},{eot:[].concat(Object(c.a)(null!==(n=e.eot)&&void 0!==n?n:[]),[t])})},addBotEffect:function(e,t){var n;return Object(r.a)(Object(r.a)({},e),{},{bot:[].concat(Object(c.a)(null!==(n=e.eot)&&void 0!==n?n:[]),[t])})},addEnemy:function(e,t,n,a){return e.enemies.length<5?[Object(r.a)(Object(r.a)({},e),{},{enemies:[].concat(Object(c.a)(e.enemies),[n])}),Object(r.a)(Object(r.a)({},t),{},{enemies:[].concat(Object(c.a)(t.enemies),[a])})]:[e,t]}};function h(e,t,n,r,c,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:20,s=p(e).reduce((function(e,t){var n=Object(a.a)(e,2);return t(n[0],n[1])}),[t,r]),l=Object(a.a)(s,2),d=l[0],b=l[1];return{player:e,enemies:n,states:[{player:d,enemies:b,target:0,lastAttacks:[]}],rng:f(c,o,i),turns:c,id:Object(u.d)([e,n,c,i]),seed:i}}var m=function(e,t,n){return t.reduce((function(t,n){return n("Player",e,t)}),n)},O=function(e,t,n){return e.reduce((function(e,t){var n=Object(a.a)(e,2),r=n[0],c=n[1],i=t.effect,s=t.origin,u=t.parameters;return o.e[i](u)(s,r,c)}),[t,n])},y=function(e,t){var n=Object(o.f)(e),s=n.enemies,u=n.player,l=n.bot,f=n.eot,d=b(e.player)[t],p=function(e){return Object.values(e.build).flatMap((function(e){var t;return null!==(t=e.bot)&&void 0!==t?t:[]})).map((function(e){return o.c[e]}))}(e.player),h=j.modifyPlayerStamina(e.states[0],Object(o.f)(e),u.staminaPerTurn-d.stamina),y=O(null!==l&&void 0!==l?l:[],e,h),v=Object(a.a)(y,2),g=v[0],x=v[1],k=m(g,p,x),w=function(e,t){return function(n,a){var r=Object(c.a)(e.rng[t]);return Math.floor((a-n)*r.pop()+n)}}(e,e.states.length-1),S=Object(i.a)(e.enemies).zip(Object(i.a)(s)).map((function(e,t){var n=Object(a.a)(e,2),r=n[0],c=n[1];return[t,c.hp>0?r.effects[r.rolls[c.distance-1][w(0,r.rolls[c.distance-1].length)]]:o.b]})).concat([["Player",d]]).sortBy((function(e){var t=Object(a.a)(e,2);t[0];return t[1].priority})).reduce((function(e,t){var n,r=Object(a.a)(t,2),i=r[0],s=r[1],u=Object(a.a)(e,2),l=u[0],f=u[1],d="Player"===i?k.target:i;return new Set(Object(c.a)(s.range)).has(null===(n=k.enemies[d])||void 0===n?void 0:n.distance)?[o.c[s.effect](i,g,l),[].concat(Object(c.a)(f),[[i,s.display]])]:[l,[].concat(Object(c.a)(f),[[i,"".concat(s.display," \u274c\u274cWHIFF\u274c\u274c")]])]}),[k,[]]),A=Object(a.a)(S,2),B=A[0],M=A[1],F=Object(r.a)(Object(r.a)({},B),{},{lastAttacks:M}),T=function(e){return Object.values(e.build).flatMap((function(e){var t;return null!==(t=e.eot)&&void 0!==t?t:[]})).map((function(e){return o.c[e]}))}(e.player),P=m(g,T,F),E=O(null!==f&&void 0!==f?f:[],g,P),C=Object(a.a)(E,2),R=C[0],H=C[1];return Object(r.a)(Object(r.a)({},R),{},{states:[].concat(Object(c.a)(R.states),[H])})},v=function(e,t){return e.states[e.states.length-1].target=t,Object(r.a)(Object(r.a)({},e),{},{states:Object(c.a)(e.states)})}},23:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return h}));var a=n(8),r=n(2),c=n(7);function i(e){function t(e,t){if((e=e||{}).mutationFunction=e.mutationFunction||t.mutationFunction,e.crossoverFunction=e.crossoverFunction||t.crossoverFunction,e.fitnessFunction=e.fitnessFunction||t.fitnessFunction,e.doesABeatBFunction=e.doesABeatBFunction||t.doesABeatBFunction,e.population=e.population||t.population,e.population.length<=0)throw Error("population must be an array and contain at least 1 phenotypes");if(e.populationSize=e.populationSize||t.populationSize,e.populationSize<=0)throw Error("populationSize must be greater than 0");return e}var n=t(e,{mutationFunction:function(e){return e},crossoverFunction:function(e,t){return[e,t]},fitnessFunction:function(e){return 0},doesABeatBFunction:void 0,population:[],populationSize:100});function a(e){return JSON.parse(JSON.stringify(e))}function r(e){return n.mutationFunction(a(e))}function c(e){e=a(e);var t=n.population[Math.floor(Math.random()*n.population.length)];return t=a(t),n.crossoverFunction(e,t)[0]}return{evolve:function(e){return e&&(n=t(e,n)),function(){for(var e=n.population.length;n.population.length<n.populationSize;){var t=Math.floor(Math.random()*e);n.population.push(r(a(n.population[Math.floor(t)])))}}(),function(){for(var e=0;e<n.population.length;e++){var t=Math.floor(Math.random()*n.population.length),a=n.population[t];n.population[t]=n.population[e],n.population[e]=a}}(),function(){for(var e,t,a=[],i=0;i<n.population.length-1;i+=2){var o=n.population[i],s=n.population[i+1];a.push(o),e=o,t=s,(n.doesABeatBFunction?n.doesABeatBFunction(e,t):n.fitnessFunction(e)>=n.fitnessFunction(t))?Math.random()<.5?a.push(r(o)):a.push(c(o)):a.push(s)}n.population=a}(),this},best:function(){var e=this.scoredPopulation();return a(e.reduce((function(e,t){return e.score>=t.score?e:t}),e[0]).phenotype)},bestScore:function(){return n.fitnessFunction(this.best())},population:function(){return a(this.config().population)},scoredPopulation:function(){return this.population().map((function(e){return{phenotype:a(e),score:n.fitnessFunction(e)}}))},config:function(){return a(n)},clone:function(e){return i(t(e,t(this.config(),n)))}}}var o=n(10),s=n(20),u=n.n(s),l=n(5),f=n(30),d=n.n(f),p=n(14),b={playerSeed:"Miau",weights:{monster:.7,player:.125,turn:.05,stamina:.075},debug:!1},j=function(e){var t=Object(p.a)(e).maxBy((function(e){return e.score})),n=Object(l.f)(t.phenotype);return"BEST BY ".concat(t.score," in ").concat(t.phenotype.states.length-1," turns\n")+d.a.render([n.lastAttacks.flatMap((function(e){var n=Object(c.a)(e,2),a=n[0],r=n[1];return["Player"===a?"Player":"[".concat(a,"] ").concat(t.phenotype.enemies[a].lore.name),r]})),Object(p.a)(t.phenotype.enemies).zip(Object(p.a)(n.enemies)).flatMap((function(e,t){var n=Object(c.a)(e,2),a=n[0],r=n[1];return["[".concat(t,"] ").concat(a.lore.name),r]})).toArray(),n.player])};function h(e,t,n){for(var s=Object(r.a)(Object(r.a)({},b),n),f=Object(a.a)(Array(t).keys()),d=new u.a(s.playerSeed),p=Object(o.d)(e.player),j={mutationFunction:function(e){var t=Object(l.f)(e),n=t.enemies.reduce((function(e,t){return e+t.hp}),0);if(0===t.player.hp||0===n)return e;for(var a=e;6===d.d6()||(null!==(r=null===(i=Object(l.f)(a).enemies[Object(l.f)(a).target])||void 0===i?void 0:i.hp)&&void 0!==r?r:0)<=0;){var r,i;a=Object(o.e)(a,d.natural({min:0,max:Object(l.f)(a).enemies.length-1}))}var s=Object(l.f)(a),u=p.map((function(e,t){return[e,t]})).filter((function(e){var t=Object(c.a)(e,2),n=t[0];t[1];return n.stamina>s.player.stamina})).map((function(e){var t=Object(c.a)(e,2);t[0];return t[1]}));return a=Object(o.c)(a,d.natural({min:0,max:p.length-1,exclude:u}))},fitnessFunction:function(e){var t=Object(l.f)(e),n=t.enemies.reduce((function(e,t){return e+t.hp}),0),a=t.player.hp,r=t.player.stamina,c=e.states[0].player.hp,i=e.states[0].player.hp,o=e.states[0].enemies.reduce((function(e,t){return e+t.hp}),0),u=(o-n)/o,f=a/c,d=(e.turns-e.states.length)/e.turns,p=r/i,b=u*s.weights.monster+f*s.weights.player+d*s.weights.turn+p*s.weights.stamina;return s.debug&&console.log("MH: ".concat(n," | PH: ").concat(a," | TR: ").concat(e.states.length,"\nFitness: ").concat(b," | MF: ").concat(u," | PF: ").concat(f," | SF: ").concat(p," | TF: ").concat(d,"\nWeights: ").concat(JSON.stringify(s.weights))),b},population:f.map((function(t){return e})),populationSize:t},h=(null===n||void 0===n?void 0:n.turns)?null===n||void 0===n?void 0:n.turns:e.turns,m=new i(j),O=0;O<h;O++)m=m.evolve();return m.scoredPopulation()}},40:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var a=n(22),r=n.n(a),c=n(33),i=n(2),o=n(41),s=n.n(o),u=n(36),l=n(30),f=n.n(l),d=n(5),p=n(23),b=n(37),j=n(48),h=n(42),m=n(43),O=n.n(m);b.a.plugin(j.a);var y=function(e){var t=Object(i.a)(Object(i.a)({},e),{},{enemies:e.enemies.map((function(e){return d.d[e][0].lore.name})),basic:d.a.basic[e.basic].display,class:d.a.class[e.class].display,weapon:d.a.weapon[e.weapon].display,skill:d.a.skill[e.skill].display,offhand:d.a.offhand[e.offhand].display,consumable:d.a.consumable[e.consumable].display,armor:d.a.armor[e.armor].display,headgear:d.a.headgear[e.headgear].display,footwear:d.a.footwear[e.footwear].display,charm:d.a.charm[e.charm].display});return f.a.render(t)},v=function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new b.a(t),e.next=3,a.createIndex({index:{fields:["score"]}});case 3:return e.next=5,Promise.all(n.flatMap(function(){var e=Object(c.a)(r.a.mark((function e(t){var n,c,o,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.phenotype.states[t.phenotype.states.length-1],c=n.player.hp,o=n.enemies.reduce((function(e,t){return t.hp+e}),0),s=c>0&&o<=0?"W":"L",e.next=6,a.get(t.phenotype.id).catch((function(){return null}));case 6:return u=e.sent,e.abrupt("return",null==u?Object(i.a)({_id:"##".concat(t.phenotype.id,"##").concat(s,"##").concat(O()(t.phenotype.states),"##")},t):[]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return o=e.sent,e.next=8,a.bulkDocs(o).catch((function(e){return console.log(JSON.stringify(e))}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,i,o,s,l,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.json,a=t.iterations,c=t.seed,i=t.output,o=t.db,s=JSON.parse(Object(u.readFileSync)(n).toString()),console.log("\n==========\nCONFIG\n==========\n".concat(f.a.render({seed:c,iterations:a}),"\n").concat(y(s),"\n==========\n")),l=s.gameOptions||{},d=Object(p.a)(Object(h.a)(s),a,l),console.log("\n==========\nRESULT\n==========\n".concat(Object(p.b)(d),"\n==========\n")),null!=i&&(console.log("Writing to ".concat(i,"...")),Object(u.writeFileSync)(i,JSON.stringify(d,null,2))),null==o){e.next=11;break}return console.log("Storing in ".concat(o,"...")),e.next=11,v(o,d);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(s()(e.argv.slice(2)))}).call(this,n(27))},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(10),r=n(5),c=function(e){return Object(a.b)({id:"1",lore:{name:"XXX",age:123},build:{basic:r.a.basic[e.basic],class:r.a.class[e.class],weapon:r.a.weapon[e.weapon],skill:r.a.skill[e.skill],offhand:r.a.offhand[e.offhand],consumable:r.a.consumable[e.consumable],armor:r.a.armor[e.armor],headgear:r.a.headgear[e.headgear],footwear:r.a.footwear[e.footwear],charm:r.a.charm[e.charm]}},{hp:e.player.hp,stamina:e.player.stamina,staminaPerTurn:e.player.staminaPerTurn},e.enemies.map((function(e){return r.d[e][0]})),e.enemies.map((function(e){return r.d[e][1]})),e.turns,e.seed)}},5:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return O})),n.d(t,"i",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"h",(function(){return g})),n.d(t,"d",(function(){return x}));var a=n(8),r=n(2),c=n(7),i=n(20),o=n(40),s=n(10),u=function(e){return e.states[0]},l=function(e){return e.states[e.states.length-1]},f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return function(n,a,r){return t(n,a,e(n,a,r))}}))},d=function(){return(new i.Chance).pickone(x)},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.a)(new Set(t))},b=p(0,1,2,3,4),j=b,h={display:"DEAD",priority:4,effect:"Monster:Dead",range:p()},m={"Monster:Dead":function(e,t,n){return n},"Basic:Rest":function(e,t,n){return n},"Basic:Advance":function(e,t,n){return s.a.changeDistance(n,n.target,-2)},"Basic:Retreat":function(e,t,n){return s.a.changeDistance(n,n.target,2)},"Axe:Chop":function(e,t,n){return s.a.attackMonster(u(t),n,n.target,3)},"Axe:Cut":f((function(e,t,n){return s.a.attackMonster(u(t),n,n.target,3)}),(function(e,t,n){return s.a.addEotEffect(n,{effect:"Target:Bleed",origin:e,parameters:{lifespan:3,target:n.target}})})),"Hook:GetHere":f((function(e,t,n){return s.a.attackMonster(u(t),n,n.target,3)}),(function(e,t,n){return s.a.changeDistance(n,n.target,-1)})),"Monster:Swipe":function(e,t,n){return s.a.attackPlayer(u(t),n,2)},"Monster:Roar":function(e,t,n){return s.a.modifyPlayerStamina(u(t),n,-5)},"Monster:Jump":function(e,t,n){return s.a.changeDistance(n,e,-2)},"Monster:SummonToro":function(e,t,n){return s.a.addEotEffect(n,{effect:"Monster:Summon",origin:e,parameters:{enemy:1}})},"BootsOfFlight:EOT":function(e,t,n){return n.enemies.reduce((function(e,t,n){return s.a.changeDistance(e,n,-2)}),n)}},O={"Target:Bleed":function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return function(n){return function(a,r,i){var o=e(n)(a,r,i),s=Object(c.a)(o,2),u=s[0],l=s[1];return t(n)(a,u,l)}}}))}((function(e){var t=e.target;return function(e,n,a){return[n,"Player"===t?s.a.attackPlayer(u(n),a,1):s.a.attackMonster(u(n),a,t,3)]}}),(function(e){var t=e.lifespan;return function(e,n,a){return[n,t>0?s.a.addEotEffect(a,{effect:"Target:Bleed",origin:e,parameters:Object(r.a)(Object(r.a)({},o.a),{},{lifespan:t-1})}):a]}})),"Monster:Summon":function(e){var t=e.enemy;return function(e,n,a){return s.a.addEnemy(n,a,x[t][0],x[t][1])}}},y={"Charm:ofHealth":function(e,t){return[Object(r.a)(Object(r.a)({},e),{},{hp:e.hp+10}),t]},"Charm:ofHaste":function(e,t){return[Object(r.a)(Object(r.a)({},e),{},{staminaPerTurn:e.staminaPerTurn+1}),t]},"Charm:ofResilience":function(e,t){return[Object(r.a)(Object(r.a)({},e),{},{stamina:e.stamina+10}),t]}},v={basic:[{display:"Basic",effects:[{display:"Rest",effect:"Basic:Rest",priority:4,stamina:0,range:j},{display:"Advance",effect:"Basic:Advance",priority:4,stamina:1,range:j},{display:"Retreat",effect:"Basic:Retreat",priority:4,stamina:1,range:j}]}],class:[{display:"Warrior"},{display:"Mage"},{display:"Rogue"}],skill:[{display:"Sturdy"},{display:"Nimble"}],weapon:[{display:"Axe",effects:[{display:"Chop",effect:"Axe:Chop",priority:2,stamina:2,range:p(0,1)},{display:"Cut",effect:"Axe:Cut",priority:3,stamina:2,range:p(0)}]}],offhand:[{display:"Hook",effects:[{display:"Get over here!",effect:"Hook:GetHere",priority:4,stamina:3,range:p(2,3,4)}]}],consumable:[{display:"Potion"}],armor:[{display:"Heavy"}],headgear:[{display:"Helm"}],footwear:[{display:"Boots of Flight",eot:["BootsOfFlight:EOT"]}],charm:[{display:"of Health",passive:"Charm:ofHealth"},{display:"of Haste",passive:"Charm:ofHaste"},{display:"of Resilience",passive:"Charm:ofResilience"}]},g=function(){return k[Math.floor(Math.random()*k.length)]},x=[[{lore:{name:"Sacapuntas"},rolls:[[0,1,2,1,0],[0,1,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0,0]],effects:[{display:"Swipe",priority:3,effect:"Monster:Swipe",range:p(0,1)},{display:"Roar",priority:1,effect:"Monster:Roar",range:b},{display:"Jump",priority:2,effect:"Monster:Jump",range:p(2,3,4)}]},{hp:25,rage:0,distance:4}],[{lore:{name:"Toro"},effects:[{display:"Swipe",priority:3,effect:"Monster:Swipe",range:b},{display:"Jump",priority:2,effect:"Monster:Jump",range:p(2,3,4)}],rolls:[[0,0,0,0,0],[0,0,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0]]},{hp:22,rage:0,distance:4}],[{lore:{name:"Summoner"},effects:[{display:"Swipe",priority:3,effect:"Monster:Swipe",range:p(0,1)},{display:"Jump",priority:3,effect:"Monster:Jump",range:b},{display:"Summon Toro",priority:4,effect:"Monster:SummonToro",range:p(2,3,4)}],rolls:[[0,0,0,0,0],[1,0,0,0,0],[1,1,2,0,0],[1,1,2,0,0],[1,2,2,0,0]]},{hp:30,rage:0,distance:4}]],k=["Lydan","Syrin","Ptorik","Joz","Varog","Gethrod","Hezra","Feron","Ophni","Colborn","Fintis","Gatlin","Jinto","Hagalbar","Krinn","Lenox","Revvyn","Hodus","Dimian","Paskel","Kontas","Weston","Azamarr ","Jather ","Tekren ","Jareth","Adon","Zaden","Eune ","Graff","Tez","Jessop","Gunnar","Pike","Domnhar","Baske","Jerrick","Mavrek","Riordan","Wulfe","Straus","Tyvrik ","Henndar","Favroe","Whit","Jaris","Renham","Kagran","Lassrin ","Vadim","Arlo","Quintis","Vale","Caelan","Yorjan","Khron","Ishmael","Jakrin","Fangar","Roux","Baxar","Hawke","Gatlen","Barak","Nazim","Kadric","Paquin","Kent","Moki","Rankar","Lothe","Ryven","Clawsen","Pakker","Embre","Cassian","Verssek","Dagfinn","Ebraheim","Nesso","Eldermar","Rivik","Rourke","Barton","Hemm","Sarkin","Blaiz ","Talon","Agro","Zagaroth","Turrek","Esdel","Lustros","Zenner","Baashar ","Dagrod ","Gentar","Feston","Syrana","Resha","Varin","Wren","Yuni","Talis","Kessa","Magaltie","Aeris","Desmina","Krynna","Asralyn ","Herra","Pret","Kory","Afia","Tessel","Rhiannon","Zara","Jesi","Belen","Rei","Ciscra","Temy","Renalee ","Estyn","Maarika","Lynorr","Tiv","Annihya","Semet","Tamrin","Antia","Reslyn","Basak","Vixra","Pekka ","Xavia","Beatha ","Yarri","Liris","Sonali","Razra ","Soko","Maeve","Everen","Yelina","Morwena","Hagar","Palra","Elysa","Sage","Ketra","Lynx","Agama","Thesra ","Tezani","Ralia","Esmee","Heron","Naima","Rydna ","Sparrow","Baakshi ","Ibera","Phlox","Dessa","Braithe","Taewen","Larke","Silene","Phressa","Esther","Anika","Rasy ","Harper","Indie","Vita","Drusila","Minha","Surane","Lassona","Merula","Kye","Jonna","Lyla","Zet","Orett","Naphtalia","Turi","Rhays","Shike","Hartie","Beela","Leska","Vemery ","Lunex","Fidess","Tisette","Partha"]},54:function(e,t,n){},55:function(e,t,n){},82:function(e,t){},88:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),i=n.n(c),o=(n(54),n(2)),s=n(8),u=n(7),l=(n(55),n(56),n(92)),f=n(93),d=n(44),p=n(97),b=n(98),j=n(14),h=n(1),m=function(e){var t,n=e.enemy,a=e.enemyStats,r=e.isSelected,c=e.onSelect,i=e.latestAttack,o=e.canAct;return Object(h.jsx)(p.a,{bg:r?"info":void 0,children:Object(h.jsxs)(p.a.Body,{children:[Object(h.jsxs)(p.a.Title,{children:[n.lore.name," ",a.hp>0?"":Object(h.jsx)("b",{children:"\ud83d\udc80DEAD\ud83d\udc80"})]}),Object(h.jsxs)(p.a.Text,{children:["\u2764:",a.hp," \ud83c\udff9:",a.distance]}),i&&Object(h.jsxs)(p.a.Text,{children:["Latest attack: ",i]}),Object(h.jsxs)(p.a.Text,{children:["Next attack prediction:",Object(h.jsx)("br",{}),(t=n.rolls[a.distance-1].map((function(e){return n.effects[e]})),Object(j.a)(t).countBy((function(e){return e.display})).toArray().map((function(e,n){var a=Object(u.a)(e,2),r=a[0],c=a[1],i=t.find((function(e){return e.display===r})),o=i.range,s=i.priority;return Object(h.jsxs)(h.Fragment,{children:["[",(c/t.length*100).toFixed(2),"%] ",r," \u23f1:",s," \ud83c\udff9:",5===o.length?"Any":o.map((function(e){return e+1})).join(","),Object(h.jsx)("br",{},n)]})}))),Object(h.jsx)("br",{})]}),o&&Object(h.jsx)(b.a,{disabled:r,onClick:c,children:"Select"})]})})},O=n(99),y=function(e){var t=e.selectedButtons,n=e.player,a=e.playerStats,r=e.onClickEffect,c=e.canAct,i=e.lastAction;return Object(h.jsxs)(p.a,{children:[Object(h.jsxs)(p.a.Body,{children:[Object(h.jsxs)(p.a.Title,{children:[n.lore.name,a.hp>0?"":Object(h.jsx)("b",{children:" \ud83d\udc80DEAD\ud83d\udc80 "})]}),Object(h.jsx)(p.a.Subtitle,{className:"mb-2 text-muted",children:n.build.class.display}),Object(h.jsxs)(p.a.Text,{children:[a.hp," \u2764 ",a.stamina," \ud83d\udcaa"]}),i&&Object(h.jsxs)(p.a.Text,{children:["Last action: ",i]})]}),c&&Object(h.jsx)(p.a.Body,{children:Object(h.jsx)(O.a,{direction:"horizontal",gap:2,children:Object.values(n.build).flatMap((function(e){var t;return null!==(t=e.effects)&&void 0!==t?t:[]})).map((function(e,n){return Object(h.jsxs)("div",{children:[Object(h.jsxs)(b.a,{active:t.has(e.display),disabled:a.stamina<e.stamina,onClick:function(e){return r(n)},children:["[",Object(h.jsx)("i",{children:n+1}),"] ",Object(h.jsx)("b",{children:e.display})]},e.display),Object(h.jsxs)(p.a.Text,{children:["\ud83d\udcaa:",e.stamina," \u23f1:",e.priority,Object(h.jsx)("br",{}),"\ud83c\udff9:",5===e.range.length?"Any":e.range.map((function(e){return e+1})).join(",")]})]})}))})})]})};var v=n(10),g=n(5),x=function(e){var t,n=e.handlePlayerEffect,r=e.setSelected,c=e.game,i=e.solveGame,o=e.undo,O=e.redo,x=e.hint,k=c.player,w=c.enemies,S=Object(g.f)(c),A=S.player,B=S.enemies,M=S.target,F=S.lastAttacks,T=Object(v.d)(k),P=B.reduce((function(e,t){return t.hp+e}),0),E=A.hp>0,C=P>0,R=c.states.length<=c.turns,H=E&&C&&R,D=function(e){var t=Object(a.useState)(new Set),n=Object(u.a)(t,2),r=n[0],c=n[1],i=function(e){var t=e.key;c((function(e){return new Set([].concat(Object(s.a)(e),[t]))}))},o=Object(a.useCallback)((function(t){var n=t.key;c((function(e){return new Set(Object(s.a)(e).filter((function(e){return e!==n})))})),e(n)}),[e]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",i),window.addEventListener("keyup",o),function(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",o)}}),[o]),r}((function(e){if(H){var t=parseInt(e);if(t>0&&t<=T.length){if(!(T[t-1].stamina<=A.stamina))return;n(t-1)}}})),L=new Set(Object(s.a)(D).flatMap((function(e){var t=parseInt(e);return t>0&&t<=T.length?[T[t-1].display]:[]})));return Object(h.jsx)(l.a,{fluid:!0,children:Object(h.jsx)(f.a,{className:"justify-content-center align-items-flex-start",children:Object(h.jsxs)(d.a,{sm:12,md:8,children:[Object(h.jsx)(f.a,{children:Object(h.jsxs)(p.a.Title,{children:["Turn ",c.states.length," out of ",c.turns," ",E?C?"":Object(h.jsx)("b",{children:"\ud83c\udf89\ud83c\udf89VICTORY\ud83c\udf89\ud83c\udf89"}):Object(h.jsx)("b",{children:"\u274c\u274cDEFEAT\u274c\u274c"})]})}),Object(h.jsx)(f.a,{children:Object(h.jsx)(d.a,{children:Object(h.jsx)(y,{player:k,playerStats:A,onClickEffect:n,selectedButtons:L,lastAction:(null!==(t=F.find((function(e){return"Player"===e[0]})))&&void 0!==t?t:[void 0,void 0])[1],canAct:H})})}),Object(h.jsx)(f.a,{className:"mt-2 g-2",children:Object(j.a)(w).zip(Object(j.a)(B)).map((function(e,t){var n=Object(u.a)(e,2),a=n[0],c=n[1];return Object(h.jsx)(d.a,{xs:6,md:4,children:Object(h.jsx)(m,{enemyStats:c,enemy:a,canAct:H,latestAttack:Object(j.a)(F).filter((function(e){var n=Object(u.a)(e,2),a=n[0];n[1];return a===t})).map((function(e){return e[1]})).first(),isSelected:t===M,onSelect:function(){return r(t)}},t)},t)}))}),Object(h.jsxs)(f.a,{children:[c.states.length>1&&Object(h.jsx)(b.a,{onClick:function(e){return o()},children:"Undo \u21a9"}),O&&Object(h.jsx)(b.a,{onClick:function(e){return O()},children:"Redo \u21aa"}),Object(h.jsx)(b.a,{onClick:function(e){return x(100)},children:"Hint"}),Object(h.jsx)(b.a,{onClick:function(e){return i(100)},children:"Solve \u231b"}),Object(h.jsx)(b.a,{onClick:function(e){return i(1e3)},children:"Solve thoroughly \u231b\u231b\u231b"})]})]})})})},k=n(11),w=n(96),S=n(95),A=n(94);var B=n(20),M=n.n(B),F=Object.entries(g.a).map((function(e){var t=Object(u.a)(e,2);return{type:t[0],options:t[1].map((function(e,t){return{display:e.display,value:t}}))}})),T=function(e){var t=e.isSelected,n=e.section,r=e.options,c=e.setField,i=function(e){var t=Object(a.useRef)(null);return[function(){return t.current.scrollIntoView(e)},t]}({behavior:"smooth",block:"start"}),o=Object(u.a)(i,2),s=o[0],l=o[1];return Object(h.jsxs)(f.a,{children:[Object(h.jsx)(w.a.Label,{children:n}),Object(h.jsx)("br",{}),Object(h.jsx)(A.a,{size:"lg",className:"mb-2",children:r.map((function(e){var a=e.display,r=e.value;return Object(h.jsx)(b.a,{name:n,id:"".concat(r),variant:t(r)?"primary":"secondary",onClick:function(){c(r),s()},children:a},r)}))}),Object(h.jsx)("div",{id:"".concat(n,"-scroll"),ref:l})]})},P=function(e){var t=e.onSave,n=r.a.useState(F.reduce((function(e,t){var n=t.type,a=t.options;return Object(o.a)(Object(o.a)({},e),{},Object(k.a)({},n,a[0].value))}),{})),a=Object(u.a)(n,2),c=a[0],i=a[1],s=r.a.useState({name:Object(g.h)(),age:(new M.a).age()}),d=Object(u.a)(s,2),p=d[0],j=d[1],m=function(e){return Object(h.jsx)("b",{children:g.a[e][c[e]].display})};return Object(h.jsx)(w.a,{onSubmit:function(e){e.preventDefault(),t({id:"p-1",lore:p,build:Object.entries(c).reduce((function(e,t){var n=Object(u.a)(t,2),a=n[0],r=n[1];return Object(o.a)(Object(o.a)({},e),{},Object(k.a)({},a,g.a[a][r]))}),{basic:g.a.basic[0]})},{hp:25,stamina:8,staminaPerTurn:2})},children:Object(h.jsxs)(l.a,{fluid:!0,style:{marginBottom:"105px"},children:[Object(h.jsx)(f.a,{className:"g-2",children:F.map((function(e){var t=e.type,n=e.options;return Object(h.jsx)(T,{setField:function(e){return function(e,t){i(Object(o.a)(Object(o.a)({},c),{},Object(k.a)({},e,t)))}(t,e)},section:t,options:n,isSelected:function(e){return c[t]===e}},t)}))}),Object(h.jsx)(S.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(h.jsxs)(l.a,{children:[Object(h.jsxs)(S.a.Text,{children:["You are ",Object(h.jsx)("i",{onClick:function(){return j((function(e){return Object(o.a)(Object(o.a)({},e),{},{name:Object(g.h)()})}))},children:p.name}),", the ",m("skill")," ",m("class")," ",m("charm"),Object(h.jsx)("br",{}),"who wields a ",m("weapon")," and a ",m("offhand"),Object(h.jsx)("br",{}),"and wears ",m("armor")," with ",m("headgear")," and ",m("footwear")]}),Object(h.jsx)(b.a,{type:"submit",children:"Pick your foe!"})]})})]})})},E=function(e){var t=e.player,n=e.onSave,a=r.a.useState([]),c=Object(u.a)(a,2),i=c[0],o=c[1],f=function(e){return Object(h.jsx)("b",{children:t.build[e].display})};return Object(h.jsxs)(w.a,{onSubmit:function(e){e.preventDefault();var t=i.map((function(e){return e[0]})),a=i.map((function(e){return e[1]}));n(t,a)},children:[Object(h.jsx)(l.a,{fluid:!0,style:{marginBottom:i.length>0?"205px":"105px"},children:Object(h.jsx)(A.a,{size:"lg",className:"mb-2",children:g.d.map((function(e){return Object(h.jsx)(b.a,{disabled:i.length>4,onClick:function(){return o((function(t){return[].concat(Object(s.a)(t),[e])}))},children:e[0].lore.name},e[0].lore.name)}))})}),i.length>0&&Object(h.jsx)(S.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{marginBottom:"100px"},children:Object(h.jsx)(l.a,{fluid:!0,children:Object(h.jsx)(A.a,{size:"sm",className:"mb-2",children:i.map((function(e,t){return Object(h.jsx)(b.a,{onClick:function(){return o((function(t){var n=!1;return t.filter((function(t){return n||t[0].lore.name!==e[0].lore.name||!(n=!0)}))}))},children:e[0].lore.name},"".concat(e[0].lore.name,"-").concat(t))}))})})}),Object(h.jsx)(S.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(h.jsxs)(l.a,{children:[Object(h.jsxs)(S.a.Text,{children:["You are ",Object(h.jsx)("i",{children:t.lore.name}),", the ",f("skill")," ",f("class")," ",f("charm"),Object(h.jsx)("br",{}),"who wields a ",f("weapon")," and a ",f("offhand"),Object(h.jsx)("br",{}),"and wears ",f("armor")," with ",f("headgear")," and ",f("footwear")]}),Object(h.jsxs)(A.a,{children:[Object(h.jsx)(b.a,{disabled:i.length<0||i.length>5,onClick:function(e){return o((function(e){return[].concat(Object(s.a)(e),[Object(g.g)()])}))},children:"Add Random"}),Object(h.jsx)(b.a,{type:"submit",disabled:i.length<1||i.length>5,children:"To Battle!"})]})]})})]})},C=n(23);var R=function(){var e=r.a.useState("buildPlayer"),t=Object(u.a)(e,2),n=t[0],a=t[1],c=r.a.useState(),i=Object(u.a)(c,2),l=i[0],f=i[1],d=r.a.useState(),p=Object(u.a)(d,2),b=p[0],m=p[1],O=r.a.useState(),y=Object(u.a)(O,2),k=y[0],w=y[1],S=r.a.useState([]),A=Object(u.a)(S,2),B=A[0],M=A[1];if(!k&&l&&b){var F=Object(u.a)(l,2),T=F[0],R=F[1],H=Object(u.a)(b,2),D=H[0],L=H[1],J=Object(v.b)(T,R,D,L,50,"PACC");w(J)}return Object(h.jsxs)("div",{className:"App",children:["buildPlayer"===n?Object(h.jsx)(P,{onSave:function(e,t){f([e,t]),a("buildEncounter")}}):null,"buildEncounter"===n&&l?Object(h.jsx)(E,{player:l[0],onSave:function(e,t){m([e,t]),a("game")}}):null,"game"===n&&k?Object(h.jsx)(x,{game:k,redo:B.length>0?function(){var e=Object(s.a)(B),t=e.pop();M(e),w(Object(o.a)(Object(o.a)({},k),{},{states:[].concat(Object(s.a)(k.states),[t])}))}:void 0,undo:function(){M([].concat(Object(s.a)(B),[Object(g.f)(k)])),w(Object(o.a)(Object(o.a)({},k),{},{states:[k.states[0]].concat(Object(s.a)(k.states.slice(1,-1)))}))},setSelected:function(e){M([]),w(Object(v.e)(k,e))},handlePlayerEffect:function(e){M([]),w(Object(v.c)(k,e))},solveGame:function(e){return w(Object(j.a)(Object(C.a)(k,e,{turns:k.turns-k.states.length})).maxBy((function(e){return e.score})).phenotype)},hint:function(e){return w(Object(o.a)(Object(o.a)({},k),{},{states:[].concat(Object(s.a)(k.states),[Object(j.a)(Object(C.a)(k,e,{turns:k.turns-k.states.length})).maxBy((function(e){return e.score})).phenotype.states[k.states.length]])}))}}):null]})},H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,100)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(R,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/buildmancer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/buildmancer","/service-worker.js");H?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):D(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):D(t,e)}))}}(),L()}},[[88,1,2]]]);
//# sourceMappingURL=main.249ef99b.chunk.js.map