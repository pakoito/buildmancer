(this.webpackJsonpbuildmancer=this.webpackJsonpbuildmancer||[]).push([[0],{131:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),c=n.n(i),s=(n(95),n(2)),o=n(9),u=n(7),l=(n(96),n(97),n(139)),d=n(140),f=n(80),p=n(146),j=n(137),b=n(144),m=n(141),h=n(87),O=n(88),y=n(14),g=n(1),v=function(e){var t,n=e.enemy,a=e.enemyStats,r=e.isSelected,i=e.onSelect,c=e.latestAttack,s=e.canAct,o=e.hotkey;return Object(g.jsx)(p.a,{bg:r?"info":void 0,children:Object(g.jsxs)(p.a.Body,{children:[Object(g.jsxs)(p.a.Title,{children:[n.lore.name," ",a.hp.current>0?"":Object(g.jsx)("b",{children:"\ud83d\udc80DEAD\ud83d\udc80"})]}),Object(g.jsxs)(p.a.Text,{children:["\u2764:",a.hp.current," \ud83c\udff9:",a.distance+1]}),a.status.bleed.turns>0&&" ".concat(a.status.bleed.turns," \ud83e\ude78"),c&&Object(g.jsxs)(p.a.Text,{children:["Latest attack: ",c]}),Object(g.jsxs)(p.a.Text,{children:["Next attack prediction:",Object(g.jsx)("br",{}),(t=n.rolls[a.distance].map((function(e){return n.effects[e]})),Object(y.a)(t).countBy((function(e){return e.display})).toArray().map((function(e,n){var a=Object(u.a)(e,2),r=a[0],i=a[1],c=t.find((function(e){return e.display===r})),s=c.range,o=c.priority,l=c.tooltip;return Object(g.jsx)(m.a,{placement:"right",delay:{show:100,hide:250},overlay:Object(g.jsxs)(h.a,{children:[Object(g.jsx)(h.a.Header,{as:"h3",children:r}),Object(g.jsxs)(h.a.Body,{children:[l,Object(g.jsx)("br",{}),"\u23f1:",o,Object(g.jsx)("br",{}),"\ud83c\udff9:",5===s.length?"Any":0===s.length?"None":s.map((function(e){return e+1})).join(", ")]})]}),children:Object(g.jsxs)(g.Fragment,{children:["[",(i/t.length*100).toFixed(2),"%] ",r,Object(g.jsx)("br",{},n)]})},n)}))),Object(g.jsx)("br",{})]}),s&&Object(g.jsxs)(O.a,{disabled:r,onClick:i,children:["[",Object(g.jsx)("i",{children:o.toUpperCase()}),"] Select"]})]})})},x=n(138),k=n(147),S=function(e){return Array.isArray(e)?{index:e[0],parameters:e[1]}:{index:e,parameters:void 0}};function w(e){return Object.entries(e).map((function(e){var t=Object(u.a)(e,2);return[t[0],t[1]]}))}var A=function(e){var t=e.selectedButtons,n=e.player,a=e.playerStats,r=e.onClickEffect,i=e.canAct,c=e.lastAction,s=e.disabledSkills,l=e.setDisabledSkills;return Object(g.jsxs)(p.a,{children:[Object(g.jsxs)(p.a.Body,{children:[Object(g.jsxs)(p.a.Title,{children:[n.lore.name,a.hp.current>0?"":Object(g.jsx)("b",{children:" \ud83d\udc80DEAD\ud83d\udc80 "})]}),Object(g.jsx)(p.a.Subtitle,{className:"mb-2 text-muted",children:n.build.class.display}),Object(g.jsxs)(p.a.Text,{children:[a.hp.current,"/",a.hp.max," \u2764 ",a.stamina.current,"/",a.stamina.max," \ud83d\udcaa"]}),a.status.bleed.turns>0&&Object(g.jsxs)(p.a.Text,{children:["` $",a.status.bleed.turns," \ud83e\ude78`"]}),c&&Object(g.jsxs)(p.a.Text,{children:["Last action: ",c]})]}),i&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("b",{children:"Passives"}),Object(g.jsx)(j.a,{children:w(n.build).map((function(e){var t,n,a=Object(u.a)(e,2),r=a[0],i=a[1];return[r,i,[].concat(Object(o.a)(null!==(t=i.bot)&&void 0!==t?t:[]),Object(o.a)(null!==(n=i.eot)&&void 0!==n?n:[]))]})).map((function(e,t){var n=Object(u.a)(e,3),a=n[0],r=n[1];return n[2].length>0&&Object(g.jsx)(m.a,{placement:"right",delay:{show:100,hide:250},overlay:Object(g.jsxs)(h.a,{children:[Object(g.jsx)(h.a.Header,{as:"h3",children:r.display}),Object(g.jsx)(h.a.Body,{children:r.tooltip})]}),children:Object(g.jsx)(x.a,{checked:!Object(y.b)(s).has(a),value:a,id:"passive-skill-".concat(a),type:"checkbox",variant:"outline-primary",onChange:function(e){return l(e.currentTarget.checked?Object(y.b)(s).delete(a).toArray():Object(y.b)(s).add(a).toArray())},children:r.display})},t)}))})]}),i&&Object(g.jsx)(p.a.Body,{children:Object(g.jsx)(k.a,{direction:"horizontal",gap:2,children:Object.values(n.build).flatMap((function(e){var t;return null!==(t=e.effects)&&void 0!==t?t:[]})).map((function(e,n){return Object(g.jsx)(m.a,{placement:"top",delay:{show:100,hide:250},overlay:Object(g.jsxs)(h.a,{children:[Object(g.jsx)(h.a.Header,{as:"h3",children:e.display}),Object(g.jsx)(h.a.Body,{children:e.tooltip})]}),children:Object(g.jsxs)("div",{children:[Object(g.jsxs)(O.a,{active:t.has(e.display),disabled:a.stamina.current<e.stamina,onClick:function(e){return r(n)},children:["[",Object(g.jsx)("i",{children:n+1}),"] ",Object(g.jsx)("b",{children:e.display})]}),Object(g.jsx)("br",{}),Object(g.jsxs)(p.a.Text,{children:["\ud83d\udcaa:",e.stamina," \u23f1:",Math.max(e.priority+a.speed.current),Object(g.jsx)("br",{}),"\ud83c\udff9:",5===e.range.length?"Any":e.range.map((function(e){return e+1})).join(", ")]})]})},e.display)}))})})]})};var E=n(38),T=n.n(E),M=function(e){return e.states[e.states.length-1]},P=function(){return(new E.Chance).pickone(I)},C=function(e,t){var n=new E.Chance;return[{id:n.string(),lore:{name:W(),age:n.age()},build:Object(s.a)({debug:H.debug[0],basic:n.pickone(H.basic),class:n.pickone(H.class),skill:n.pickone(H.skill),armor:n.pickone(H.armor),weapon:n.pickone(H.weapon),offhand:n.pickone(H.offhand),footwear:n.pickone(H.footwear),headgear:n.pickone(H.headgear),charm:n.pickone(H.charm),consumable:n.pickone(H.consumable)},t)},Object(s.a)({hp:R(25),stamina:R(8),staminaPerTurn:R(2),speed:R(0),attack:R(0),defence:R(0),status:N},e)]},B=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(o.a)(new Set(t))},D=B(0,1,2,3,4),F=D,R=function(e){return{current:e,max:e}},N={dodge:{active:!1},armor:{amount:0},bleed:{turns:0}},L=[{display:"Axe",effects:[{display:"Chop",tooltip:"Chop",effects:[S("Axe:Chop")],priority:2,stamina:2,range:B(0,1)},{display:"Cut",tooltip:"Cut",effects:[S("Axe:Cut")],priority:3,stamina:2,range:B(0)},{display:"Bleed",tooltip:"Makes the enemy bleed",effects:[S("Axe:Bleed")],priority:3,stamina:2,range:D}]}],H={debug:[{display:"None"},{display:"Debug",effects:[{display:"GGWP",tooltip:"Wins the game",priority:1,stamina:0,range:D,effects:[S("Debug:GGWP")]},{display:"SUDOKU",tooltip:"Loses the game",priority:1,stamina:0,range:D,effects:[S("Debug:Sudoku")]}]}],basic:[{display:"Basic",effects:[{display:"Rest",tooltip:"Skip the turn and restore stamina",priority:4,stamina:0,range:F,effects:[S("Basic:Rest")]},{display:"Advance",tooltip:"Move closer",priority:4,stamina:1,range:F,effects:[S(["Basic:Advance",{amount:1}])]},{display:"Retreat",tooltip:"Move farther",effects:[S(["Basic:Retreat",{amount:1}])],priority:4,stamina:1,range:F}]}],class:[{display:"Warrior",passives:["+Attack","+Defence","+Stamina"],effects:[{display:"Strategic Kick",tooltip:"Last resource attack",effects:[S(["Basic:Attack",{amount:2}])],priority:2,stamina:1,range:B(1)}]},{display:"Mage",passives:["+StaPerTurn","+Stamina","-Health"],effects:[{display:"Just having a thought",tooltip:"Restores stamina for the next action",priority:4,stamina:0,range:F,effects:[S(["Basic:Stamina",{amount:999}])]}]},{display:"Rogue",passives:["+Speed","+Speed","-Attack","-Stamina"],effects:[{display:"Strategic retreat",tooltip:"Jump backwards",effects:[S(["Basic:Retreat",{amount:4}])],priority:4,stamina:1,range:F}]},{display:"Berserk",passives:["+Attack","+Attack","+Attack","+Attack","-Defence","-Defence","-Health"]}],skill:[{display:"Sturdy",effects:[{display:"Endure the pain",tooltip:"Blocks some damage",effects:[S(["Effect:Armor",{amount:2}])],priority:1,stamina:2,range:F}]},{display:"Nimble",effects:[{display:"Dodge",tooltip:"Avoid 1 enemy attack",effects:[S("Effect:Dodge")],priority:2,stamina:4,range:F}]},{display:"Resourceful",effects:[{display:"Dodge this!",tooltip:"Throws a stone",effects:[S(["Basic:Attack",{amount:2}])],priority:4,stamina:3,range:B(3,4)}]}],weapon:L,offhand:[{display:"Hook",passives:["-Stamina"],effects:[{display:"Get over here!",tooltip:"Moves enemy closer",effects:[S("Hook:GetHere")],priority:4,stamina:3,range:B(2,3,4)}]},{display:"Parry Dagger",passives:["-Defence"],effects:[{display:"Get over here!",tooltip:"Avoids a melee attack",effects:[S("Effect:Dodge")],priority:2,stamina:2,range:B(1)}]},{display:"Shield",passives:["+Defence","-Speed"],effects:[{display:"Not today!",tooltip:"Blocks a lot of damage",effects:[S(["Effect:Armor",{amount:5}])],priority:2,stamina:4,range:F}]},{display:"Focus",passives:["+Speed","+StaPerTurn"]},{display:"Wand",passives:["-Defence","-StaPerTurn"],effects:[{display:"Magic Bolt",tooltip:"Shoots mana bolts until the caster faints",effects:[S("Wand:MagicBolt")],priority:3,stamina:1,range:B(3,4)}]}],armor:[{display:"Heavy",passives:["+Defence","+Defence","+Defence","+Defence","-Speed","-Speed","-StaPerTurn"]},{display:"Medium",passives:["+Defence","+Defence","-StaPerTurn"]},{display:"Light",passives:["+Defence"]},{display:"None",passives:[]}],headgear:[{display:"Helm",passives:["+Defence","+Defence","-Speed","-StaPerTurn"],tooltip:"Big protection for slow combatants"},{display:"Feather Cap",passives:["+StaPerTurn","+Stamina"],tooltip:"Makes you feel energized, doesn't it?"},{display:"Mage Hat",passives:["-StaPerTurn"],tooltip:"Small tricks for big plays",effects:[{display:"Flash!",tooltip:"Blinks you to a better position",effects:[S(["Basic:Attack",{amount:1}]),S(["Basic:Retreat",{amount:2}])],priority:3,stamina:4,range:B(1,2)}]}],footwear:[{display:"Slippers of Dooooodge!",tooltip:"Allows you to dodge attacks",passives:["-Stamina"],effects:[{display:"Advanced Dodge",tooltip:"Avoid 1 attack",effects:[S("Effect:Dodge")],priority:1,stamina:3,range:F}]},{display:"Boots of Flight",tooltip:"Avoid your enemies",passives:["-StaPerTurn","-Defence"],eot:[{display:"Flight!",tooltip:"Increases distance every turn",priority:0,range:D,effects:[S("BootsOfFlight:EOT")]}]},{display:"Greaves of Stability",tooltip:"Extra resilient",passives:["+Defence","-Speed"],effects:[{display:"Dig your heels",tooltip:"Resists damage",effects:[S(["Effect:Armor",{amount:3}])],priority:1,stamina:4,range:F}]}],charm:[{display:"of Health",passives:["+Health","-Speed"],tooltip:"Increases your maximum health"},{display:"of Haste",passives:["+StaPerTurn","-Stamina"],tooltip:"Increases your maximum stamina regeneration"},{display:"of Resilience",passives:["+Stamina","-StaPerTurn"],tooltip:"Increases your maximum stamina"},{display:"of Strength",passives:["+Attack","-Health","-StaPerTurn"],tooltip:"Increases your maximum attack"},{display:"of Swiftness",passives:["+Speed","-Attack"],tooltip:"Increases your maximum speed"},{display:"of Defence",passives:["+Defence","-Stamina","-Speed"],tooltip:"Increases your maximum defence"}],consumable:[{display:"Potion"}]},W=function(){return J[Math.floor(Math.random()*J.length)]},I=[[{lore:{name:"Sacapuntas"},rolls:[[0,1,2,1,0],[0,1,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0,0]],effects:[{display:"Swipe",tooltip:"Swipe",priority:3,effects:[S("Monster:Swipe")],range:B(0,1)},{display:"Roar",tooltip:"Swipe",priority:1,effects:[S("Monster:Roar")],range:D},{display:"Jump",tooltip:"Swipe",priority:2,effects:[S("Monster:Jump")],range:B(2,3,4)}]},{hp:R(25),distance:4,speed:R(0),attack:R(0),defence:R(0),status:N}],[{lore:{name:"Toro"},effects:[{display:"Swipe",tooltip:"Swipe",priority:3,effects:[S("Monster:Swipe")],range:D},{display:"Jump",tooltip:"Jump",priority:2,effects:[S("Monster:Jump")],range:B(2,3,4)}],rolls:[[0,0,0,0,0],[0,0,0,0,0],[1,1,0,0,0],[1,1,1,0,0],[1,1,1,1,0]]},{hp:R(22),distance:4,speed:R(0),attack:R(0),defence:R(0),status:N}],[{lore:{name:"Summoner"},effects:[{display:"Swipe",tooltip:"Swipe",priority:3,effects:[S("Monster:Swipe")],range:B(0,1)},{display:"Jump",tooltip:"Jump",priority:3,effects:[S("Monster:Jump")],range:D},{display:"Summon Toro",tooltip:"Summon Toro",priority:4,effects:[S(["Monster:Summon",{enemy:1}])],range:B(2,3,4)}],rolls:[[0,0,0,0,0],[1,0,0,0,0],[1,1,2,0,0],[1,1,2,0,0],[1,2,2,0,0]]},{hp:R(30),distance:4,speed:R(0),attack:R(0),defence:R(0),status:N}],[{lore:{name:"Body"},effects:[{display:"Swipe",tooltip:"Swipe",priority:3,effects:[S("Monster:Swipe")],range:B()}],rolls:[[0],[0],[0],[0],[0]]},{hp:R(300),distance:0,speed:R(0),attack:R(0),defence:R(0),status:N}],[{lore:{name:"Smol"},effects:[{display:"Swipe",tooltip:"Swipe",priority:3,effects:[S("Monster:Swipe")],range:B()}],rolls:[[0],[0],[0],[0],[0]]},{hp:R(5),distance:0,speed:R(0),attack:R(0),defence:R(0),status:N}]],J=["Lydan","Syrin","Ptorik","Joz","Varog","Gethrod","Hezra","Feron","Ophni","Colborn","Fintis","Gatlin","Jinto","Hagalbar","Krinn","Lenox","Revvyn","Hodus","Dimian","Paskel","Kontas","Weston","Azamarr","Jather","Tekren","Jareth","Adon","Zaden","Eune","Graff","Tez","Jessop","Gunnar","Pike","Domnhar","Baske","Jerrick","Mavrek","Riordan","Wulfe","Straus","Tyvrik","Henndar","Favroe","Whit","Jaris","Renham","Kagran","Lassrin","Vadim","Arlo","Quintis","Vale","Caelan","Yorjan","Khron","Ishmael","Jakrin","Fangar","Roux","Baxar","Hawke","Gatlen","Barak","Nazim","Kadric","Paquin","Kent","Moki","Rankar","Lothe","Ryven","Clawsen","Pakker","Embre","Cassian","Verssek","Dagfinn","Ebraheim","Nesso","Eldermar","Rivik","Rourke","Barton","Hemm","Sarkin","Blaiz","Talon","Agro","Zagaroth","Turrek","Esdel","Lustros","Zenner","Baashar","Dagrod","Gentar","Feston","Syrana","Resha","Varin","Wren","Yuni","Talis","Kessa","Magaltie","Aeris","Desmina","Krynna","Asralyn","Herra","Pret","Kory","Afia","Tessel","Rhiannon","Zara","Jesi","Belen","Rei","Ciscra","Temy","Renalee","Estyn","Maarika","Lynorr","Tiv","Annihya","Semet","Tamrin","Antia","Reslyn","Basak","Vixra","Pekka","Xavia","Beatha","Yarri","Liris","Sonali","Razra","Soko","Maeve","Everen","Yelina","Morwena","Hagar","Palra","Elysa","Sage","Ketra","Lynx","Agama","Thesra","Tezani","Ralia","Esmee","Heron","Naima","Rydna","Sparrow","Baakshi","Ibera","Phlox","Dessa","Braithe","Taewen","Larke","Silene","Phressa","Esther","Anika","Rasy","Harper","Indie","Vita","Drusila","Minha","Surane","Lassona","Merula","Kye","Jonna","Lyla","Zet","Orett","Naphtalia","Turi","Rhays","Shike","Hartie","Beela","Leska","Vemery","Lunex","Fidess","Tisette","Partha"],z=n(78);var G=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length>1?t.reduce((function(e,t){return function(n){return function(a,r,i){var c=e(n)(a,r,i),s=Object(u.a)(c,2),o=s[0],l=s[1];return t(n)(a,o,l)}}})):t[0]},U={"Debug:GGWP":G((function(){return function(e,t,n){return[t,Object(s.a)(Object(s.a)({},n),{},{enemies:n.enemies.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{hp:Object(s.a)(Object(s.a)({},e.hp),{},{current:0})})}))})]}})),"Debug:Sudoku":G((function(){return function(e,t,n){return[t,Object(s.a)(Object(s.a)({},n),{},{player:Object(s.a)(Object(s.a)({},n.player),{},{hp:Object(s.a)(Object(s.a)({},n.player.hp),{},{current:0})})})]}})),"Utility:Cleanup":G((function(){return function(e,t,n){return[t,_.changeStatusPlayer(n,(function(e){return Object(s.a)(Object(s.a)({},e),{},{armor:{amount:0},bleed:{turns:Math.max(e.bleed.turns-1,0)},dodge:{active:!1}})}))]}}),(function(){return function(e,t,n){return[t,n.enemies.reduce((function(e,t,n){return _.changeStatusMonster(e,n,(function(e){return Object(s.a)(Object(s.a)({},e),{},{armor:{amount:0},bleed:{turns:Math.max(e.bleed.turns-1,0)},dodge:{active:!1}})}))}),n)]}}))},K=Object(s.a)(Object(s.a)({},U),{},{"Basic:Rest":G((function(){return function(e,t,n){return[t,n]}})),"Basic:Advance":G((function(e){var t=e.amount;return function(e,n,a){return[n,_.changeDistance(a,a.target,-t)]}})),"Basic:Retreat":G((function(e){var t=e.amount;return function(e,n,a){return[n,_.changeDistance(a,a.target,t)]}})),"Basic:Attack":G((function(e){var t=e.amount;return function(e,n,a){return[n,_.attackMonster(a,a.target,t)]}})),"Basic:Stamina":G((function(e){var t=e.amount;return function(e,n,a){return[n,_.modifyPlayerStamina(a,t)]}})),"Effect:Dodge":G((function(){return function(e,t,n){return[t,_.changeStatusPlayer(n,(function(e){return Object(s.a)(Object(s.a)({},e),{},{dodge:{active:!0}})}))]}})),"Effect:Armor":G((function(){return function(e,t,n){return[t,_.changeStatusPlayer(n,(function(e){return Object(s.a)(Object(s.a)({},e),{},{armor:{amount:3}})}))]}})),"Effect:Poison":G((function(e){var t=e.target;return function(e,n,a){return[n,"Player"===t?_.attackPlayer(a,1):_.attackMonster(a,t,1)]}}),(function(e){return function(t,n,a){return[n,"Player"!==e.target&&a.enemies[e.target].hp.current>0&&e.lifespan>0?_.addEotEffect(a,t,{display:"Poison ".concat(n.enemies[e.target].lore.name," [").concat(e.target+1,"]"),tooltip:"",range:D,priority:4,effects:[S(["Effect:Poison",Object(s.a)(Object(s.a)({},e),{},{lifespan:e.lifespan-1})])]}):a]}})),"Monster:Attack":G((function(e){var t=e.amount;return function(e,n,a){return[n,_.attackPlayer(a,t)]}})),"Monster:Summon":G((function(e){var t=e.enemy;return function(e,n,a){return _.addEnemy(n,a,I[t][0],I[t][1])}})),"Monster:Dead":G((function(){return function(e,t,n){return[t,n]}})),"Monster:Swipe":G((function(){return function(e,t,n){return[t,_.attackPlayer(n,2)]}})),"Monster:Roar":G((function(){return function(e,t,n){return[t,_.modifyPlayerStamina(n,-5)]}})),"Monster:Jump":G((function(){return function(e,t,n){return[t,_.changeDistance(n,e,-2)]}})),"Axe:Chop":G((function(){return function(e,t,n){return[t,_.attackMonster(n,n.target,3)]}})),"Axe:Cut":G((function(){return function(e,t,n){return[t,_.attackMonster(n,n.target,3)]}}),(function(){return function(e,t,n){return[t,_.addEotEffect(n,e,{display:"Poison ".concat(t.enemies[n.target].lore.name," [").concat(n.target+1,"]"),tooltip:"",range:D,priority:4,effects:[S(["Effect:Poison",{target:n.target,lifespan:2}])]})]}})),"Axe:Bleed":G((function(){return function(e,t,n){return[t,_.attackMonster(n,n.target,2)]}}),(function(){return function(e,t,n){return[t,_.changeStatusMonster(n,n.target,(function(e){return Object(s.a)(Object(s.a)({},e),{},{bleed:{turns:e.bleed.turns+5}})}))]}})),"Hook:GetHere":G((function(){return function(e,t,n){return[t,_.attackMonster(n,n.target,3)]}}),(function(){return function(e,t,n){return[t,_.changeDistance(n,n.target,-1)]}})),"BootsOfFlight:EOT":G((function(){return function(e,t,n){return[t,n.enemies.reduce((function(e,t,n){return _.changeDistance(e,n,-2)}),n)]}})),"Wand:MagicBolt":G((function(){return function(e,t,n){for(var a=n;a.player.stamina.current;)a=_.modifyPlayerStamina(a,-2),a=_.attackMonster(a,n.target,1);return[t,a]}}))}),V=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.min(Math.max(e,t),n)},Y=function(e,t,n){return e.map((function(e,a){return a===t?Object(s.a)(Object(s.a)({},e),n(e)):e}))},_={attackPlayer:function(e,t){var n=e.player.status.armor.amount,a=t+e.player.attack.current,r=Math.max(a-e.player.defence.current,0),i=Math.max(r-n,0),c=n-(r-i),o=i+(e.player.status.bleed.turns>0?1:0);return function(e,t){return Object(s.a)(Object(s.a)({},e),{},{player:Object(s.a)(Object(s.a)({},e.player),t(e.player))})}(e,(function(e){var t=e.hp,n=e.status;return{hp:{max:t.max,current:V(t.current-o,0,t.max)},status:Object(s.a)(Object(s.a)({},n),{},{armor:{amount:n.armor.amount-c}})}}))},attackMonster:function(e,t,n){var a=e.enemies[t],r=a.status.armor.amount,i=n+e.player.attack.current,c=Math.max(i-a.defence.current,0),o=Math.max(c-r,0),u=r-(c-o),l=o+(a.status.bleed.turns>0?1:0);return Object(s.a)(Object(s.a)({},e),{},{enemies:Y(e.enemies,t,(function(e){var t=e.status,n=e.hp;return{hp:{max:n.max,current:V(n.current-l,0,n.max)},status:Object(s.a)(Object(s.a)({},t),{},{armor:{amount:u}})}}))})},changeStatusPlayer:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{player:Object(s.a)(Object(s.a)({},e.player),{},{status:t(e.player.status)})})},changeStatusMonster:function(e,t,n){return Object(s.a)(Object(s.a)({},e),{},{enemies:Y(e.enemies,t,(function(e){var t=e.status;return{status:n(t)}}))})},changeDistance:function(e,t,n){return Object(s.a)(Object(s.a)({},e),{},{enemies:Y(e.enemies,t,(function(e){var t=e.distance;return{distance:V(t+n,0,4)}}))})},removeMonster:function(e,t,n){return[Object(s.a)(Object(s.a)({},e),{},{enemies:e.enemies.filter((function(e,t){return t===n}))}),Object(s.a)(Object(s.a)({},t),{},{target:0,enemies:t.enemies.filter((function(e,t){return t===n}))})]},modifyPlayerStamina:function(e,t){return function(e,t,n){var a=e.player;return a[t]=Object(s.a)(Object(s.a)({},a[t]),n(a[t])),Object(s.a)(Object(s.a)({},e),{},{player:a})}(e,"stamina",(function(e){return{current:V(e.current+t,0,e.max)}}))},addEotEffect:function(e,t,n){var a;return Object(s.a)(Object(s.a)({},e),{},{eot:[].concat(Object(o.a)(null!==(a=e.eot)&&void 0!==a?a:[]),[[t,n]])})},addBotEffect:function(e,t,n){var a;return Object(s.a)(Object(s.a)({},e),{},{bot:[].concat(Object(o.a)(null!==(a=e.eot)&&void 0!==a?a:[]),[[t,n]])})},addEnemy:function(e,t,n,a){return e.enemies.length<5?[Object(s.a)(Object(s.a)({},e),{},{enemies:[].concat(Object(o.a)(e.enemies),[n])}),Object(s.a)(Object(s.a)({},t),{},{enemies:[].concat(Object(o.a)(t.enemies),[a])})]:[e,t]}};var q={"+Health":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{hp:R(e.hp.current+10)}),t]},"+StaPerTurn":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{staminaPerTurn:R(e.staminaPerTurn.current+1)}),t]},"+Stamina":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{stamina:R(e.stamina.current+3)}),t]},"+Attack":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{attack:R(e.attack.current+1)}),t]},"+Speed":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{speed:R(e.speed.current+1)}),t]},"+Defence":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{defence:R(e.defence.current+1)}),t]},"-Health":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{hp:R(e.hp.current-10)}),t]},"-StaPerTurn":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{staminaPerTurn:R(e.staminaPerTurn.current-1)}),t]},"-Stamina":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{stamina:R(e.stamina.current-3)}),t]},"-Attack":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{attack:R(e.attack.current-1)}),t]},"-Speed":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{speed:R(e.speed.current-1)}),t]},"-Defence":function(e,t){return[Object(s.a)(Object(s.a)({},e),{},{defence:R(e.defence.current-1)}),t]}};function Z(e,t,n){var a=new E.Chance(n);return Object(o.a)(Array(e).keys()).map((function(e){return Object(o.a)(Array(t).keys()).map((function(e){return a.floating({min:0,max:1,fixed:2})}))}))}var Q=function(e){return Object.values(e.build).flatMap((function(e){var t;return null!==(t=e.effects)&&void 0!==t?t:[]}))},X=function(e,t,n){return function(e){return Object.values(e.build).flatMap((function(e){var t;return null!==(t=e.passives)&&void 0!==t?t:[]})).map((function(e){return q[e]}))}(e).reduce((function(e,t){var n=Object(u.a)(e,2);return t(n[0],n[1])}),[t,n])};function $(e,t,n,a,r,i){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:20,s=X(e,t,a),o=Object(u.a)(s,2),l=o[0],d=o[1];return{player:e,enemies:n,states:[{player:l,enemies:d,target:0,lastAttacks:[],disabledSkills:[]}],rng:Z(r,c,i),turns:r,id:Object(z.a)([e,n,r,i]),seed:i}}var ee=function(e,t,n,a,r){return Object(y.a)(e).sortBy((function(e){var t=Object(u.a)(e,2),a=t[0],r=t[1],i="Player"===a?n.player.speed.current:n.enemies[a].speed.current;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.min(Math.max(e,t),n)}(r.priority-i,0,4)})).reduce((function(e,t){var n=Object(u.a)(t,2),i=n[0],c=n[1],l=Object(u.a)(e,2),d=l[0],f=l[1],p="Player"===i?f.target:i,j=f.enemies[p];if(!Object(y.b)(Object(o.a)(c.range)).has(j.distance))return[d,Object(s.a)(Object(s.a)({},f),{},{lastAttacks:[].concat(Object(o.a)(f.lastAttacks),[{origin:i,display:"\u274c\u274cWHIFFED\u274c\u274c ".concat(c.display),phase:r}])})];if(a&&"Player"===i&&j.status.dodge.active)return[d,Object(s.a)(Object(s.a)({},f),{},{enemies:f.enemies.map((function(e,t){return t===p?Object(s.a)(Object(s.a)({},e),{},{status:Object(s.a)(Object(s.a)({},e.status),{},{dodge:{active:!1}})}):e})),lastAttacks:[].concat(Object(o.a)(f.lastAttacks),[{origin:i,display:"\ud83d\udca8\ud83d\udca8DODGED\ud83d\udca8\ud83d\udca8 ".concat(c.display),phase:r}])})];if(a&&"Player"!==i&&f.player.status.dodge.active)return[d,Object(s.a)(Object(s.a)({},f),{},{player:Object(s.a)(Object(s.a)({},f.player),{},{status:Object(s.a)(Object(s.a)({},f.player.status),{},{dodge:{active:!1}})}),lastAttacks:[].concat(Object(o.a)(f.lastAttacks),[{origin:i,display:"\ud83d\udca8\ud83d\udca8DODGED\ud83d\udca8\ud83d\udca8 ".concat(c.display),phase:r}])})];var b=function(e){var t=e.effects;return function(e,n,a){return t.reduce((function(t,n){var a,r,i,c=n.index,s=n.parameters;return(a=K,r=c,i=s,(0,a[r])(i)).apply(void 0,[e].concat(Object(o.a)(t)))}),[n,a])}}(c)(i,d,f),m=Object(u.a)(b,2),h=m[0],O=m[1];return[h,Object(s.a)(Object(s.a)({},O),{},{lastAttacks:[].concat(Object(o.a)(O.lastAttacks),[{origin:i,display:c.display,phase:r}])})]}),[t,n])},te={display:"Cleanup",tooltip:"Cleanup",effects:[S("Utility:Cleanup")],range:D,priority:0},ne={display:"\u26b0",tooltip:"\u26b0",priority:4,effects:[S("Monster:Dead")],range:D},ae=function(e,t){var n,a,r,i,c,l=M(e),d=Q(e.player)[t],f=null!==(n=l.bot)&&void 0!==n?n:[],p=null!==(a=l.eot)&&void 0!==a?a:[],j=Object(s.a)(Object(s.a)({},l),{},{lastAttacks:[],bot:void 0,eot:void 0}),b=ee([["Player",(r=l.player.staminaPerTurn.current-d.stamina,{display:"".concat(r>=0?"+":"").concat(r," \ud83d\udcaa"),tooltip:"Use ".concat(r," stamina"),effects:[S(["Basic:Stamina",{amount:r}])],range:D,priority:0})]],e,j,!1,"STAMINA"),m=Object(u.a)(b,2),h=m[0],O=m[1],g=ee(f,h,O,!1,"BOT"),v=Object(u.a)(g,2),x=v[0],k=v[1],A=[].concat(Object(o.a)((i=x.player,c=k.disabledSkills,w(i.build).flatMap((function(e){var t,n=Object(u.a)(e,2),a=n[0],r=n[1];return Object(y.b)(c).has(a)?[]:null!==(t=r.bot)&&void 0!==t?t:[]})).map((function(e){return["Player",e]})))),Object(o.a)(x.enemies.flatMap((function(e,t){var n;return(null!==(n=e.bot)&&void 0!==n?n:[]).map((function(e){return[t,e]}))})).map((function(e){return Object(o.a)(e)})))),E=ee(A,x,k,!1,"BOT"),T=Object(u.a)(E,2),P=T[0],C=T[1],B=function(e,t){var n=Object(o.a)(e.rng[t]);return function(e,t){return Math.floor((t-e)*n.pop()+e)}}(P,P.states.length),F=Object(y.a)(P.enemies).zip(Object(y.a)(C.enemies)).map((function(e,t){var n=Object(u.a)(e,2),a=n[0],r=n[1];return[t,r.hp.current>0?a.effects[a.rolls[r.distance][B(0,a.rolls[r.distance].length)]]:ne]})).concat([["Player",d]]).toArray().map((function(e){return Object(o.a)(e)})),R=ee(F,P,C,!0,"MAIN"),N=Object(u.a)(R,2),L=N[0],H=N[1],W=[].concat(Object(o.a)(function(e,t){return w(e.build).flatMap((function(e){var n,a=Object(u.a)(e,2),r=a[0],i=a[1];return Object(y.b)(t).has(r)?[]:null!==(n=i.eot)&&void 0!==n?n:[]})).map((function(e){return["Player",e]}))}(L.player,H.disabledSkills)),Object(o.a)(function(e){return e.flatMap((function(e,t){var n;return(null!==(n=e.eot)&&void 0!==n?n:[]).map((function(e){return[t,e]}))})).map((function(e){return Object(o.a)(e)}))}(L.enemies))),I=ee(W,L,H,!1,"EOT"),J=Object(u.a)(I,2),z=J[0],G=J[1],U=ee(p,z,G,!1,"EOT"),K=Object(u.a)(U,2),V=K[0],Y=K[1],_=ee([["Player",te]],V,Y,!1,"EOT"),q=Object(u.a)(_,2),Z=q[0],X=q[1];return Object(s.a)(Object(s.a)({},Z),{},{states:[].concat(Object(o.a)(Z.states),[X])})},re=function(e,t){return e.states[e.states.length-1].target=t,Object(s.a)(Object(s.a)({},e),{},{states:Object(o.a)(e.states)})},ie=n(79),ce=n.n(ie),se=["q","w","e","r","t","y"],oe=function(e){var t,n=e.handlePlayerEffect,r=e.setSelected,i=e.setDisabledSkills,c=e.game,s=e.solveGame,m=e.timeTravel,h=e.hint,x=c.player,k=c.enemies,S=M(c),w=S.player,E=S.enemies,T=S.target,P=S.lastAttacks,C=S.disabledSkills,B=Object(a.useState)(!1),D=Object(u.a)(B,2),F=D[0],R=D[1],N=function(){return R(!1)},L=Q(x),H=E.reduce((function(e,t){return t.hp.current+e}),0),W=w.hp.current>0,I=H>0,J=c.states.length<=c.turns,z=W&&I&&J,G=function(e){var t=Object(a.useState)(new Set),n=Object(u.a)(t,2),r=n[0],i=n[1],c=function(e){var t=e.key;i((function(e){return new Set([].concat(Object(o.a)(e),[t]))}))},s=Object(a.useCallback)((function(t){var n=t.key;i((function(e){return new Set(Object(o.a)(e).filter((function(e){return e!==n})))})),e(n)}),[e]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",c),window.addEventListener("keyup",s),function(){window.removeEventListener("keydown",c),window.removeEventListener("keyup",s)}}),[s]),r}((function(e){if(z){var t=parseInt(e);if(t>0&&t<=L.length){if(!(L[t-1].stamina<=w.stamina.current))return;n(t-1)}"h"===e&&h(100),"l"===e&&R(!F),"s"===e&&K(),"a"===e&&c.states.length>1&&m&&m.undo(),"d"===e&&m&&null!=m.redo&&m.redo(),e===se[0]&&k.length>0&&r(0),e===se[1]&&k.length>1&&r(1),e===se[2]&&k.length>2&&r(2),e===se[3]&&k.length>3&&r(3),e===se[4]&&k.length>4&&r(4)}})),U=Object(y.b)(Object(o.a)(G).flatMap((function(e){var t=parseInt(e);return t>0&&t<=L.length?[L[t-1].display]:[]}))),K=Object(a.useCallback)((function(){var e=new Blob([JSON.stringify(c)],{type:"application/json;charset=utf-8"});ce()(e,"buildmancer-".concat(Date.now(),".json"))}),[c]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(l.a,{fluid:!0,children:Object(g.jsx)(d.a,{className:"justify-content-center align-items-flex-start",children:Object(g.jsxs)(f.a,{sm:12,md:8,children:[Object(g.jsxs)(p.a.Title,{children:["Turn ",c.states.length," out of ",c.turns," ",W?I?"":Object(g.jsx)("b",{children:"\ud83c\udf89\ud83c\udf89VICTORY\ud83c\udf89\ud83c\udf89"}):Object(g.jsx)("b",{children:"\u274c\u274cDEFEAT\u274c\u274c"})]}),Object(g.jsx)(A,{player:x,playerStats:w,disabledSkills:C,setDisabledSkills:i,onClickEffect:function(e){return n(e)},selectedButtons:U,lastAction:null!==(t=P.filter((function(e){return"Player"===e.origin})).map((function(e){return"[".concat(e.phase,"] ").concat(e.display)})).join(" -> "))&&void 0!==t?t:void 0,canAct:z}),Object(g.jsx)(d.a,{children:null!=m&&Object(g.jsxs)(j.a,{children:[c.states.length>1&&Object(g.jsxs)(O.a,{onClick:function(e){return m.undo()},children:["[",Object(g.jsx)("i",{children:"A"}),"] Undo \u21a9"]}),(null===m||void 0===m?void 0:m.redo)&&Object(g.jsxs)(O.a,{onClick:function(e){return m.redo()},children:["[",Object(g.jsx)("i",{children:"D"}),"] Redo \u21aa"]})]})}),Object(g.jsx)(d.a,{children:Object(g.jsx)(j.a,{children:Object(g.jsxs)(O.a,{onClick:function(e){return h(100)},children:[Object(g.jsx)("i",{children:"[H]"})," Hint"]})})}),Object(g.jsx)(d.a,{children:Object(y.a)(k).zip(Object(y.a)(E)).map((function(e,t){var n,a=Object(u.a)(e,2),i=a[0],c=a[1];return Object(g.jsx)(f.a,{xs:6,md:4,children:Object(g.jsx)(v,{enemyStats:c,enemy:i,canAct:z,latestAttack:null!==(n=Object(y.a)(P).filter((function(e){return e.origin===t})).map((function(e){return"[".concat(e.phase,"] ").concat(e.display)})).join(" -> "))&&void 0!==n?n:void 0,isSelected:t===T,onSelect:function(){return r(t)},hotkey:se[t]},t)},t)}))}),Object(g.jsx)(p.a.Title,{children:"Debug"}),Object(g.jsx)(d.a,{children:Object(g.jsxs)(j.a,{children:[Object(g.jsxs)(O.a,{onClick:function(){return R(!0)},children:["[",Object(g.jsx)("i",{children:"L"}),"] Log \ud83d\uddd2"]}),Object(g.jsxs)(O.a,{onClick:K,children:["[",Object(g.jsx)("i",{children:"S"}),"] Dump to file \ud83d\udcc2"]})]})}),Object(g.jsx)(p.a.Title,{children:"Cheats"}),Object(g.jsx)(d.a,{children:Object(g.jsxs)(j.a,{children:[Object(g.jsx)(O.a,{onClick:function(e){return s(100)},children:"Solve \u231b"}),Object(g.jsx)(O.a,{onClick:function(e){return s(1e3)},children:"Solve thoroughly \u231b\u231b\u231b"})]})})]})})}),Object(g.jsxs)(b.a,{show:F,onHide:N,scrollable:!0,centered:!0,children:[Object(g.jsx)(b.a.Header,{closeButton:!0,children:Object(g.jsx)(b.a.Title,{children:"Game Log"})}),Object(g.jsx)(b.a.Body,{children:c.states.map((function(e,t){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("b",{children:["Turn ",t]}),Object(g.jsx)("br",{}),"Player: ",JSON.stringify(e.player,null,2),Object(g.jsx)("br",{}),"Enemies: ",JSON.stringify(e.enemies,null,2),Object(g.jsx)("br",{}),"Target [",e.target,"]",Object(g.jsx)("br",{}),"Eot? Bot?: ",JSON.stringify({bot:e.bot,eot:e.eot},null,2),Object(g.jsx)("br",{}),"Actions:",Object(g.jsx)("br",{}),e.lastAttacks.map((function(e){return Object(g.jsxs)(g.Fragment,{children:["  ",JSON.stringify(e,null,2),Object(g.jsx)("br",{})]})}))]})}))}),Object(g.jsx)(b.a.Footer,{children:Object(g.jsx)(O.a,{variant:"primary",onClick:N,children:"Close"})})]})]})},ue=n(17),le=n(142),de=n(143);var fe=Object(y.b)(["debug","basic"]),pe=function(e){var t=e.isSelected,n=e.section,r=e.options,i=e.setField,c=function(e){var t=Object(a.useRef)(null);return[function(){return t.current.scrollIntoView(e)},t]}({behavior:"smooth",block:"start"}),s=Object(u.a)(c,2),o=s[0],l=s[1];return Object(g.jsxs)(d.a,{children:[Object(g.jsx)(le.a.Label,{children:n}),Object(g.jsx)("br",{}),Object(g.jsx)(j.a,{size:"lg",className:"mb-2",children:r.map((function(e){return Object(g.jsx)(O.a,{name:n,id:"".concat(e.display),variant:t(e)?"primary":"secondary",onClick:function(){i(e),o()},children:e.display},e.display)}))}),Object(g.jsx)("div",{id:"".concat(n,"-scroll"),ref:l})]})},je=function(e){var t=e.onSave,n=C(),a=Object(u.a)(n,2),i=a[0],c=a[1],o=r.a.useState(i.build),f=Object(u.a)(o,2),p=f[0],j=f[1],b=r.a.useState(i.lore),m=Object(u.a)(b,2),h=m[0],y=m[1],v=function(e){return Object(g.jsx)("b",{children:p[e].display})},x=X(Object(s.a)(Object(s.a)({},i),{},{build:p}),c,[P()[1]])[0];return Object(g.jsx)(le.a,{onSubmit:function(e){e.preventDefault(),t({id:"p-1",lore:h,build:p},c)},children:Object(g.jsxs)(l.a,{fluid:!0,style:{marginBottom:"105px"},children:[Object(g.jsx)(d.a,{className:"g-2",children:w(H).filter((function(e){var t=Object(u.a)(e,2),n=t[0];t[1];return!fe.has(n)})).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(g.jsx)(pe,{setField:function(e){return function(e,t){j(Object(s.a)(Object(s.a)({},p),{},Object(ue.a)({},e,t)))}(n,e)},section:n,options:a,isSelected:function(e){return p[n].display===e.display}},n)}))}),Object(g.jsx)(de.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(g.jsxs)(l.a,{children:[Object(g.jsxs)(de.a.Text,{children:["You are ",Object(g.jsx)("i",{onClick:function(){return y((function(e){return Object(s.a)(Object(s.a)({},e),{},{name:W()})}))},children:h.name}),", the ",v("skill")," ",v("class")," ",v("charm"),Object(g.jsx)("br",{}),"who wields a ",v("weapon")," and a ",v("offhand"),Object(g.jsx)("br",{}),"and wears ",v("armor")," with ",v("headgear")," and ",v("footwear")]}),Object(g.jsxs)(de.a.Text,{children:["HP | Speed",Object(g.jsx)("br",{}),"Attack | Defence",Object(g.jsx)("br",{}),"Stamina | Per Turn"]}),Object(g.jsxs)(de.a.Text,{children:[x.hp.max," | ",x.speed.max,Object(g.jsx)("br",{}),x.attack.max," | ",x.defence.max,Object(g.jsx)("br",{}),x.stamina.max," | ",x.staminaPerTurn.max]}),Object(g.jsx)(O.a,{type:"submit",children:"This is me!"})]})})]})})},be=function(e){var t=e.player,n=e.onSave,a=r.a.useState([]),i=Object(u.a)(a,2),c=i[0],s=i[1],d=function(e){return Object(g.jsx)("b",{children:t.build[e].display})};return Object(g.jsxs)(le.a,{onSubmit:function(e){e.preventDefault();var t=c.map((function(e){return e[0]})),a=c.map((function(e){return e[1]}));n(t,a)},children:[Object(g.jsx)(l.a,{fluid:!0,style:{marginBottom:c.length>0?"205px":"105px"},children:Object(g.jsx)(j.a,{size:"lg",className:"mb-2",children:I.map((function(e){return Object(g.jsx)(O.a,{disabled:c.length>4,onClick:function(){return s((function(t){return[].concat(Object(o.a)(t),[e])}))},children:e[0].lore.name},e[0].lore.name)}))})}),c.length>0&&Object(g.jsx)(de.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{marginBottom:"100px"},children:Object(g.jsx)(l.a,{fluid:!0,children:Object(g.jsx)(j.a,{size:"sm",className:"mb-2",children:c.map((function(e,t){return Object(g.jsx)(O.a,{onClick:function(){return s((function(t){var n=!1;return t.filter((function(t){return n||t[0].lore.name!==e[0].lore.name||!(n=!0)}))}))},children:e[0].lore.name},"".concat(e[0].lore.name,"-").concat(t))}))})})}),Object(g.jsx)(de.a,{fixed:"bottom",bg:"dark",variant:"dark",style:{maxHeight:"100px"},children:Object(g.jsxs)(l.a,{children:[Object(g.jsxs)(de.a.Text,{children:["You are ",Object(g.jsx)("i",{children:t.lore.name}),", the ",d("skill")," ",d("class")," ",d("charm"),Object(g.jsx)("br",{}),"who wields a ",d("weapon")," and a ",d("offhand"),Object(g.jsx)("br",{}),"and wears ",d("armor")," with ",d("headgear")," and ",d("footwear")]}),Object(g.jsxs)(j.a,{children:[Object(g.jsx)(O.a,{disabled:c.length<0||c.length>5,onClick:function(e){return s((function(e){return[].concat(Object(o.a)(e),[P()])}))},children:"Add Random"}),Object(g.jsx)(O.a,{type:"submit",disabled:c.length<1||c.length>5,children:"To Battle!"})]})]})})]})};function me(e){function t(e,t){if((e=e||{}).mutationFunction=e.mutationFunction||t.mutationFunction,e.crossoverFunction=e.crossoverFunction||t.crossoverFunction,e.fitnessFunction=e.fitnessFunction||t.fitnessFunction,e.doesABeatBFunction=e.doesABeatBFunction||t.doesABeatBFunction,e.population=e.population||t.population,e.population.length<=0)throw Error("population must be an array and contain at least 1 phenotypes");if(e.populationSize=e.populationSize||t.populationSize,e.populationSize<=0)throw Error("populationSize must be greater than 0");return e}var n=t(e,{mutationFunction:function(e){return e},crossoverFunction:function(e,t){return[e,t]},fitnessFunction:function(e){return 0},doesABeatBFunction:void 0,population:[],populationSize:100});function a(e){return JSON.parse(JSON.stringify(e))}function r(e){return n.mutationFunction(a(e))}function i(e){e=a(e);var t=n.population[Math.floor(Math.random()*n.population.length)];return t=a(t),n.crossoverFunction(e,t)[0]}return{evolve:function(e){return e&&(n=t(e,n)),function(){for(var e=n.population.length;n.population.length<n.populationSize;){var t=Math.floor(Math.random()*e);n.population.push(r(a(n.population[Math.floor(t)])))}}(),function(){for(var e=0;e<n.population.length;e++){var t=Math.floor(Math.random()*n.population.length),a=n.population[t];n.population[t]=n.population[e],n.population[e]=a}}(),function(){for(var e,t,a=[],c=0;c<n.population.length-1;c+=2){var s=n.population[c],o=n.population[c+1];a.push(s),e=s,t=o,(n.doesABeatBFunction?n.doesABeatBFunction(e,t):n.fitnessFunction(e)>=n.fitnessFunction(t))?Math.random()<.5?a.push(r(s)):a.push(i(s)):a.push(o)}n.population=a}(),this},best:function(){var e=this.scoredPopulation();return a(e.reduce((function(e,t){return e.score>=t.score?e:t}),e[0]).phenotype)},bestScore:function(){return n.fitnessFunction(this.best())},population:function(){return a(this.config().population)},scoredPopulation:function(){return this.population().map((function(e){return{phenotype:a(e),score:n.fitnessFunction(e)}}))},config:function(){return a(n)},clone:function(e){return me(t(e,t(this.config(),n)))}}}n(83);var he={playerSeed:"Miau",weights:{monster:.7,player:.125,turn:.1,stamina:.075},debug:!1};function Oe(e,t,n){for(var a=Object(s.a)(Object(s.a)({},he),n),r=Object(o.a)(Array(t).keys()),i=new T.a(a.playerSeed),c=Q(e.player),l={mutationFunction:function(e){var t=M(e),n=t.enemies.reduce((function(e,t){return e+t.hp.current}),0);if(0===t.player.hp.current||0===n)return e;for(var a=e;6===i.d6()||(null!==(r=null===(s=M(a).enemies[M(a).target])||void 0===s?void 0:s.hp)&&void 0!==r?r:0)<=0;){var r,s;a=re(a,i.natural({min:0,max:M(a).enemies.length-1}))}var o=M(a),l=c.map((function(e,t){return[e,t]})).filter((function(e){var t=Object(u.a)(e,2),n=t[0];t[1];return n.stamina>o.player.stamina.current})).map((function(e){var t=Object(u.a)(e,2);t[0];return t[1]}));return a=ae(a,i.natural({min:0,max:c.length-1,exclude:l}))},fitnessFunction:function(e){var t=M(e),n=t.enemies.reduce((function(e,t){return e+t.hp.current}),0),r=t.player.hp.current,i=t.player.stamina.current,c=e.states[0].player.hp.max,s=e.states[0].player.stamina.max,o=e.states[0].enemies.reduce((function(e,t){return e+t.hp.current}),0),u=(o-n)/o,l=r/c,d=(e.turns-e.states.length)/e.turns,f=i/s,p=u*a.weights.monster+l*a.weights.player+d*a.weights.turn+f*a.weights.stamina;return a.debug&&console.log("MH: ".concat(n," | PH: ").concat(r," | TR: ").concat(e.states.length,"\nFitness: ").concat(p," | MF: ").concat(u," | PF: ").concat(l," | SF: ").concat(f," | TF: ").concat(d,"\nWeights: ").concat(JSON.stringify(a.weights))),p},population:r.map((function(t){return e})),populationSize:t},d=null!==n&&void 0!==n&&n.turns?null===n||void 0===n?void 0:n.turns:e.turns,f=new me(l),p=0;p<d;p++)f=f.evolve();return f.scoredPopulation()}var ye=n(145),ge=n(84),ve=n.n(ge),xe=n(72),ke=n(30),Se=n(48),we=n(85),Ae="1"===Object({NODE_ENV:"production",PUBLIC_URL:"/buildmancer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SMD;Ae&&Object(we.inspect)({server:new ve.a.Server({port:8888})});var Ee={on:{MENU:{target:"main"}}},Te=Object(s.a)({initial:"play",states:{play:{entry:["reset"],on:{WIN:{target:"win"},LOSE:{target:"lose"}}},win:{type:"final"},lose:{type:"final"}}},Ee),Me=Object(s.a)({initial:"player",states:{player:{entry:["reset"],on:{PLAYER:{target:"encounter"}}},encounter:{on:{ENCOUNTER:{target:"play"}}},play:{on:{WIN:{target:"win"},LOSE:{target:"lose"}}},win:{type:"final"},lose:{type:"final"}}},Ee),Pe=Object(s.a)({initial:"player",states:{player:{entry:["reset"],on:{PLAYER:{target:"play"}}},play:{on:{WIN:[{target:"victory",cond:"isFinal"},{target:"play",actions:["bumpVictories"],internal:!0}],LOSE:{target:"defeat"}}},victory:{type:"final"},defeat:{type:"final"}}},Ee),Ce=Object(s.a)({initial:"player",states:{player:{entry:["reset"],on:{PLAYER:{target:"play"}}},play:{on:{WIN:{target:"play",actions:["bumpVictories"]},LOSE:{target:"defeat"}}},defeat:{type:"final",on:{}}}},Ee),Be=(Object(s.a)({initial:"puzzle",states:{puzzle:{on:{PLAYER:{target:"player"}}},player:{on:{SELECTED:{target:"play"}}},play:{on:{COMPLETE:{target:"complete"}}},complete:{on:{NEXT:{target:"player"},SELECT:{target:"puzzle"}}}}},Ee),function(){return{victories:0,score:0,seed:Math.random()}}),De=function(){return{victories:0,seed:Math.random()}},Fe=function(){return{seed:Math.random()}},Re=Object(xe.b)({tsTypes:{},id:"menus",initial:"main",context:{arcadeContext:Be(),survivalContext:De(),singleContext:Fe()},states:{main:{on:{QUICK:{target:"quick"},SINGLE:{target:"single"},ARCADE:{target:"arcade"},SURVIVAL:{target:"survival"}}},quick:Object(s.a)({},Te),single:Object(s.a)({},Me),arcade:Object(s.a)({},Pe),survival:Object(s.a)({},Ce)}},{guards:{isFinal:function(e){return e.arcadeContext.victories+1>=7}},actions:{bumpVictories:Object(ke.assign)({arcadeContext:function(e,t){var n=e.arcadeContext;return Object(s.a)(Object(s.a)({},n),{},{victories:n.victories+1,seed:Math.random()})},survivalContext:function(e,t){var n=e.survivalContext;return Object(s.a)(Object(s.a)({},n),{},{victories:n.victories+1,seed:Math.random()})}}),reset:Object(ke.assign)({survivalContext:function(e,t){return De()},arcadeContext:function(e,t){return Be()},singleContext:function(e,t){return Fe()}})}});Ae&&Object(Se.c)(Re,{devTools:!0}).onTransition((function(e){return console.log(e)})).start();var Ne=function(e){var t=e.title,n=e.states,a=e.onClick;return Object(g.jsxs)(l.a,{fluid:!0,style:{marginBottom:"105px"},children:[Object(g.jsx)(d.a,{className:"g-2",children:Object(g.jsx)(p.a.Title,{children:t})}),n.map((function(e){return Object(g.jsx)(d.a,{className:"g-2",children:Object(g.jsx)(O.a,{size:"lg",className:"mb-2",variant:"primary",onClick:function(){a(e)},children:e},e)},e)}))]})};var Le=function(e){var t=e.play,n=e.timeTravel,a=e.onGameEnd,i=r.a.useState(t),c=Object(u.a)(i,2),l=c[0],d=c[1],f=r.a.useState([]),p=Object(u.a)(f,2),j=p[0],b=p[1];r.a.useEffect((function(){d(t)}),[t]),r.a.useEffect((function(){var e=function(e){var t=e.states[e.states.length-1];return t.player.hp.current<=0?"loss":t.enemies.reduce((function(e,t){return e+t.hp.current}),0)<=0?"win":"playing"}(l);"playing"!==e&&a(e,l)}),[l]);var m=n?{redo:j.length>0?function(){var e=Object(o.a)(j),t=e.pop();b(e),d(Object(s.a)(Object(s.a)({},l),{},{states:[].concat(Object(o.a)(l.states),[t])}))}:void 0,undo:function(){b([].concat(Object(o.a)(j),[M(l)])),d(Object(s.a)(Object(s.a)({},l),{},{states:[l.states[0]].concat(Object(o.a)(l.states.slice(1,-1)))}))}}:void 0;return Object(g.jsx)(oe,{game:l,timeTravel:m,setSelected:function(e){b([]),d(re(l,e))},setDisabledSkills:function(e){b([]),d(function(e,t){return e.states[e.states.length-1].disabledSkills=t,Object(s.a)(Object(s.a)({},e),{},{states:Object(o.a)(e.states)})}(l,e))},handlePlayerEffect:function(e){b([]),d(ae(l,e))},solveGame:function(e){return d(Object(y.a)(Oe(l,e,{turns:l.turns-l.states.length})).maxBy((function(e){return e.score})).phenotype)},hint:function(e){return d(Object(s.a)(Object(s.a)({},l),{},{states:[].concat(Object(o.a)(l.states),[Object(y.a)(Oe(l,e,{turns:l.turns-l.states.length})).maxBy((function(e){return e.score})).phenotype.states[l.states.length]])}))}})},He=function(){var e=C(),t=Object(ye.a)(Re,{devTools:!0}),n=Object(u.a)(t,2),a=n[0],r=n[1],i=a.event;switch(!0){case a.matches("main"):return Object(g.jsx)(Ne,{title:"Main Menu",states:Object.keys(Re.states.main.on),onClick:r});case a.matches({quick:"play"}):var c=C(),s=P();return Object(g.jsx)(Le,{play:$(c[0],c[1],[s[0]],[s[1]],50,a.context.singleContext.seed),timeTravel:!0,onGameEnd:function(e,t){r("win"===e?"WIN":"LOSE",{result:e,game:t})}});case a.matches({quick:"win"}):case a.matches({quick:"lose"}):return Object(g.jsx)(Ne,{title:"".concat(i.result," in ").concat(i.game.states.length-1," turns"),states:["MENU"],onClick:r});case a.matches({single:"player"}):return Object(g.jsx)(je,{onSave:function(e,t){r("PLAYER",{player:[e,t]})}});case a.matches({single:"encounter"}):return Object(g.jsx)(be,{player:e[0],onSave:function(e,t){r("ENCOUNTER",{encounter:[e,t],player:i.player})}});case a.matches({single:"play"}):return Object(g.jsx)(Le,{play:$(i.player[0],i.player[1],i.encounter[0],i.encounter[1],50,a.context.singleContext.seed),timeTravel:!0,onGameEnd:function(e,t){r("win"===e?"WIN":"LOSE",{result:e,game:t})}});case a.matches({single:"win"}):case a.matches({single:"lose"}):return Object(g.jsx)(Ne,{title:"".concat(i.result," in ").concat(i.game.states.length-1," turns"),states:["MENU"],onClick:r});case a.matches({arcade:"player"}):var o=P();return Object(g.jsx)(je,{onSave:function(e,t){r("PLAYER",{game:$(e,t,[o[0]],[o[1]],50,a.context.survivalContext.seed)})}});case a.matches({arcade:"play"}):return Object(g.jsx)(Le,{play:i.game,timeTravel:!1,onGameEnd:function(e,t){var n=P(),i=t.states[0];r("win"===e?"WIN":"LOSE",{result:e,game:$(t.player,i.player,[n[0]],[n[1]],50,a.context.survivalContext.seed)})}});case a.matches({arcade:"victory"}):return Object(g.jsx)(Ne,{title:"VICTORY!",states:["MENU"],onClick:r});case a.matches({arcade:"defeat"}):return Object(g.jsx)(Ne,{title:"Failed after ".concat(a.context.arcadeContext.victories," victories"),states:["MENU"],onClick:r});case a.matches({survival:"player"}):var l=P();return Object(g.jsx)(je,{onSave:function(e,t){r("PLAYER",{game:$(e,t,[l[0]],[l[1]],50,a.context.survivalContext.seed)})}});case a.matches({survival:"play"}):return Object(g.jsx)(Le,{play:i.game,timeTravel:!1,onGameEnd:function(e,t){var n=P(),c=t.states[i.game.states.length-1];r("win"===e?"WIN":"LOSE",{result:e,game:$(t.player,c.player,[n[0]],[n[1]],50,a.context.survivalContext.seed)})}});case a.matches({survival:"defeat"}):return Object(g.jsx)(Ne,{title:"Completed after ".concat(a.context.survivalContext.victories," victories"),states:["MENU"],onClick:r});default:return Object(g.jsx)(g.Fragment,{children:JSON.stringify(a.value)})}},We=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ie(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,148)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(He,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/buildmancer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/buildmancer","/service-worker.js");We?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ie(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ie(t,e)}))}}(),Je()},95:function(e,t,n){},96:function(e,t,n){}},[[131,1,2]]]);
//# sourceMappingURL=main.c6332aa2.chunk.js.map